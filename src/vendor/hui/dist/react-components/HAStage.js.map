{"version":3,"sources":["../../../react-components/HAStage.jsx"],"names":[],"mappings":"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","file":"HAStage.js","sourcesContent":["import React from \"react\";\nimport \"hui/stage\";\nimport {getReactTypeName, updateClassWithProps} from \"hui/core/utils\";\n\nexport default class HAStage extends React.Component {\n    static propTypes = {\n        children: function anonymous(props, propName, componentName) {\n            var prop = props[propName] || [],\n                types = [\"HAHeader\", \"HASection\"],\n                typeName;\n            prop = Array.isArray(prop) ? prop : [prop];\n\n            for (var child in prop) {\n                if (prop[child] != undefined && prop[child].type != undefined) {\n                    typeName = getReactTypeName(prop[child]);\n                    // Only accept a single child, of the appropriate type\n                    if (types.indexOf(typeName) === -1) {\n                        return new Error(componentName + \"\\'s children can only have one instance of the following types: \" + types.join(\", \"));\n                    } else {\n                        types[types.indexOf(typeName)] = \"\";\n                    }\n                }\n            }\n        },\n        className: React.PropTypes.string,\n        open: React.PropTypes.bool,\n        collapsible: React.PropTypes.bool\n    };\n\n    constructor(props) {\n        super(props);\n        this.childCount = 0;\n        this._huiComponent = null;\n        this.state = {\n            classAttributes: null\n        };\n    }\n\n    componentDidMount() {\n        this.updateHeader();\n        this.updateSection();\n\n        if (this.props.collapsible) {\n            if (this.childCount === 2) {\n                this._huiComponent.collapsible = this.props.collapsible;\n            } else {\n                console.error(\"You can not set collapsible to be true if you do not have both a header and a section.\");\n            }\n        }\n\n        if (this.props.open) {\n            this._huiComponent.open = this.props.open;\n        }\n\n        // merge pre-existing custom element classes with props\n        if (this.props.className) {\n            this.updateElementClasses();\n        }\n    }\n\n    // re-render when we have pre-existing classes and new props.className\n    updateElementClasses() {\n        const mergedClassString = updateClassWithProps(this._huiComponent, this.props.className);\n        if (mergedClassString) {\n            this.setState({\n                classAttributes: mergedClassString\n            });\n        }\n    }\n\n    updateHeader() {\n        let header = this._huiComponent.querySelector(\"header\");\n\n        if (header) {\n            this._huiComponent.header = Array.prototype.slice.call(header.childNodes);\n            this.childCount++;\n        }\n    }\n\n    updateSection() {\n        let section = this._huiComponent.querySelector(\"section\");\n\n        if (section) {\n            this._huiComponent.section = Array.prototype.slice.call(section.childNodes);\n            this.childCount++;\n        }\n    }\n\n    handleRef = (c) => {\n        this._huiComponent = c;\n    };\n\n    render() {\n        /* jshint ignore:start */\n        return (\n            <ha-stage\n                ref={this.handleRef}\n                reactLayering={true}\n                class={this.state.classAttributes}\n                {...this.props}>\n                {this.props.children}\n            </ha-stage>\n        );\n        /* jshint ignore:end */\n    }\n}\n"]}