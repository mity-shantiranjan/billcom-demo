{"version":3,"sources":["../../../react-components/HACardDiscoveryLarge.jsx"],"names":[],"mappings":"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","file":"HACardDiscoveryLarge.js","sourcesContent":["import React from \"react\";\nimport \"hui/card-discovery-large\";\nimport {getReactTypeName} from \"hui/core/utils\";\n\nexport default class HACardDiscoveryLarge extends React.Component {\n\n  // check that the only children passed to this component are a HASection or HAFooter\n    static propTypes = {\n      children: function (props, propName, componentName) {\n        var prop = props[propName] || [],\n            types = [\"HASection\", \"HAFooter\"],\n            typeName;\n        // handle single child prop http://facebook.github.io/react/tips/children-props-type.html\n        prop = Array.isArray(prop) ? prop : [prop];\n\n        for (var child in prop) {\n            typeName = getReactTypeName(prop[child]);\n            // Only accept a single child, of the appropriate type\n            if (types.indexOf(typeName) === -1) {\n                return new Error(`${componentName}'s children can only have one instance of the following types: ${types.join(', ')}`);\n            } else {\n                types[types.indexOf(typeName)] = '';\n            }\n        }\n    },\n    className: React.PropTypes.string,\n    titleText: React.PropTypes.string,\n    dismissible: React.PropTypes.bool,\n    open: React.PropTypes.bool,\n    onShow: React.PropTypes.func,\n    onClose: React.PropTypes.func,\n    onDismiss: React.PropTypes.func\n  };\n\n    constructor(props) {\n        super(props);\n        this._cardDiscoveryLarge = null; // cardDiscoveryLarge DOM reference, set after render()\n        // keep track if we have set any event listeners on cardDiscoveryLarge\n        this._listeners = {};\n    }\n\n    componentDidMount() {\n      // handle React 15 partial rewrite\n      this.fixRenderedChildren();\n      this.mountCardDiscoveryLarge();\n    }\n\n    componentDidUpdate(prevProps) {\n      this.mountCardDiscoveryLarge(prevProps);\n    }\n\n    // partial rewrite for React 15 - update underlying web component's properties directly\n    fixRenderedChildren() {\n\n        let cardContainer = this._cardDiscoveryLarge.querySelector('.card-discovery-large-container'),\n            siblingSection = cardContainer.nextElementSibling;\n\n        // short circuit if already been amended\n        if (!siblingSection) {\n            return;\n        }\n\n        this._cardDiscoveryLarge.section = siblingSection;\n\n        // if no children, only update textContent\n        // otherwise, move children back under original section\n        const underlyingSection = cardContainer.querySelector('section > section'),\n              underlyingSectionChildren = Array.prototype.slice.call(underlyingSection.children);\n\n        if (underlyingSectionChildren.length < 1) {\n            this._cardDiscoveryLarge.section = siblingSection.textContent;\n        } else {\n            let outerSection = this._cardDiscoveryLarge.querySelector('section');\n            underlyingSectionChildren.forEach(sectionElement => {\n                outerSection.appendChild(sectionElement);\n            });\n        }\n\n        // move rendered footer into empty footer container\n        const renderedFooter = cardContainer.nextElementSibling;\n        cardContainer.removeChild(cardContainer.querySelector('footer'));\n\n        // update footer if not empty\n        if (renderedFooter) {\n            cardContainer.appendChild(renderedFooter);\n            this._cardDiscoveryLarge.footer = Array.prototype.slice.call(renderedFooter.children);\n        }\n    }\n\n    mountCardDiscoveryLarge(prevProps = {}){\n\n        if(this._cardDiscoveryLarge && this.props.open !== prevProps.open) {\n          if (this.props.open) {\n            this.setupListeners();\n            if (this._cardDiscoveryLarge.show) {\n                this._cardDiscoveryLarge.show(); // show card discvoery large in DOM using hui/card-discovery-large\n            } else {\n                // on browsers that doesn't support custom elements natively,\n                // the component is not upgraded yet so show is not available, wait for event\n                const componentUpgraded = (event) => {\n                    event.stopPropagation();\n                    this._cardDiscoveryLarge.show(); // show card discvoery large in DOM using hui/card-discovery-large\n                };\n                this._listeners.componentUpgraded = componentUpgraded.bind(this);\n                this._cardDiscoveryLarge.addEventListener(\"component-upgraded\", this._listeners.componentUpgraded);\n            }\n          } else if (prevProps.show) {\n            // remove Card from DOM using hui/card-discovery-large\n            this._cardDiscoveryLarge.close();\n          }\n        }\n    }\n\n    setupListeners() {\n        if (Object.keys(this._listeners).length === 0) {\n            const onShow = (event) => {\n                event.stopPropagation();\n                if (this.props.onShow) {\n                    this.props.onShow(event);\n                }\n            };\n            this._listeners.onShow = onShow.bind(this);\n            this._cardDiscoveryLarge.addEventListener(\"show\", this._listeners.onShow);\n\n            const onClose = (event) => {\n                event.stopPropagation();\n                if (this.props.onClose) {\n                    this.props.onClose(event);\n                }\n            };\n            this._listeners.onClose = onClose.bind(this);\n            this._cardDiscoveryLarge.addEventListener(\"close\", this._listeners.onClose);\n\n            const onDismiss = (event) => {\n                event.stopPropagation();\n                if (this.props.onDismiss) {\n                    this.props.onDismiss(event);\n                }\n            };\n            this._listeners.onDismiss = onDismiss.bind(this);\n            this._cardDiscoveryLarge.addEventListener(\"dismiss\", this._listeners.onDismiss);\n        }\n    }\n\n    componentWillUnmount() {\n        this._cardDiscoveryLarge.removeEventListener(\"show\", this._listeners.onShow, false); // clean up show listener\n        this._cardDiscoveryLarge.removeEventListener(\"close\", this._listeners.onClose, false); // clean up close listener\n        this._cardDiscoveryLarge.removeEventListener(\"dismiss\", this._listeners.onDismiss, false); // clean up dismiss listener\n        this._cardDiscoveryLarge.removeEventListener(\"component-upgraded\", this._listeners.componentUpgraded, false); // clean up component-upgraded listener\n        this._listeners = {};\n    }\n\n    handleRef = (c) => {\n        this._cardDiscoveryLarge = c;\n    };\n\n    render() {\n        /* jshint ignore:start */\n        return (\n           <ha-card-discovery-large\n             ref={this.handleRef}\n             class={this.props.className}\n             {...this.props}\n           >\n            {this.props.children}\n            </ha-card-discovery-large>\n        );\n        /* jshint ignore:end */\n    }\n}\n"]}