{"version":3,"sources":["../../../react-components/HADrawerLarge.jsx"],"names":[],"mappings":"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","file":"HADrawerLarge.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport HAPortal from './HAPortal';\nimport \"hui/drawer-large\";\n\nexport default class HADrawerLarge extends React.Component {\n\n    // check that the only children passed to this component are a HASection, or HAFooter\n    static propTypes = {\n      children: function (props, propName, componentName) {\n            var prop = props[propName] || [];\n            var types = ['HASection', 'HAFooter'];\n            // handle single child prop http://facebook.github.io/react/tips/children-props-type.html\n            prop = Array.isArray(prop) ? prop : [prop];\n\n            for (var child in prop) {\n                // Only accept a single child, of the appropriate type\n                if (types.indexOf(prop[child].type.name) === -1) {\n                    return new Error(`${componentName}'s children can only have one instance of the following types: ${types.join(', ')}`);\n                } else {\n                    types[types.indexOf(prop[child].type.name)] = '';\n                }\n            }\n        },\n        className: React.PropTypes.string,\n        show: React.PropTypes.bool.isRequired,\n        titleText: React.PropTypes.string,\n        onShow: React.PropTypes.func,\n        onClose: React.PropTypes.func,\n        onDismiss: React.PropTypes.func\n    };\n\n    constructor(props) {\n        super(props);\n        this._drawerLarge = null; // drawerLarge DOM reference, set after render()\n        this._listeners = {};\n        this.compId = \"\";\n    }\n\n    componentDidMount() {\n        if (this._drawerLarge) {\n            this.removeWebRenderComp();\n            this.setState(() => { this.compId = this._drawerLarge.componentId });\n        }\n        this.mountDrawerLarge();\n    }\n\n    componentDidUpdate(prevProps) {\n        this.mountDrawerLarge(prevProps);\n    }\n\n    mountDrawerLarge(prevProps = {}) {\n        // if we have added the drawer to the dom and we are changing show state\n        if (this._drawerLarge && this.props.show !== prevProps.show) {\n            if (this.props.show) {\n            this.setupListeners();\n                if (this._drawerLarge.show) {\n                    this._drawerLarge.show();\n                } else {\n                    // on browsers that doesn't support custom elements natively,\n                    // the component is not upgraded yet so show is not available, wait for event\n                    const componentUpgraded = (event) => {\n                        event.stopPropagation();\n                        this._drawerLarge.show();\n                    };\n                    this._listeners.componentUpgraded = componentUpgraded.bind(this);\n                    this._drawerLarge.addEventListener(\"component-upgraded\", this._listeners.componentUpgraded);\n                }\n            } else if (prevProps.show) {\n                this._drawerLarge.close(); // remove drawer-large from DOM using hui/drawer-large\n            }\n        }\n    }\n\n    removeWebRenderComp() {\n        let asideChild = this._drawerLarge.querySelectorAll('aside');\n        if (asideChild && asideChild.length > 1) {\n            this._drawerLarge.removeChild(asideChild[0]);\n        }\n    }\n\n    setupListeners() {\n      if (Object.keys(this._listeners).length === 0) {\n        const onShow = (event) => {\n          event.stopPropagation();\n          if (this.props.onShow) {\n              this.props.onShow(event);\n          }\n        };\n        this._listeners.onShow = onShow.bind(this);\n        this._drawerLarge.addEventListener(\"show\", this._listeners.onShow);\n\n        const onClose = (event) => {\n          event.stopPropagation();\n          if (this.props.onClose) {\n              this.props.onClose(event);\n          }\n          this.cleanUpListeners();\n        };\n        this._listeners.onClose = onClose.bind(this);\n        this._drawerLarge.addEventListener(\"close\", this._listeners.onClose);\n\n        const onDismiss = (event) => {\n          event.stopPropagation();\n          if (this.props.onDismiss) {\n              this.props.onDismiss(event);\n          }\n          // onDismiss emits a onClose so listener cleanup is handled there\n        };\n        this._listeners.onDismiss = onDismiss.bind(this);\n        this._drawerLarge.addEventListener(\"dismiss\", this._listeners.onDismiss);\n      }\n    }\n\n    componentWillUnmount() {\n        // we might need a unmountPortal here depending on how applications handle dom rendering & routing\n        this.cleanUpListeners();\n    }\n\n    cleanUpListeners() {\n        // if we do not have a _drawerLarge then HAUnderlay destroys the event listeners\n        if (this._drawerLarge) {\n          this._drawerLarge.removeEventListener(\"show\", this._listeners.onShow, false); // clean up show listener\n          this._drawerLarge.removeEventListener(\"close\", this._listeners.onClose, false); // clean up close listener\n          this._drawerLarge.removeEventListener(\"dismiss\", this._listeners.onDismiss, false); // clean up dismiss listener\n        }\n        this._listeners = {};\n    }\n\n    handleRef = (c) => {\n        this._drawerLarge = c;\n    };\n\n    render() {\n      return (\n        <HAPortal show={this.props.show} noUnderlay={!this.props.backdrop}>\n          <ha-drawer-large\n              ref={this.handleRef}\n              class={this.props.className}\n              reactLayering={true}\n              {...this.props}\n          >\n              <aside className=\"drawer-panel\" aria-labelledby={\"drawer-large-title-\" + this.compId} tabIndex=\"-1\">\n                  <header className=\"header\">\n                      <button className=\"drawer-close first-focus\" aria-label=\"close\">\n                          <span className=\"hi hi-close\"></span>\n                      </button>\n                  </header>\n                  {React.Children.map(this.props.children, child => {\n                      if (child.type.name === \"HASection\") {\n                          return (<section key=\"1\" className=\"content\" tabIndex=\"-1\">\n                                      <h3 id={\"drawer-large-title-\" + this.compId}>{this.props.titleText}</h3>\n                                      <div className=\"inner-content\">\n                                          {child}\n                                      </div>\n                                  </section>);\n                      } else if (child.type.name === \"HAFooter\") {\n                          return (<footer key=\"2\" className=\"footer\" tabIndex=\"-1\">\n                                    {child}\n                                  </footer>);\n                      }\n                  })}\n              </aside>\n          </ha-drawer-large>\n        </HAPortal>\n      );\n    }\n}\n"]}