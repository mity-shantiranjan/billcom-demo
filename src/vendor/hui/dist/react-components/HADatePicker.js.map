{"version":3,"sources":["../../../react-components/HADatePicker.jsx"],"names":[],"mappings":"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","file":"HADatePicker.js","sourcesContent":["import React from \"react\";\nimport \"hui/date-picker\";\nimport {updateClassWithProps} from \"hui/core/utils\";\n\nexport default class HADatePicker extends React.Component {\n    static propTypes = {\n        className: React.PropTypes.string,\n        id: React.PropTypes.string,\n        disabled: React.PropTypes.bool,\n        label: React.PropTypes.string,\n        labelOptional: React.PropTypes.string,\n        monthLabels: React.PropTypes.array,\n        monthAbbreviations: React.PropTypes.array,\n        dayOfWeekLabels: React.PropTypes.array,\n        showYearNavigation: React.PropTypes.bool,\n        tooltips: React.PropTypes.object,\n        blackoutDates: React.PropTypes.array,\n        notableDates: React.PropTypes.array,\n        useDoubleCalendar: React.PropTypes.bool,\n        navigationAriaDescription: React.PropTypes.string,\n        dateFormatter: React.PropTypes.func,\n        datePattern: React.PropTypes.string,\n        name: React.PropTypes.string,\n        icon: React.PropTypes.string,\n        maxLength: React.PropTypes.number,\n        minLength: React.PropTypes.number,\n        optional: React.PropTypes.bool,\n        placeholder: React.PropTypes.string,\n        pattern: React.PropTypes.string,\n        size: React.PropTypes.number,\n        value: React.PropTypes.string,\n        autoComplete: React.PropTypes.string,\n        required: React.PropTypes.bool,\n        noRequiredIndicator: React.PropTypes.bool,\n        min: React.PropTypes.number,\n        max: React.PropTypes.number,\n        requiredMessage: React.PropTypes.string,\n        invalidMessage: React.PropTypes.string,\n        validator: React.PropTypes.func,\n        onValidityChange: React.PropTypes.func,\n        alwaysRenderValidity: React.PropTypes.bool,\n        onInput: React.PropTypes.func,\n        onChange: React.PropTypes.func\n    };\n\n    constructor(props) {\n        super(props);\n        this._huiComponent = null;\n        this._listeners = {}; // keep track if we have set any event listeners on date picker\n        this._huiMethodsCalled = []; // keep track of hui methods called so we do not call them again\n        this.state = {\n            classAttributes: null\n        };\n    }\n\n    componentDidMount() {\n        this.mountDatePicker();\n    }\n\n    componentDidUpdate(prevProps) {\n        this.mountDatePicker(prevProps);\n    }\n\n    mountDatePicker(prevProps = {}) {\n        if (this._huiComponent) {\n\n            this.setupListeners();\n\n            if (this.props.validator) {\n                this._huiComponent.validator = this.props.validator;\n            }\n\n            this._testValidity();\n\n            if (this._huiComponent.showCalendar) { //Check to see if browser supports custom elements. Currently only chrome\n                this.addHUIMethods();\n            } else { // For browsers that don't support custom elements i.e IE, FF\n                const componentUpgraded = (event) => {\n                    event.stopPropagation();\n                    this.addHUIMethods();\n                };\n                this._listeners.componentUpgraded = componentUpgraded.bind(this);\n                this._huiComponent.addEventListener(\"component-upgraded\", this._listeners.componentUpgraded);\n            }\n\n            // handle className props being passed to custom element\n            if (this.props.className !== prevProps.className) {\n                this.updateElementClasses();\n            }\n        }\n    }\n\n    // re-render when we have pre-existing classes and new props.className\n    updateElementClasses() {\n        const mergedClassString = updateClassWithProps(this._huiComponent, this.props.className);\n        if (mergedClassString) {\n            this.setState({\n                classAttributes: mergedClassString\n            });\n        }\n    }\n\n    setupListeners() {\n        const onInput = (event) => {\n            event.stopPropagation();\n            if (this.props.onInput) {\n                this.props.onInput(event);\n            }\n            this._testValidity();\n        };\n        this._listeners.onInput = onInput.bind(this);\n\n        if (this._huiComponent) {\n            this._huiComponent.addEventListener(\"input\", this._listeners.onInput);\n        }\n\n        const onChange = (event) => {\n            event.stopPropagation();\n            if (this.props.onChange) {\n                this.props.onChange(event);\n            }\n        };\n        this._listeners.onChange = onChange.bind(this);\n        if (this._huiComponent) {\n            this._huiComponent.addEventListener(\"change\", this._listeners.onChange);\n        }\n    }\n\n    componentWillUnmount() {\n        this._huiComponent.removeEventListener(\"change\", this._listeners.onChange, false);\n        this._huiComponent.removeEventListener(\"input\", this._listeners.onInput, false);\n        this._huiComponent.removeEventListener(\"component-upgraded\", this._listeners.componentUpgraded, false); // clean up component-upgraded listener\n        this._listeners = {};\n        this._huiMethodsCalled = [];\n    }\n\n    addHUIMethods() {\n        if (this.props.showCalendar) {\n            this._huiComponent.showCalendar();\n        }\n\n        if (this.props.closeCalendar) {\n            this._huiComponent.closeCalendar();\n        }\n\n        if (this.props.format) {\n            this._huiComponent.format(new Date(this.props.value), this.props.format);\n        }\n\n        if (this.props.showNextMonth) {\n            if (!this._huiMethodsCalled.showNextMonth) { //showNextMonth should be called only once\n                this._huiComponent.showNextMonth();\n                this._huiMethodsCalled.showNextMonth = true;\n            }\n        }\n\n        if (this.props.showPreviousMonth) { //showPreviousMonth should be called only once\n            if (!this._huiMethodsCalled.showPreviousMonth) {\n                this._huiComponent.showPreviousMonth();\n                this._huiMethodsCalled.showPreviousMonth = true;\n            }\n        }\n\n        if (this.props.preselect) {\n            this._huiComponent.preselect(this.props.preselect);\n        }\n\n        if (this.props.postselect) {\n            this._huiComponent.postselect(this.props.postselect);\n        }\n\n        if (this.props.alwaysRenderValidity) {\n            this._huiComponent.reportValidity();\n        }\n    }\n\n    _testValidity() {\n        if (this.props.onValidityChange) {\n            let valid;\n            if (this._huiComponent.checkValidity) {\n                valid = this._huiComponent.checkValidity();\n            }\n            if (this._lastValidity !== valid) {\n                this._lastValidity = valid;\n                this.props.onValidityChange(valid);\n            }\n        }\n    }\n\n    handleRef = (c) => {\n        this._huiComponent = c;\n    };\n\n    render() {\n        /* jshint ignore:start */\n        return (\n            <ha-date-picker\n                ref={this.handleRef}\n                class={this.state.classAttributes}\n                {...this.props}>\n            </ha-date-picker>\n        );\n        /* jshint ignore:end */\n    }\n}\n"]}