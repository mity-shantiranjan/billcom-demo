/*! harmony-ui-components - v0.13.0 - 2016-10-12 
 * Copyright (c) 2016 Intuit; Licensed  */

function onPlayerStateChange(a,b){var c,d,e,f,g=document.querySelector('[videokey="'+a+'"]');g&&(g._ended=!1,0===b.data?(g._emitVideoEvent("video-completed"),g._ended=!0,(g._overlayDiv||g.section)&&(e=g.querySelector(".ha-video-main-div"),g._overlayDiv?e.insertBefore(g._overlayDiv,e.querySelector("iframe")):(c=document.createElement("div"),c.classList.add("ha-video-overlay"),d=document.createElement("div"),g.section&&d.appendChild(g.section),c.appendChild(d),g.classList.contains("minimized")&&c.classList.add("hidden"),e.insertBefore(c,e.querySelector("iframe")),g._overlayDiv=c),g.section&&g.section.focusContent())):1===b.data?(g._emitVideoEvent("video-started"),g._overlayDiv&&g._overlayDiv.parentNode&&g._overlayDiv.parentNode.removeChild(g._overlayDiv)):2===b.data&&g._emitVideoEvent("video-paused"),f=b.target.getVideoData(),f.title&&!g.titleText&&(g.querySelector(".ha-video-title-bar h3").textContent=f.title))}function onPlayerReady(a,b){var c,d=document.querySelector('[videokey="'+a+'"]');try{d.classList.contains("visible")&&d._player&&d._player.playVideo&&d._player.playVideo(),d.titleText||(d.querySelector(".ha-video-title-bar h3").textContent=b.target.getVideoData().title),c=d.querySelector("iframe"),c.setAttribute("title","Video"),c.setAttribute("tabindex","0")}catch(a){}}function onYouTubeIframeAPIReady(){videoKeys.forEach(function(a){var b,c=document.querySelector('[videokey="'+a+'"]');c&&(b=c.url&&c.url.split("embed/")[1],b&&(b=b.split("?")[0]),c._player=new YT.Player(a,{videoId:b,playerVars:{enablejsapi:1,showinfo:0,modestbranding:1},events:{onStateChange:onPlayerStateChange.bind(null,a),onReady:onPlayerReady.bind(null,a)}}))})}define("hui/core/position",[],function(){function a(a){return a.offsetWidth>0&&a.offsetHeight>0}var b=1e4,c=b;return{get baseZindex(){return b},set baseZindex(a){b!==c?console.warn("The global z-index is already in use; baseZindex should be set at application initialization"):c=a,b=a},getTopZindex:function(){return c++},bringToFront:function(a){a.parentNode!==a.ownerDocument.body&&a.ownerDocument.body.appendChild(a),a.style.zIndex=this.getTopZindex()},getBoxShadowSize:function(a){var b,c,d,e,f,g,h=window.getComputedStyle(a),i={left:0,right:0,top:0,bottom:0};return b=h.getPropertyValue("box-shadow"),"none"===b?i:(b=b.replace(/rgba?\([^\)]+\)/gi,""),b=b.replace(/#[0-9a-f]+/gi,""),b=b.replace(/[a-z]+/gi,"").trim(),c=b.split(" "),d=c.length>0?parseInt(c[0],10):0,e=c.length>1?parseInt(c[1],10):0,g=c.length>2?parseInt(c[2],10):0,f=c.length>3?parseInt(c[3],10):0,i.left=Math.max(f-d+.5*g,0),i.right=Math.max(f+d+.5*g,0),i.top=Math.max(f-e+.5*g,0),i.bottom=Math.max(f+e+.5*g,0),i)},getDimension:function(b){var c,d={},e={position:"",display:"",top:"",left:""},f=!1,g={},h="";if(!a(b))if(c=b.getBoundingClientRect(),c.width&&c.height)g.width=c.width,g.height=c.height;else{f=!0;for(h in e)e[h]=b.style[h]||"";b.style.position="absolute",b.style.left="-1000px",b.style.top="-1000px",b.style.display="inline-block"}if(d={width:g.width||b.offsetWidth,height:g.height||b.offsetHeight},f)for(h in e)b.style[h]=e[h];return d},getPageSize:function(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:Math.max(c.scrollHeight,b.scrollHeight,c.offsetHeight,b.offsetHeight,c.clientHeight,b.clientHeight)}},getPositionInDocument:function(a){var b=a.getBoundingClientRect(),c={x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop},d={left:Math.round(b.left)+c.x,right:Math.round(b.right)+c.x,top:Math.round(b.top)+c.y,bottom:Math.round(b.bottom)+c.y,width:Math.round(b.width),height:Math.round(b.height)};return d}}}),define("hui/core/utils",[],function(){"use strict";function a(a){var b,c=[];for(b in a)c.push(b);return c}function b(b,c){var d,e,f,g,h,i=b[0],j=b.length,k=1;if(j<2||null===i)return i;for(k;k<j;k++)for(d=b[k],g=a(d),h=g.length,e=0;e<h;e++)f=g[e],(void 0===i[f]||c)&&(i[f]=d[f]);return i}function c(a){return!!a&&!!a.nodeType}function d(a){return Array.isArray(a)&&a.reduce(function(a,b){return a&&c(b)},!0)}function e(a){return!!a&&"[object Object]"===a.toString()}function f(a,b){c(a)&&b.filter(function(a){return c(a)}).forEach(function(b){a.appendChild(b)})}function g(a,b,c){function d(a){return/^attr-/.test(a)}function g(a){return a.substring("attr-".length,a.length)}var h=document.createElement(a),i=e(b)?b:{},j=Array.isArray(c)?c:[];return Object.keys(i).forEach(function(a){var b=i[a];d(a)?h.setAttribute(g(a),b):h[a]=b}),f(h,j),h}function h(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}function i(a){return c(a)?Array.prototype.slice.call(a.children):[]}function j(a,b){return k(a,b)[0]||null}function k(a,b){var d=[],e=function(b){return i(a).indexOf(b)!==-1};return c(a)&&b&&(d=Array.prototype.slice.call(a.querySelectorAll(b))),d.filter(e)}function l(a,b,c){var d=function(a,b){var c=a[b];return a&&c?e(a,c):null},e=function(a,b){return"function"==typeof b?b.bind(a):b},f=(b||[]).reduce(d,a);return c&&f?c(f):void 0}var m=/(auto|scroll)/,n={getTextWidth:function(a,b,c){var d,e=c||document.createElement("canvas"),f=e.getContext("2d");return f.font=b,d=Math.floor(f.measureText(a).width),d?d+1:d},removeNodesSafe:function(a,b){var c,d=[];return c=Array.prototype.slice.apply(b),c.filter(function(b){return a===b.parentNode}).map(function(b){d.push(a.removeChild(b)),b.render&&b.render()}),d},appendChildCollection:function(a,b){var c;for(c=0;c<b.length;++c)a.appendChild(b[c])},stopEvent:function(a){a.stopPropagation(),a.preventDefault()},getAnimationEventNames:function(){var a="webkitAnimationName"in document.documentElement.style?"webkitAnimationStart":"animationstart",b="webkitAnimationName"in document.documentElement.style?"webkitAnimationEnd":"animationend",c="onwebkittransitionend"in window?"webkitTransitionEnd":"transitionend";return{animationstart:a,animationend:b,transitionend:c}},getComponentFromElement:function(a,b){for(;a&&a.tagName!==b;)a=a.parentNode;return a},getComponentFromElementByClassName:function(a,b){for(;a&&!a.classList.contains(b);)a=a.parentNode;return a},validationRequired:function(a){return a.required||a.pattern||a.validator||a.min||a.max||a.numeric||a.password||a.minDate||a.maxDate},extend:function(){return b(Array.prototype.slice.call(arguments),!1)},mixin:function(){return b(Array.prototype.slice.call(arguments),!0)},stopNativeEvent:function(a,b,c){a.listenTo(b,c,function(a){a.stopPropagation()})},getSafeTargetFromEvent:function(a){return a.relatedTarget||a.explicitOriginalTarget||document.activeElement},getNextSiblingOfType:function(a,b){for(;(a=a.nextSibling)&&a.nodeName!==b;);return a},getPrevSiblingOfType:function(a,b){for(;(a=a.previousSibling)&&a.nodeName!==b;);return a},getArrayDiff:function(a,b){return a=a?a:[],b=b?b:[],a.filter(function(a){return b.indexOf(a)<0})},getDirectChildByType:function(a,b){var c,d=a.children;return Array.prototype.forEach.call(d,function(a){a.tagName.toLowerCase()===b&&(c=a)}),c},getScrollParent:function(a){var b,c=a,d="absolute"===getComputedStyle(a).position,e=!1;do{if(c=c.parentElement||c.parentNode,null===c)return a.ownerDocument;c!==a.ownerDocument?(b=getComputedStyle(c),d&&"static"===b.position||(m.test(b.overflow)||m.test(b.overflowX)||m.test(b.overflowY))&&(e=!0)):e=!0}while(!e);return c},throttle:function(a,b){var c=!0;return function(){c&&(c=!1,setTimeout(function(){c=!0},b),a.apply(this,arguments))}},throttleDebounce:function(a,b){var c=!0,d=null;return function e(){var f=this;c?(c=!1,setTimeout(function(){c=!0,d&&e.apply(f)},b),d?(a.apply(this,d),d=null):a.apply(this,arguments)):d=arguments}},type:function(a){switch(null==a?""+a:Object.prototype.toString.call(a).slice(8,-1).toLowerCase()){case"string":return String;case"boolean":return n.YesNoType;case"number":return Number;case"object":return Object;case"array":return Array}},YesNoType:{parse:function(a){return"yes"===a.toLowerCase()},stringify:function(a){return a?"yes":"no"}},toggleSuffixText:function(a,b,c){return c?a&&a.slice(-2)!==b&&(a+=b):a&&a.slice(-2)===b&&(a=a.slice(0,-2)),a},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},createElement:g,appendChildren:f,attachContentToNode:function(a,b){return a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?a.forEach(function(a){a&&a.nodeType&&b.appendChild(a)}):a.nodeType&&b.appendChild(a)),b},removeAllChildrenFrom:h,wrapIfNotWrapped:function(a,b){var e=null,f=String.prototype.toLowerCase;return a&&(c(b)?e=f.call(b.tagName)===f.call(a)?b:g(a,{},[b]):d(b)&&(e=g(a,{},b))),e},setAttributes:function(a,b){var d;return c(a)&&e(b)&&Object.keys(b).forEach(function(c){d=b[c],a.setAttribute(c,d)}),a},arrayOfChildrenFrom:i,queryChildOf:j,queryChildrenOf:k,isNode:c,isOpen:function(a){return a&&("HA-POPOVER"===a.nodeName&&a.open||"HA-MODAL"===a.nodeName&&a.classList.contains("show"))},showPopoverOrModal:function(a,b,c){a&&(this.isOpen(a)?c.setPosition(a,b,["bottom","top"],["left","right"]):c.show(a,b,["bottom","top"],["left","right"]))},replaceChildrenOf:function(a,b){c(a)&&(c(b)?(h(a),a.appendChild(b)):d(b)&&(h(a),f(a,b)))},contentQueryFactory:function(a,b){return function(c){var d=[b[c],c].join(" > "),e=a.querySelector(d),f=j(a,c);return e||f}},ifSafeChain:l,ifExists:function(a,b){return l(a,[],b)},customMixin:function(a,b,c,d){var e,f,g={};for(e in b)f=b[e],e in a&&(a[e]===f||e in g&&g[e]===f)||(a[e]=c?c(f,d):f);return a},clone:function(a,b){if(b=b||[],b.indexOf(a)>=0)return null;if(!a||"object"!=typeof a||"function"==typeof a)return a;if(a.nodeType&&"cloneNode"in a)return b.push(a),a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var c;if(Array.isArray(a))b.push(a),c=[];else{b.push(a);try{c=a.constructor?new a.constructor:{}}catch(a){c={}}}return n.customMixin(c,a,n.clone,b)},animateScrollTo:function(a,b,c){var d=(new Date).valueOf(),e=b,f=a.scrollTop;setTimeout(function b(){var g=(new Date).valueOf(),h=Math.min((g-d)/c,1);a.scrollTop=f+(e-f)*h,h<1&&setTimeout(b,33)},33)},hidePopoverOrModal:function(a,b){"HA-MODAL"===a.nodeName?a.close():b.hide(a)},closest:function(a,b){if("function"==typeof a.closest)return a.closest(b);var c,d,e=b.charAt(0);for("["===e&&(b=b.substr(1,b.length-2),c=b.split("="),c.length>1&&(d=!0,c[1]=c[1].replace(/"/g,"").replace(/'/g,"")));a&&a!==document&&1===a.nodeType;a=a.parentNode)if("."===e){if(a.classList.contains(b.substr(1)))return a}else if("#"===e){if(a.id===b.substr(1))return a}else if("["===e&&a.hasAttribute(c[0])){if(!d)return a;if(a.getAttribute(c[0])===c[1])return a}else if(a.tagName.toLowerCase()===b)return a;return null}};return n}),define("hui/core/Viewport",[],function(){"use strict";function a(){return/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)}function b(b,c){var d=["input","select","textarea"],e=document.getElementsByTagName("body")[0],f="add"===b?HTMLElement.prototype.addEventListener:HTMLElement.prototype.removeEventListener,g="add"===b?window.addEventListener:window.removeEventListener,h=function(a){var b=a.target.nodeName.toLowerCase();d.indexOf(b)>-1&&c()};a()?(f.call(e,"focusin",h,!1),f.call(e,"focusout",h,!1),f.call(document,"orientationchange",c,!1)):g.call(window,"resize",c,!1)}var c={onResize:function(a){b("add",a)},offResize:function(a){b("remove",a)}};return c}),define("hui/core/event",["exports"],function(a){function b(a,b,c){for(var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&1===a.nodeType&&a!==c;){if(d.call(a,b))return a;a=a.parentNode}return!1}function c(a,c,d){return function(e){var f=b(e.target,a,d);f&&c(e,f)}}function d(a,b,c,d){a.removeEventListener(b,c,!!d)}function e(a,b,e,f){var g=b.match(/(.*):(.*)/);return g&&(b=g[2],g=g[1],e=c(g,e,a)),a.addEventListener(b,e,!!f),{remove:function(){return d(a,b,e,f)}}}function f(a,b,c){var d;c=c||{},"bubbles"in c||(c.bubbles=!0),"cancelable"in c||(c.cancelable=!1),a.emit?a.emit(b,c):(d=document.createEvent("UIEvent"),d.initUIEvent(b,c.bubbles,c.cancelable,window,1),Object.keys(c).forEach(function(a){a in{bubbles:1,cancelable:1}||(d[a]=c[a])}),a.dispatchEvent(d))}a.on=e,a.off=d,a.emit=f}),define("hui/core/popup",["./position","./utils","./Viewport","./event"],function(a,b,c,d){function e(a,b,c,d,e,f,g){var h=b.top,i=d+e.bottom,j=c.height+i;j<h&&(g.position="top",f.y=a.top-j)}function f(b,c,d,e,f,g,h,i){var j=e+f.top,k=a.getPageSize(this.ownerDocument).height-c.bottom,l=d.height+j;(l<k||i)&&(h.position="bottom",g.y=b.bottom+j)}function g(b,c,d,e,f,g,h){var i=e+f.left,j=a.getPageSize(this.ownerDocument).width-c.right,k=d.width+i;k<j&&(h.position="right",g.x=b.right+i)}function h(a,b,c,d,e,f,g){var h=d+e.right,i=a.left,j=c.width+h;j<i&&(g.position="left",f.x=a.left-j)}function i(b,c,d,e){var f=a.getPageSize(this.ownerDocument).width-b.left,g=c.width;g<f&&(e.alignment="left",d.x=b.left)}function j(b,c,d,e){var f,g,h=a.getPageSize(this.ownerDocument).width,i=c.width;i<h&&(e.alignment="center",f=c.width/2,g=b.left+b.width/2,g>f?g+f<h?d.x=g-f:d.x=h-c.width:d.x=0)}function k(a,b,c,d){var e=a.right,f=b.width;f<e&&(d.alignment="right",c.x=a.left-b.width+a.width)}function l(b,c,d,e,f){var g=a.getPageSize(this.ownerDocument).height-b.top,h=c.height;(h<g||f)&&(e.alignment="top",d.y=b.top)}function m(b,c,d,e){var f,g,h=a.getPageSize(this.ownerDocument).height;e.alignment="middle",f=c.height,g=b.top,g+f<h?d.y=g:d.y=Math.max(0,h-c.height)}function n(a,b,c,d){var e=a.bottom,f=b.height;f<e&&(d.alignment="bottom",c.y=a.bottom-f)}function o(b,c,d,o,p,q){var r,s,t,u,v,w,x,y,C={x:-1,y:-1},F={top:e,left:h,right:g,bottom:f},G={top:l,left:i,right:k,bottom:n,middle:m,center:j},H={top:0,left:0,right:0,bottom:0},I={},J=b.querySelector(".connector");return q=q||{},s=a.getPositionInDocument(c),t=s,b.style.minWidth||(b.style.minWidth=s.width+"px"),r=a.getDimension(b),J?p=z+(p||A):(p=z+(p||0),H=a.getBoxShadowSize(b)),u=d.some(function(a){var b=q[a]||F[a];if(b)return b.call(c,s,t,r,p,H,C,I),I.position}),u||(x=q.bottom||F.bottom,x.call(c,s,r,p,H,C,I,!0)),w=B.indexOf(I.position)>-1,y=w?E:D,v=o.some(function(a){var b;if(y.indexOf(a)>-1)return b=q[a]||G[a],b.call(c,s,r,C,I),I.alignment}),v||w||(x=q.top||G.top,G.top.call(c,s,r,C,I,!0)),J&&"middle"===I.alignment&&(J.style.top=(Math.min(r.height,s.height)-14)/2+"px"),{currentPosition:C,currentPositionType:I}}function p(a){B.forEach(function(a){this.classList.remove("position-"+a)},a),C.forEach(function(a){this.classList.remove("position-"+a)},a),D.forEach(function(a){this.classList.remove("alignment-"+a)},a),E.forEach(function(a){this.classList.remove("alignment-"+a)},a)}function q(a,b){p(a),a.classList.add("position-"+b.currentPositionType.position),a.classList.add("alignment-"+b.currentPositionType.alignment),a.style.left=b.currentPosition.x+"px",a.style.top=b.currentPosition.y+"px"}function r(a){if(a._scrollTarget)return a._scrollTarget;for(var b=a.parentElement||a.parentNode;b;){if(b._scrollTarget)return b._scrollTarget;if(b.scrollHandler)return b;if(b===a.ownerDocument)return;b=b.parentElement||b.parentNode}}function s(a){a.scrollHandler&&(a.scrollParent.removeEventListener("scroll",a.scrollHandler),a.scrollHandler=null,a.scrollParent=null)}function t(c,d,e,f,g,h){var i,j=0;i=r(d),i?(c._scrollTarget=i,c.moveHandler||(c.moveHandler=function(b){c.style.left=parseInt(c.style.left,10)+b.dx+"px",c.style.top=parseInt(c.style.top,10)+b.dy+"px",c.style.zIndex=a.getTopZindex()},c.parentCloseHandler=function(){c.classList.contains("no-transition")||c.classList.add("no-transition")},c.parentObscuredHandler=function(){c.classList.add("no-transition"),c.classList.remove("visible"),setTimeout(function(){c.classList.remove("no-transition")},20)},c.parentRevealedHandler=function(){c.classList.add("no-transition"),c.classList.add("visible"),setTimeout(function(){c.classList.remove("no-transition")},20)},i.addEventListener("ha-popup-move",c.moveHandler),i.addEventListener("close",c.parentCloseHandler),i.addEventListener("ha-popup-obscured",c.parentObscuredHandler),i.addEventListener("ha-popup-revealed",c.parentRevealedHandler),c.addEventListener("close",function a(b){i.removeEventListener("ha-popup-move",b.target.moveHandler),i.removeEventListener("close",b.target.parentCloseHandler),i.removeEventListener("ha-popup-obscured",b.target.parentObscuredHandler),i.removeEventListener("ha-popup-revealed",b.target.parentRevealedHandler),b.target.moveHandler=null,b.target.parentCloseHandler=null,b.target.parentObscuredHandler=null,b.target.parentRevealedHandler=null,b.target.removeEventListener("close",a),b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition")}))):c.scrollHandler||(c.scrollParent=b.getScrollParent(d),c.scrollParent!==c.ownerDocument&&(c.scrollHandler=b.throttleDebounce(function(){F(c,d),!c.classList.contains("leave")&&c.classList.contains("visible")&&0===j&&(j=requestAnimationFrame(function(){u(c,d,e,f,g,h),j=0}))},20),c.scrollParent.addEventListener("scroll",c.scrollHandler),c.closeHandler||(c.closeHandler=function(a){j&&(cancelAnimationFrame(j),j=0),s(a.target),c._noAutoFocusLastActiveElementOnClose=c._tmpNoAutoFocusLastActiveElementOnClose,a.target.removeEventListener("close",c.closeHandler),c.closeHandler=null},c.addEventListener("close",c.closeHandler))))}function u(b,c,e,f,g,h){var i,j,k;return k=e||["bottom","top"],i=f||["left","right"],t(b,c,e,f,g,h),a.bringToFront(b),j=o(b,c,k,i,g,h),j.currentPositionType.position&&j.currentPositionType.alignment?(b.style.top&&b.style.left&&d.emit(b,"ha-popup-move",{dx:j.currentPosition.x-parseInt(b.style.left,10),dy:j.currentPosition.y-parseInt(b.style.top,10)}),q(b,j),!0):(y(b),!1)}function v(a,b,d,e,f,g){var h;return h=function(){a.classList.contains("visible")&&u(a,b,d,e,f,g)},c.onResize(h),h}function w(a){c.offResize(a)}function x(a,b,c,d,e,f){var g=!1;document.body.contains(b)&&a.show&&!a.classList.contains("visible")&&(g=u(a,b,c,d,e,f),g&&a.show())}function y(a){a&&a.open&&a.close(),s(a)}var z=5,A=4,B=["top","bottom"],C=["left","right"],D=["top","middle","bottom"],E=["left","center","right"],F=function(b,c){if(b.classList.contains("leave"))return s(b),b.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),void(b.classList.contains("no-transition")||b.classList.add("no-transition"));var d=a.getPositionInDocument(c),e=a.getPositionInDocument(b.scrollParent);d.bottom<e.top||d.top>e.bottom||d.right<e.left||d.left>e.right?b.classList.contains("visible")&&(b._closeOnBlur?(s(b),b._tmpNoAutoFocusLastActiveElementOnClose=b._noAutoFocusLastActiveElementOnClose,b._noAutoFocusLastActiveElementOnClose=!0,b.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),b.classList.contains("no-transition")||b.classList.add("no-transition"),b.close()):b.classList.contains("visible")&&(b.classList.remove("visible"),b.emit("ha-popup-obscured"))):b.classList.contains("visible")||(b.classList.add("visible"),b.emit("ha-popup-revealed"))};return{installResizeMethod:v,uninstallResizeMethod:w,clearPosition:p,setPosition:u,show:x,hide:y}}),define("hui/core/tooltip",[],function(){function a(a){var b,c,d="focus"===a.trigger?"blur":"mouseleave",e=a._listenersTargets.length;for(b=0;b<e;++b)c=a._listenersTargets[b],c&&(!a.dismissible&&a.duration<=0&&"custom"!==a.trigger?a.listenTo(c,d,a._hideCallback,!0):a.stopListening(c,d,a._hideCallback,!0))}return{removeOldListeners:function(a){var b,c,d=a._listenersTargets.length,e="focus"===a.trigger?"blur":"mouseleave",f="hover"===a.trigger?"mouseenter":"focus";for(b=0;b<d;++b)c=a._listenersTargets[b],a.stopListening(c,f,a._showCallback,!0),a.stopListening(c,e,a._hideCallback,!0)},resetListeners:function(b,c){var d,e,f,g;for("hover"===c?(e="focus",d="mouseenter"):"focus"===c&&(e="mouseenter",d="focus"),f=0;f<b._listenersTargets.length;++f)g=b._listenersTargets[f],g&&(b.stopListening(g,e,b._showCallback,!0),"custom"!==b.trigger&&b.listenTo(g,d,b._showCallback,!0));a(b)},resetTooltipDismissal:a,setTooltipTargets:function(a,b){if(b.indexOf("_previousSibling")===-1)a._listenersTargets=a.ownerDocument.querySelectorAll(b);else{var c=b.split("_previousSibling")[1];c?a._listenersTargets=[a.previousElementSibling.querySelector(c.trim())||a.previousElementSibling]:a._listenersTargets=[a.previousElementSibling]}}}}),define("register-component/v2/register",[],function(){function a(a,d){if(a in c)throw new TypeError("A widget is already registered with tag '"+a+"'.");var e=c[a]={prototype:d};return b.registerElement(a,e)}var b="undefined"!=typeof document&&document,c={};return a}),define("register-component/v2/UIComponent",["object-utils/classes"],function(a){"use strict";function b(a,b,c){return function(d){var e=g(d.target,a,c);e&&b(d,e)}}function c(a){return a.stringify&&a.parse}function d(a,b){if(a&&("function"==typeof a&&(a={stringify:a,parse:a}),!c(a)))throw new TypeError(b+": invalid type");return a||null}function e(a,b,c){var d=typeof a;if(a&&"function"!==d&&"string"!==d)throw new TypeError(c+": "+b+" not a function or method name");return a||null}function f(a,b){return a.hasOwnProperty(b)||n(a,b,{value:Object.create(null)}),a[b]}function g(a,b,c){for(var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&1===a.nodeType&&a!==c;){if(d.call(a,b))return a;a=a.parentNode}return!1}function h(a,b,c){void 0===c&&(c=null);var d=b&&b.parse;return d===Boolean?function(a){return null!==a&&"false"!==a}:d?function(b){return null===b?c:d(b,a)}:function(a){return null===a?c:a}}function i(a,b,c,d,e){var f=d&&d.stringify;n(a,b,{get:function(){return e(this.getAttribute(c))},set:f===Boolean?function(a){a?this.setAttribute(c,c):this.removeAttribute(c)}:f?function(a){a=null===a?a:f(a,b),null===a||""===a?this.removeAttribute(c):this.setAttribute(c,a)}:function(a){null===a||""===a?this.removeAttribute(c):this.setAttribute(c,a)}})}function j(a){function b(a){for(var d,e=a.children,f=0;f<e.length;++f)d=e[f],d.tagName.indexOf("-")>=0?c.push(d):d.children.length&&b(d)}var c=[];return b(a),c}var k,l=0,m=0,n=Object.defineProperty;return k=a.createObject(HTMLElement.prototype,{init:function(){this.baseClass="",this.componentId=0,this.template=null,this.componentId=++l},createdCallback:function(){if(n(this,"_attrChangeCalls",{value:{}}),this.init(),this.baseClass){var a=this.baseClass.split(" ").filter(Boolean);a.forEach(function(a){this.classList.add(a)},this)}this._setupEventAttrbutes(),this.render(),this._listenforReady(),this._rendered=!0,this._initBoundProperties()},_listenforReady:function(){var a="component-upgraded",b=j(this),c=b.reduce(function(a,b){return b._upgraded?a+1:a},0),d=b.length,e=function(b){b.stopPropagation(),++c===d&&(this.removeEventListener(a,e),this.ready())}.bind(this);d?this.addEventListener(a,e):this.ready()},ready:function(){this._upgraded=!0,this.emit("component-upgraded",{bubbles:!0})},attachedCallback:function(){},attributeChangedCallback:function(a,b,c){var d=this._attributes&&this._attributes[a.toLowerCase()];if(a=a.toLowerCase(),d){var e=this._attrChangeCalls;e[a]>0?e[a]--:this._attributeChanged(a,b,c)}},preRender:function(){},postRender:function(){},render:function(){var a;this._rendered||(this.preRender(),this.template&&(a=this.template(this),this.innerHTML=a.replace(/<[\/]{0,1}(template|TEMPLATE)[^><]*>/g,"")),this.postRender())},_initBoundProperties:function(){var a=this._attrChangeCalls;this._attributes&&Object.keys(this._attributes).forEach(function(b){a[b.toLowerCase()]=0,this._attributeChanged(b,null,this.getAttribute(b))},this)},setupProperties:function(a){var b=f(this,"_attributes"),g=f(this,"_properties");for(var j in a){var k,l,m,n,o=a[j];"function"==typeof o||c(o)?(k=o,o={}):k=o.type||null,k=d(k,j),n=o.change,m=o.attribute||j.toLowerCase(),l=o.default;var p=h(j,k,l);if(j in g)throw new Error("Property "+j+" already bound");if(m.toLowerCase()in b)throw new Error("Attribute "+m+" already bound");i(this,j,m,k,p),b[m.toLowerCase()]=g[j]={p:j,c:e(o.change,"change callback",j),g:p}}return this},_attributeChanged:function(a,b,c){var d,e=this._attributes&&this._attributes[a.toLowerCase()];if(e&&(d=e.c)){var f=e.g,g=f(c),h=f(b);"function"==typeof d?d.call(this,g,h):this[d](g,h)}},_setupEventAttrbutes:function(){for(var a=/^data-on-(.+)$/,b=this.attributes,c=0,d=b.length;c<d;c++){var e,f=b[c];if(e=a.exec(f.name)){var g=e[1],h=f.value,i=this[h];"function"==typeof i?this.on(g,i):console.warn(this.nodeName+': event handler "'+h+'" is not '+h?"a function":"defined")}}},on:function(a,b){return this.listenTo(this,a,b)},off:function(a,b){return this.stopListening(this,a,b)},emit:function(a,b){b=b||{};var c,d=!("bubbles"in b)||b.bubbles,e=!("cancelable"in b)||b.cancelable;c=this.ownerDocument.createEvent("HTMLEvents"),c.initEvent(a,d,e);for(var f in b)f in c||(c[f]=b[f]);return this.dispatchEvent(c)},listenTo:function(a,c,d,e){var f,g;if(d||"object"!=typeof c||(d=this),f=this._listeningTo||(this._listeningTo={}),g="l"+ ++m,f[g]={object:a,name:c,callback:d},a.addEventListener){var h=c.match(/(.*):(.*)/);h&&(c=h[2],h=h[1],d=b(h,d,a),f[g].callback=d,f[g].name=c),a.addEventListener(c,d,!!e)}else a.on&&a.on(c,d,this);return this},stopListening:function(a,b,c,d){var e,f,g=this._listeningTo,h={};if(!g)return this;if(!a||b||c)if(a&&b&&!c)for(f in g)g[f].object===a&&g[f].name===b&&(h[f]=g[f]);else if(a&&b&&c)for(f in g)g[f].object===a&&g[f].name===b&&g[f].callback===c&&(h[f]=g[f]);else a||b||c||(h=g);else for(f in g)g[f].object===a&&(h[f]=g[f]);for(f in h)e=h[f],e.object.removeEventListener?e.object.removeEventListener(e.name,e.callback,!!d):e.object.off&&e.object.off(e.name,e.callback,this),delete this._listeningTo[f];return this},setAttribute:function a(b,c){this._attrChangeCalls[(""+b).toLowerCase()]++;var d=this.getAttribute(b);a.superFunc.call(this,b,c);var e=this.getAttribute(b);d!==e&&this._attributeChanged(b,d,e)},removeAttribute:function a(b){if(this.hasAttribute(b)){this._attrChangeCalls[(""+b).toLowerCase()]++;var c=this.getAttribute(b);a.superFunc.call(this,b),null!==c&&this._attributeChanged(b,c,null)}}})}),define("hui/core/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SPACEBAR:32,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,MINUS:189,EQUALS:187,NUM_PAD_MINUS:109,NUM_PAD_PLUS:107,H:72,K:75,M:77,R:82,T:84,W:87,Y:89,isLetter:function(a){return a>64&&a<91},isNumber:function(a){return a>47&&a<58||a>95&&a<106},isSpecialChar:function(a){return a>106&&a<112||a>185&&a<223}}}),define("hui/core/a11y",["./keys"],function(a){function b(a){a.stopPropagation(),a.preventDefault()}function c(a,b){a.shiftKey&&b.focus()}function d(a,b){a.shiftKey||b.focus()}function e(a){return a.hasAttribute("tabIndex")?+a.getAttribute("tabIndex"):h.indexOf(a.tagName)>-1?0:void 0}function f(a,b){var c,d;if(b){c=!1;do c="none"===a.style.display||"hidden"===a.style.visibility||a.classList.contains("hidden"),a=a.parentElement;while(a&&a!==b&&!c);return c}return d=window.getComputedStyle(a),d.display&&"none"===d.display||d.visibility&&"hidden"===d.visibility}var g,h=["INPUT","SELECT","BUTTON","TEXTAREA","A","AREA","OBJECT"];return g={getBoundariesTabableElement:function(a,b,c){var d,e,f={},g=0,h=a.querySelectorAll("*");for(f.first=null,g;null===f.first&&g<h.length;++g)d=h[g],c&&(e=window.getComputedStyle(d)),d&&this.isTabNavigable(d,a)&&(!c||"none"!==e.display&&"hidden"!==e.visibility)&&(f.first=d);if(f.last=null,b)for(g=h.length-1;null===f.last&&g>0;--g)d=h[g],c&&(e=window.getComputedStyle(d)),h[g]&&this.isTabNavigable(h[g],a)&&(!c||"none"!==e.display&&"hidden"!==e.visibility)&&(f.last=d);return f},_getFirstTabable:function(a){var b,c,d=a.querySelectorAll("*");for(b=null,c=0;c<d.length;++c)if(this.isTabNavigable(d[c])){b=d[c];break}return b},_getFirstFocusable:function(a){var b,c,d=a.querySelectorAll("*");for(b=null,c=0;c<d.length;++c)if(this.isFocusable(d[c])){b=d[c];break}return b},isTabNavigable:function(a,b){return!a.disabled&&!f(a,b)&&e(a)>=0},isFocusable:function(a){return!a.disabled&&!f(a)&&e(a)>=-1},keepFocusInsideListener:function(e,f){var g,h;e.keyCode===a.TAB&&(g=this.getBoundariesTabableElement(f,!0),h=e.target,g.first&&g.last?e.shiftKey?h===g.first?(b(e),c(e,f)):h===f&&(b(e),g.last.focus()):h===g.last&&(b(e),d(e,f)):(b(e),d(e,f)))},setFocusOnFirst:function(a){var b=this.getBoundariesTabableElement(a);if(b.first)return b.first.focus(),b.first},setFocusOnAnyFirst:function(a){var b;return b=this._getFirstTabable(a)||this._getFirstFocusable(a),b&&b.focus(),b},setFocusOnPreviousElement:function(a){for(var b=a.parentElement,c=a.previousElementSibling;c;){if(this.isFocusable(c)&&!f(c))return void c.focus();c=c.previousElementSibling}return this.isFocusable(b)?void b.focus():(b.classList.add("hidden-focus-style"),b.setAttribute("tabindex",-1),b.focus(),void 0)},addA11yFocus:function(a){a._mouseActive=!1,a.classList.add("ha-a11y-focus"),a.listenTo(a,"mousedown",function(){a._mouseActive=!0,setTimeout(function(){a._mouseActive=!1},150)}),a.listenTo(a,"focus",function(){a._mouseActive||a.classList.add("ha-a11y-focused")},!0),a.listenTo(a,"blur",function(){a.classList.remove("ha-a11y-focused")},!0)},hideChildElementsFromAria:function(a,b){var c,d=!1,e=[],f="aria-hidden";return b=b||[],Array.prototype.slice.call(a.children,0).forEach(function(a){for(d=!1,c=0;c<b.length;c++)if(b[c]===a){d=!0;break}d||(e.push({element:a,oldValue:a.getAttribute(f)}),a.setAttribute(f,!0))}),b.forEach(function(a){a&&(e.push({element:a,oldValue:a.getAttribute(f)}),a.removeAttribute("aria-hidden"))}),{remove:function(){e.forEach(function(a){a.oldValue?a.element.setAttribute(f,a.oldValue):a.element.removeAttribute(f)})}}}}}),define("hui/segmented-button",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/utils","./core/a11y","./core/keys"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c,e=b.keyCode;e===f.LEFT?c=d.getPrevSiblingOfType(b.target,"BUTTON"):e===f.RIGHT&&(c=d.getNextSiblingOfType(b.target,"BUTTON")),c&&(c.focus(),a.selectedItem=c)}function h(a){a.stopPropagation();var b=d.getComponentFromElement(a.target,"HA-SEGMENTED-BUTTON");b.selectedItem=a.target,b.emit("click")}function i(a){var b=a.buttons,c=0;for(c;c<b.length;c++)b[c].setAttribute("aria-pressed",!1)}var j=c.createObject(b,{set buttons(a){var b,c,d=[].slice.call(this.querySelectorAll("button"));d.forEach(function(a){this.stopListening(a,"click",h),this.removeChild(a)}.bind(this)),c=[].slice.call(a),c.forEach(function(a){var c=a.label||a.getAttribute("label");a.classList.add("ha-button"),a.disabled=a.disabled||a.getAttribute("disabled"),c&&console.warn("Label property is deprecated. Should use textContent instead."),!a.textContent&&c&&(a.textContent=c),(a.getAttribute("selected")||a.selected)&&(b=a),a.setAttribute("aria-pressed",!1),this.listenTo(a,"click",h),this._buttons.push(a),this.appendChild(a)}.bind(this)),b?this.selectedIndex=[].indexOf.call(this.buttons,b):this._buttons.length>0&&(this.selectedIndex=0)},set selectedItem(a){this._selectedItem=a,this.value!==a.value&&(this.value=a.value)},get buttons(){return this._buttons},get selectedItem(){return this._selectedItem},init:function a(){a.super(this),this.setupProperties({selectedIndex:{default:0,type:Number,change:function(a){var b=this.buttons[a];b&&(i(this),b.setAttribute("aria-pressed",!0),this.selectedItem!==b&&(this.selectedItem=b))}},value:{default:"",change:function(a){var b=[].slice.call(this.buttons);a&&(b.every(function(b,c){return b.value!==a||(this.selectedIndex=c,!1)}.bind(this)),this.emit("change"))}},name:{default:""}}),this.on("button:keydown",function(a){g(this,a)}.bind(this))},postRender:function a(){a.super(this);var b=this.querySelectorAll("button");this._buttons=[],this.buttons=b,
e.addA11yFocus(this)}});return a("ha-segmented-button",j)}),define("hui/core/deviceUtils",["./utils","ua-parser"],function(a,b){if("undefined"==typeof document)return{normalize:function(){},load:function(){arguments[2]()}};var c,d,e,f={pc:"pc",tablet:"tablet",mobile:"mobile"},g=[],h={portrait:"portrait",landscape:"landscape"},i=function(){var a;for(a=g.length-1;a>=0;a--)g[a].remove&&g.splice(a,1)},j=a.debounce(i,250,!1),k=function(){e=d,d={},d.hasTouch="ontouchstart"in document.documentElement||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,d.orientation=window.matchMedia("(orientation: landscape)").matches?h.landscape:h.portrait,d.width=window.screen.width,d.height=window.screen.height;var a=c._uaParser().device;d.deviceType=a.type||"pc",d.isDesktop="pc"===d.deviceType,i(),g.forEach(function(a){a.listener===a.callback?a.callback(d,e):"string"==typeof a.callback?a.listener[a.callback](d,e):a.callback.bind(a.listener)(d,e)})};return c={_uaParser:b,deviceTypes:f,isDesktop:function(){return d.deviceType===f.pc},isHandheld:function(){return d.deviceType===f.mobile||d.deviceType===f.tablet},isMobile:function(){return d.deviceType===f.mobile},isTablet:function(){return d.deviceType===f.tablet},getScreenParameters:function(){return d},hasTouch:function(){return d.hasTouch}},k(),k=a.debounce(k,250,!1),c.normalize=function(a,b){var d=a.match(/[\?:]|[^:\?]*/g),e=0,f=function(a){var b=d[e++];return":"===b?0:"?"===d[e++]?!a&&c[b]()?f():(f(!0),f(a)):b||0};return a=f(),a&&b(a)},c.load=function(a,b,c){a?b([a],c):c()},document.body.classList.add(c.isDesktop()?"desktop":"handheld"),c.isHandheld()&&(c.getScreenParameters().deviceType===f.mobile?document.body.classList.add("mobile"):document.body.classList.add("tablet")),c.registerCallback=function(a,b){return b||(b=a),g.push({listener:b,callback:a}),{remove:function(){var a;for(a=g.length-1;a>=0;a--)g[a].listener===b&&(g[a].remove=!0,j())}}},c.registerCallback=function(a,b){return b||(b=a),g.push({listener:b,callback:a}),{remove:function(){var a;for(a=g.length-1;a>=0;a--)g[a].listener===b&&(g[a].remove=!0,j())}}},window.addEventListener("orientationChange",k),window.addEventListener("resize",k),c}),define("hui/radio-button",["register-component/v2/register","register-component/v2/UIComponent","./core/a11y","./core/deviceUtils","object-utils/classes"],function(a,b,c,d,e){"use strict";var f=e.createObject(b,{init:function a(){a.super(this),this.setupProperties({label:{default:"",change:function(a){var b=this._nodes.label;b.textContent=a,a||this.removeAttribute("label")}},value:{default:"",change:function(a){this._nodes.input.value=a}},disabled:{default:!1,type:Boolean,change:function(a){this._nodes.input.disabled=a}},checked:{default:!1,type:Boolean,change:function(a){this._nodes.input.checked!==a&&(this._nodes.input.checked=a)}},name:{default:"",change:function(a){this._nodes.input.name=a}}})},postRender:function a(){a.super(this),this._nodes={};var b=this.querySelector("input"),e=this.querySelector("label");d.isHandheld()&&this.classList.add("mobile-radio"),b||(b=this.ownerDocument.createElement("input"),b.type="radio",this.appendChild(b)),b.id="ha-radio-button-"+this.componentId,this._nodes.input=b,e||(e=this.ownerDocument.createElement("label"),this.appendChild(e)),e.htmlFor=this._nodes.input.id,this._nodes.label=e,this.listenTo(b,"click",function(a){a.stopPropagation(),this.checked=a.target.checked,this.emit("click")}.bind(this)),this.listenTo(b,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this)),this.listenTo(e,"click",function(a){a.stopPropagation()}),c.addA11yFocus(this)}});return a("ha-radio-button",f)}),define("hui/validatable/base-validator",["object-utils/classes","register-component/v2/UIComponent"],function(a,b){"use strict";var c=a.createObject(b,{init:function(a,b){this.options=b,this.validationType=a,this.element=b.element,this.onInit()},test:function(){return!1},onInit:function(){},getValue:function(){return this.element.value},matchToValue:function(a){var b=new RegExp(a);return b.test(this.getValue())}});return c}),define("hui/validatable/validators/required",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){var a=this.getValue();return Array.isArray(a)?a.length>0:!!a}});return c}),define("hui/validatable/validators/numeric",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return this.matchToValue("^[0-9]+$")}});return c}),define("hui/validatable/validators/pattern",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return this.matchToValue(this.options.pattern)}});return c}),define("hui/validatable/validators/function",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(a){return this.options.validatorFunc(a)}});return c}),define("hui/validatable/validators/min",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return parseFloat(this.getValue())>=this.options.minVal}});return c}),define("hui/validatable/validators/max",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return parseFloat(this.getValue())<=this.options.maxVal}});return c}),define("hui/validatable/validators/minDate",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return new Date(this.getValue())>=new Date(this.options.minDate)}});return c}),define("hui/validatable/validators/maxDate",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){var a=new Date(this.options.maxDate);return new Date(this.getValue())<new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}});return c}),define("hui/validatable/validators/expected",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return this.getValue()===this.options.expectedValue}});return c}),define("hui/validatable/validators/min-required",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return this.element.value.length>=this.options.minRequired}});return c}),define("hui/validatable/validators/minlength",["../base-validator","object-utils/classes"],function(a,b){"use strict";var c=b.createObject(a,{test:function(){return this.getValue().length>=this.options.minLength}});return c}),define("hui/validatable/validators",["./validators/required","./validators/numeric","./validators/pattern","./validators/function","./validators/min","./validators/max","./validators/minDate","./validators/maxDate","./validators/expected","./validators/min-required","./validators/minlength"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={required:a,numeric:b,pattern:c,validator:d,min:e,max:f,minDate:g,maxDate:h,expected:i,minRequired:j,minLength:k};return{create:function(a,b){var c=l[a];return c.init(a,b),c}}}),define("hui/core/ellipsis",[],function(){"use strict";function a(a){return Boolean(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function b(a,b){function c(){d=requestAnimationFrame(c);var f=(new Date).getTime(),g=f-e;g>=b&&(a.call(),e=(new Date).getTime())}var d,e=(new Date).getTime();return d=requestAnimationFrame(c),{cancel:function(){return cancelAnimationFrame(d)}}}function c(a){var b,c,d=window.getComputedStyle(a),e=d.display;return"inline"===e?a.getClientRects().length:(b=+d.height.slice(0,-2),c=+d.lineHeight.slice(0,-2)||1.2*+d.fontSize.slice(0,-2),Math.round(b/c))}function d(a,b){return c(a)>b.lines}function e(a,b){for(;b.lastCharacter.indexOf(a.slice(-1))>-1;)a=a.slice(0,-1);return a+=b.ellipsis}function f(a,b,c){var f,g=a.nodeValue,h=g.indexOf(" ")!==-1?" ":"　",i=g.split(h),j=-1,k=-1,l=0,m=i.length-1;for(c.fallbackToLetter&&0===l&&0===m&&(h="",i=g.split(h),m=i.length-1);l<=m&&(0!==l||0!==m)&&(f=Math.floor((l+m)/2),f!==k);)k=f,a.nodeValue=i.slice(0,k+1).join(h)+c.ellipsis,Array.prototype.forEach.call(b.childNodes,function(a){if(3!==a.nodeType){var b=a.style.display;a.style.display="none",a.style.display=b}}),d(b,c)?m=k:(j=k,l=k);return j===-1||1===i.length&&0===i[0].length||(g=e(i.slice(0,j+1).join(h),c),a.nodeValue=g),!0}function g(a,b,c){var e=!1,h=Array.prototype.slice.call(a.cloneNode(!0).childNodes);return b||(b=a),a.innerHTML="",h.forEach(function(h){if(h.tagName&&"script"===h.tagName.toLowerCase())a.appendChild(h);else{if(e)return!0;a.appendChild(h),d(b,c)&&(e=3===h.nodeType?f(h,b,c):g(h,b,c))}}),e}function h(a,b){var c;for(c in a)b.hasOwnProperty(c)&&(b[c]=a[c]);return b}function i(c,e){function f(){c.setAttribute("ha-ellipsis",!0),c.setAttribute("ha-ellipsis-style",c.getAttribute("style")||""),c.style.wordWrap="break-word",c.style.whiteSpace="normal",d(c,n)&&(m=g(c,null,n)),o.isTruncated=m}var j=[];if(!c||0===c.length||!e||0===e.length)return!1;if(c.length>1)return Array.prototype.forEach.call(c,function(a,b){j[b]=i(a,e)}),j;var k,l=Array.prototype.slice.call(c.childNodes),m=!1,n=h(e,{ellipsis:"... ",fallbackToLetter:!0,lastCharacter:[" ","　",",",";","!","?"],lines:0,inPageOffset:100}),o={revert:function(){c.innerHTML="",k&&(k.cancel(),k=null),l.forEach(function(a){try{c.appendChild(a)}catch(a){c.appendChild(document.createTextNode(""))}}),c.setAttribute("style",c.getAttribute("ha-ellipsis-style")||""),c.removeAttribute("ha-ellipsis")},originalContent:l,isTruncated:!1};return c.hasAttribute("ha-ellipsis")&&o.revert(),a(c)?f():k=b(function(){a(c)&&(k.cancel(),k=null,f())},n.inPageOffset),o}return i.getLines=c,i}),define("hui/tooltip",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/popup","./core/tooltip","./core/utils","./core/a11y","./core/deviceUtils","./core/ellipsis"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){for(var b=a.target;"HA-TOOLTIP"!==b.tagName;)b=b.parentElement;b.emit("dismiss"),b.close()}function k(a){var b=a.target;setTimeout(b._hideCallback,b.duration)}function l(a,b){var c,d,e,g=!1,i=a.querySelector(".tooltip-inner");if(b&&(g=b.tooltipMessage||b.getAttribute("tooltipMessage")),e=g?g:a.message){for("string"==typeof e?e=[a.ownerDocument.createTextNode(e)]:e instanceof HTMLElement&&(e=[e]),c=i.childNodes.length,d=0;d<c;d++)i.removeChild(i.childNodes[0]);i.innerHTML="",f.appendChildCollection(i,e)}if(h.isHandheld()&&h.getScreenParameters().deviceType===h.deviceTypes.mobile){var j=a.ownerDocument.createTextNode(i.textContent);i.innerHTML="",i.appendChild(j)}}function m(a,b){var c=["input","select","textarea"],d=b.querySelector(c.join(","));return d?d:b}function n(a,b){a.id||(a.id="ha-tooltip-"+a.componentId);var c=m(a,b);c!==b?c.setAttribute("aria-describedby",a.id):b._inputElement?b._inputElement.setAttribute("aria-describedby",a.id):b.setAttribute("aria-describedby",a.id)}var o,p=null;return o=a.createObject(b,{init:function a(){a.super(this),this._listenersTargets=[],this._message="",this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this.setAttribute("role","tooltip"),this.setupProperties({_alignment:{default:"left"},targetSelector:{default:"_previousSibling",change:function(a){e.removeOldListeners(this),e.setTooltipTargets(this,a),e.resetListeners(this,this.trigger)}},position:{default:"top bottom"},dismissible:{type:Boolean,default:!1,change:function(a){a?(this.classList.add("dismissible"),this.on("button:click",j)):(this.classList.remove("dismissible"),this.off("button:click",j)),e.resetTooltipDismissal(this)}},trigger:{default:"hover",change:function(a){e.resetListeners(this,a)}},duration:{default:0,change:function(a){a>0?this.on("show",k):this.off("show",k),e.resetTooltipDismissal(this)}}})},createdCallback:function a(){var b;a.super(this),b=f.getAnimationEventNames(),this.on(b.animationend,function(a){var b=a.target;switch(a.animationName){case"ha-fade-in":b.classList.remove("enter"),b.emit("show");break;case"ha-fade-out":b.classList.remove("leave"),b.classList.remove("visible"),b.emit("close"),d.clearPosition(b)}})},attachedCallback:function(){this._attached||(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger),l(this,this._listenersTargets[0]))},postRender:function a(){var b,c,d,e,h;a.super(this),g.addA11yFocus(this),this.hasAttribute("message")?d=this.getAttribute("message"):(e=this.querySelector(".tooltip-inner"),d=e?f.removeNodesSafe(e,e.childNodes):f.removeNodesSafe(this,this.children)),b=this.querySelector("div.tooltip-container"),c=this.querySelector("div.tooltip-inner"),h=this.querySelector("button.btn-container"),this.style.minWidth="1px",b||(b=this.ownerDocument.createElement("div"),b.className="tooltip-container",h=this.ownerDocument.createElement("button"),h.className="hi hi-close btn-icon-only",h.setAttribute("aria-label","Close"),b.appendChild(h),c=this.ownerDocument.createElement("div"),c.className="tooltip-inner",b.appendChild(c),this.appendChild(b)),this.message=d},get message(){return this._message},set message(a){this._message=a,l(this)},show:function(a){var b,c,e,f,g,j,k=17,o=this.classList.contains("visible"),q=a?a.currentTarget:null,r=[],s={};if(q||(q=this._listenersTargets[0]),q){if(n(this,q),e=m(this,q),l(this,q),!p||q!==p)for(p=q,r=this.ownerDocument.querySelectorAll("ha-tooltip.visible"),j=0;j<r.length;j++)b=r[j],b.close();if(h.isHandheld()?(g=["left"],f=h.getScreenParameters().deviceType===h.deviceTypes.tablet?["bottom","top"]:["top","bottom"]):(f=this.position.split(" "),g=this._alignment.split(" ")),o&&this.classList.contains("leave")&&(this.classList.remove("leave"),d.clearPosition(this)),h.isHandheld()&&h.getScreenParameters().deviceType===h.deviceTypes.mobile&&(this.ellipsed=i(this.querySelector(".tooltip-inner"),{lines:1})),c=this.className.indexOf("position-")>-1,!c){if(!d.setPosition(this,e,f,g,k,s))return;this._resizeMethod=d.installResizeMethod(this,e,f,g,k,s)}o||this.classList.add("visible")}},hide:function(){this.close(),console.warn('DEPRECATION WARNING: This method is deprecated, use "close" method instead')},close:function(){this._timed&&(clearTimeout(this._timed),delete this._timed),this.classList.contains("visible")&&(this.classList.add("leave"),p=null,this._resizeMethod&&(d.uninstallResizeMethod(this._resizeMethod),this._resizeMethod=null))}}),c("ha-tooltip",o)}),define("hui/validatable/validatable",["object-utils/classes","register-component/v2/UIComponent","./validators","../core/popup","../core/deviceUtils","../tooltip"],function(a,b,c,d,e){"use strict";function f(a){var b={};return a.every(function(a){return b={isValid:a.test(a.element),message:a.options.errorMessage,type:a.validationType},b.isValid}),b}function g(a){var b,d,e,f,g=a.validationTarget,h={required:{errorMessage:a.requiredMessage},pattern:{pattern:a.pattern},validator:{validatorFunc:a.validator},min:{minVal:a.min},max:{maxVal:a.max},minDate:{minDate:a.minDate},maxDate:{maxDate:a.maxDate},numeric:{numeric:a.numeric},expected:{expectedValue:a.expected},minRequired:{minRequired:a.minRequired},minLength:{minLength:a.minLength}};a._validators=[];for(e in h)if(d={element:g,errorMessage:a.invalidMessage},f=h[e],a[e]){for(b in f)d[b]=f[b];a._validators.push(c.create(e,d))}}function h(a,b){b?j(a):a.tooltip&&(e.isDesktop()?a.tooltip.close():a.tooltip.parentElement&&(a.tooltip.parentElement.removeChild(a.tooltip),a.tooltip=null))}function i(a,b){var c,d=a.querySelector(".hi-circle-alert"),e=a.querySelector("legend")||a.querySelector("label"),f=a.querySelectorAll(a.highlightElementSelector);b?(a.classList.remove("input-error"),d&&d.classList.add("hide")):(a.classList.add("input-error"),d?d.classList.remove("hide"):e&&(c=e.parentElement,d=document.createElement("span"),d.className="hi hi-circle-alert",d.setAttribute("aria-hidden",!0),c.insertBefore(d,e))),Array.prototype.forEach.call(f,function(a){b?(a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby")):a.setAttribute("aria-invalid",!0)})}function j(a){var b,c,f,g=a.querySelector("legend")||a.querySelector("label"),h=["top","bottom"],i=["left","right"],j=a.validationTarget,k=a.querySelectorAll(a.highlightElementSelector),l=0,m=g?-5:10,n={},o=a.tooltip||a.querySelector("span.input-error-message");a._validationInfo&&(b="name-error-"+a.componentId,e.isHandheld()?(o||(o=document.createElement("span"),o.classList.add("input-error-message"),o.setAttribute("role","alert")),o.setAttribute("id",b),o.textContent=a._validationInfo.message,a.appendChild(o)):(o||(o=document.createElement("ha-tooltip"),j.id&&(o.targetSelector="#"+j.id),o.trigger="custom",o.position="top",o.setAttribute("role","alert")),o.message=a._validationInfo.message,f=o.querySelector(".tooltip-inner"),f.id=b,o.classList.contains("visible")&&o.classList.contains("leave")?o.classList.remove("leave"):(n.left=function(a,b,c,d){function e(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:Math.max(c.scrollHeight,b.scrollHeight,c.offsetHeight,b.offsetHeight,c.clientHeight,b.clientHeight)}}var f,g,h=e(this.ownerDocument).width-a.left;"top"===d.position?(g=b.width+l,f=l):(g=b.width,f=0),g<h&&(d.alignment="left",c.x=a.left+f)},d.show(o,j,h,i,m,n),o._resizeMethod=d.installResizeMethod(o,j,h,i,m,n))),Array.prototype.forEach.call(k,function(a){a.setAttribute("aria-describedby",b)}),a.label&&(c=a.querySelector("legend")||a.querySelector("label"),l=c.offsetWidth+17),a.tooltip=o)}var k=a.createObject(b,{init:function a(){a.super(this),this._validators=null,this._validationInfo=null,this.required=!1,this.validator=null,this.min=null,this.max=null,this.highlightElementSelector=null,this.validationTarget=null,this.setupProperties({requiredMessage:{default:"Required Message",type:String,change:function(a){var b;Array.isArray(this._validators)&&this._validators.length>0&&(b=this._validators.filter(function(a){return"required"===a.validationType}),b&&b[0]&&(b[0].options.errorMessage=a,this._validationInfo&&"required"===this._validationInfo.type&&(this._validationInfo.message=a)))}},invalidMessage:{default:"Invalid Value",type:String,change:function(a){Array.isArray(this._validators)&&this._validators.length>0&&(this._validators.forEach(function(b){"required"!==b.validationType&&(b.options.errorMessage=a)}),this._validationInfo&&"required"!==this._validationInfo.type&&(this._validationInfo.message=a))}}})},showValidationMessage:function(){console.warn('DEPRECATION WARNING: The "showValidationMessage" event is going to be deprecated. From now on, please use "reportValidity" method instead.'),j(this)},checkValidity:function(a){return g(this),0===this._validators.length||a||0===this.value.length&&!this.required?(this._validationInfo=null,!0):(this._validationInfo=f(this._validators),this._validationInfo.isValid)},handleTooltipBinding:function(a){a?(this.listenTo(this.validationTarget,"mouseenter",this.reportValidity),this.listenTo(this.validationTarget,"mouseleave",this.reportValidity),this.listenTo(this.validationTarget,"blur",this.reportValidity,!0)):(this.stopListening(this.validationTarget,"mouseenter",this.reportValidity),this.stopListening(this.validationTarget,"mouseleave",this.reportValidity),this.stopListening(this.validationTarget,"blur",this.reportValidity,!0),this.reportValidity())},reportValidity:function(a,b){var c,d=this._validationInfo&&this._validationInfo.isValid,f=e.isHandheld(),g=this.ownerDocument.activeElement;if(!a)return d=this.checkValidity(b),i(this,d),h(this,!d),d;switch(a.type){case"focus":case"mouseenter":case"mouseover":f||h(this,!d);break;case"mouseout":g!==a.target&&e.isDesktop()&&h(this,!1);break;case"mouseleave":!a.target.contains(g)&&e.isDesktop()&&h(this,!1);break;case"blur":case"hide":d=this.checkValidity(),i(this,d),h(this,f&&!d);break;case"keyup":d||!this._validationInfo||this._validationInfo.isValid!==!1?d=!0:(d=this.checkValidity(),d&&(i(this,d),c=!d,h(this,c)))}return d},resetValidation:function(){this.reportValidity(null,!0)}});return k}),define("hui/core/domObserver",[],function(){function a(a){a.disconnect()}function b(a,b,c){a.observe(b,c)}function c(c,d,e,f){var g=new MutationObserver(function(h){var i,j=!1;for(i=0;i<h.length;i++)if(e(h[i])){j=!0;break}j&&(a(g),f(h),b(g,c,d))});return g.observe(c,d),{remove:function(){g.disconnect()},pauses:0,pause:function(){this.pauses||a(g),this.pauses++},resume:function(){this.pauses=Math.max(0,this.pauses-1),this.pauses||b(g,c,d)}}}function d(a,b){return c(a,{childList:!0,characterData:!0,subtree:!0,attributes:!0},function(b){return!("attributes"===b.type&&b.target===a)},function(){b.call(a)})}function e(a,b,d){return c(a,{childList:!0,characterData:!1,subtree:!0,attributes:!0},function(c){var d;if("childList"===c.type&&c.target===a){if(c.addedNodes.length>0)for(d=0;d<c.addedNodes.length;d++)if(i(a,c.addedNodes[d],b))return!0;if(c.removedNodes.length>0)for(d=0;d<c.removedNodes.length;d++)if(i(a,c.removedNodes[d],b))return!0}else if("attributes"===c.type&&i(a,c.target,b))return!0;return!1},function(){var c=[];Array.prototype.slice.call(a.querySelectorAll(b),0).forEach(function(b){b.parentElement===a&&c.push(b)}),d.call(a,c)})}function f(a,b,c,e){var f=e();return b[c]!==f&&(b[c]=f),d(a,function(){b[c]=e()})}function g(a,b){if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(!a[c].isEqualNode(b[c]))return!0;return!1}function h(a,b,c,d){var f=[];return Array.prototype.slice.call(a.querySelectorAll(b),0).forEach(function(b){b.parentElement===a&&f.push(b)}),g(f,c[d])&&(c[d]=f),e(a,b,function(a){c[d]=a})}var i=function(){var a=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;return function(b,c,d){return(null===c.parentElement||c.parentElement===b)&&a.call(c,d)}}();return{observeContentChanges:d,observeElementChanges:e,bindContentChanges:f,bindChildrenChanges:h}}),define("hui/radio-button-group",["register-component/v2/register","./validatable/validatable","object-utils/classes","./core/utils","./core/domObserver","./radio-button"],function(a,b,c,d,e){"use strict";function f(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("legend");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function g(a){var b=a.querySelectorAll("ha-radio-button");Array.prototype.forEach.call(b,function(a){a.checked=!1})}function h(a){var b=d.getComponentFromElement(a.target,"HA-RADIO-BUTTON-GROUP");d.stopEvent(a),b.reportValidity(null,!0),b._selectedItem!==a.target&&(b.value=a.target.value),b.emit(a.type)}function i(a){return a.required||!!a.expected}var j=c.createObject(b,{init:function a(){a.super(this),this._label=null,this._selectedItem=null,this.validationTarget=this,this.highlightElementSelector='input[type="radio"]',this._radios=null,this._fieldset=null,this._legend=null,this.setupProperties({name:{default:"ha-radio-button-group-"+this.componentId,type:String,change:function(a){var b;b=a,this.radios&&this._upgraded&&this.radios.forEach(function(a){a.name?a.name=b:a.setAttribute("name",b)})}},expected:{type:String,default:"",change:function(a,b){a!==b&&this.handleTooltipBinding(i(this))}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&f(this)}},required:{type:Boolean,default:!1,change:function(a,b){a!==b&&(f(this),this.handleTooltipBinding(i(this)))}},value:{default:"",type:String,change:function(a){var b,c;if(a&&this._upgraded){var d=this.radios?this.radios.length:0;for(g(this,a),b=0;b<d;b++)if(c=this.radios[b],c.getAttribute("value")===a){this._selectedItem=c,this._selectedItem.checked=!0;break}}}}})},set radios(a){this._radiosHandle&&this._radiosHandle.pause();var b=this.querySelector("fieldset"),c=function(){this._radios=[],a=[].slice.call(a),Array.prototype.slice.call(b.querySelectorAll("ha-radio-button"),0).forEach(function(a){this.stopListening(a,"click",h),this.stopListening(a,"change",h),b.removeChild(a)}.bind(this)),a.forEach(function(a){this.listenTo(a,"click",h),this.listenTo(a,"change",h),a.setAttribute("name",this.name),b.appendChild(a),this._radios.push(a),(a.hasAttribute("checked")||a.checked)&&(this.value=a.getAttribute("value"))},this)}.bind(this);this._upgraded&&c(a),this._radiosHandle&&this._radiosHandle.resume()},get radios(){return this._radios},set label(a){var b,c=this.querySelector("fieldset"),d=this.querySelector("legend"),e=c.querySelector(".label-container"),g=c.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(c.removeChild(g),d=this.querySelector("legend")),d||(d=this.ownerDocument.createElement("legend")),e||(e=this.ownerDocument.createElement("div"),e.classList.add("label-container"),e.appendChild(d),c.insertBefore(e,c.firstChild)),d.htmlFor=c.id,f(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),e&&c.removeChild(e),d=this.ownerDocument.createElement("legend"),d.htmlFor=c.id,Array.isArray(a)?(g&&c.removeChild(g),[].forEach.call(a,function(a){d.appendChild(a)}),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)):g?(c.removeChild(g),d.innerHTML=a.innerHTML,g.innerHTML=d.outerHTML):(d.appendChild(a),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)),c.insertBefore(g,c.firstChild),f(this)),this.listenTo(d,"click",function(a){"legend"===a.target.localName&&a.stopPropagation()})):(this.stopListening(d,"click"),g?c.removeChild(g):e&&c.removeChild(e),this.hasAttribute("label")&&this.removeAttribute("label")),this._label=a},get label(){return this._label},set selectedItem(a){},get selectedItem(){return this._selectedItem},_setRadiosHandle:function(){this._radios&&!this._radiosHandle&&(this._radiosHandle=e.bindChildrenChanges(this.querySelector("fieldset"),"ha-radio-button",this,"radios"))},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},ready:function a(){a.super(this);var b=this.querySelector("fieldset"),c=this.querySelector("ha-label"),e=this.getAttribute("label"),f=this.getAttribute("value"),g=Array.prototype.slice.call(b?b.querySelectorAll("ha-radio-button"):this.querySelectorAll("ha-radio-button")),h=this.name,i=this.value;b?this.radios=g:(this.appendChild(this.ownerDocument.createElement("fieldset")),this.radios=d.removeNodesSafe(this,g)),f&&(this.value=f),c?c?this.label=c:f&&this.removeAttribute("label"):e&&(this.label=e),this.name="",this.value="",this.name=h,this.value=i,this.hasAttribute("label")&&(this.label=this.getAttribute("label"))},attachedCallback:function a(){this._setRadiosHandle(),a.super(this)},detachedCallback:function(){this._radiosHandle&&(this._radiosHandle.remove(),this._radiosHandle=null)}});return a("ha-radio-button-group",j)}),define("hui/switch-button",["register-component/v2/UIComponent","register-component/v2/register","./core/utils","object-utils/classes","./core/a11y"],function(a,b,c,d,e){function f(a,b,d,e){var f,g,h,i=d.firstChild.textContent.toUpperCase(),j=e.firstChild.textContent.toUpperCase();return h=parseInt(window.getComputedStyle(d).paddingLeft.replace("px",""),10)+parseInt(window.getComputedStyle(d).paddingRight.replace("px",""),10),g=window.getComputedStyle(d).fontSize+" "+window.getComputedStyle(d).fontFamily," "===g&&isNaN(h)||0===h?void(a._widthNotSet=!0):(f=Math.max(c.getTextWidth(i,g),c.getTextWidth(j,g))+1,void(b.style.width=f+h+"px"))}var g;return g=d.createObject(a,{init:function a(){a.super(this),this.setupProperties({value:{default:"on",change:function(a){this._nodes.input.value=a}},name:{default:"",change:function(a){this._nodes.input.name=a}},label:{default:"",change:function(a){var b=this.querySelector(".label-div"),c=this.querySelector("input"),d=this.querySelector("div:not(.label-div)");a?(b||(b=this.ownerDocument.createElement("div"),b.classList.add("label-div"),b.id="ha-switch-button-label-"+this.componentId,c.setAttribute("aria-describedby",b.id),this.insertBefore(b,d)),b.textContent=a):b&&(this.removeChild(b),c.removeAttribute("aria-describedby"))}},labelOff:{default:"OFF",change:function(a){this._nodes.labelOff.textContent=a,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff)}},labelOn:{default:"ON",change:function(a){this._nodes.labelOn.textContent=a,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff)}},checked:{type:Boolean,default:!1,change:function(a){this._nodes.input.checked=a,this._nodes.input.setAttribute("aria-checked",a)}}})},postRender:function a(){var b,d,f=this.querySelector("input"),g=this.querySelector(".is-switch-on"),h=this.querySelector(".is-switch-off"),i=this.querySelector("label"),j=this.ownerDocument;a.super(this),i?d=i.querySelector("i"):(d=j.createElement("i"),h=j.createElement("span"),h.classList.add("is-switch-off"),h.setAttribute("data-switch","OFF"),g=j.createElement("span"),g.classList.add("is-switch-on"),g.setAttribute("data-switch","ON"),i=j.createElement("label"),i.setAttribute("aria-live","assertive"),i.appendChild(g),i.appendChild(h),i.appendChild(d)),f||(f=j.createElement("input"),f.type="checkbox",f.appendChild(i),b=j.createElement("div"),b.appendChild(f),b.appendChild(i),this.appendChild(b)),i.htmlFor="ha-switch-button-"+this.componentId,f.id="ha-switch-button-"+this.componentId,h.textContent=this.labelOff,g.textContent=this.labelOn,this._nodes={input:f,label:i,labelOn:g,labelOff:h},c.stopNativeEvent(this,g,"click"),c.stopNativeEvent(this,h,"click"),c.stopNativeEvent(this,d,"click"),this.listenTo(f,"click",function(a){a.stopPropagation(),this.checked=a.target.checked,this.emit("click")}.bind(this)),this.listenTo(f,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this)),e.addA11yFocus(this,f,i)},attachedCallback:function a(){a.super(this),this._widthNotSet&&(this._widthNotSet=!1,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff))}}),b("ha-switch-button",g)}),define("hui/checkbox",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/a11y","./core/deviceUtils"],function(a,b,c,d,e){"use strict";var f=c.createObject(b,{init:function a(){a.super(this),this.setupProperties({name:{default:"",change:function(a){this._nodes.input.name=a}},disabled:{default:!1,type:Boolean,change:function(a){this._nodes.input.disabled=a}},checked:{default:!1,type:Boolean,change:function(a){this._nodes.input.checked!==a&&(this._nodes.input.checked=a),this.emit("change")}},value:{default:"on",change:function(a){this._nodes.input.value=a}},label:{default:"",change:function(a){var b=this._nodes.label;b.textContent=a,this.ariaLabel||(this.ariaLabel=b.textContent),a||this.removeAttribute("label")}},indeterminate:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("input");b.indeterminate=a}},ariaLabel:{default:"",change:function(a){var b=this.querySelector("input");a?b.setAttribute("aria-label",a):b.removeAttribute("aria-label")}}})},postRender:function a(){a.super(this),this._nodes={};var b,c,f=this.querySelector("input");e.isHandheld()&&this.classList.add("mobile-checkbox"),f||(f=this.ownerDocument.createElement("input"),f.type="checkbox",this.appendChild(f)),c="ha-checkbox-"+this.componentId,f.id=c,this._nodes.input=f,b=this.querySelector("label"),b||(b=this.ownerDocument.createElement("label"),this.appendChild(b)),b.htmlFor=c,this._nodes.label=b,this.ariaLabel||this.label&&(this.ariaLabel=this.label),this.listenTo(f,"click",function(a){a.stopImmediatePropagation(),this.checked=a.target.checked,this.emit("click")}.bind(this)),this.on("click",function(a){a.preventDefault()}),this.listenTo(f,"change",function(a){a.stopPropagation()}.bind(this)),this.listenTo(b,"click",function(a){
a.stopPropagation()}),this.listenTo(f,"blur",function(){this.emit("blur")}.bind(this)),this.listenTo(f,"focus",function(){this.emit("focus")}.bind(this)),d.addA11yFocus(this)}});return a("ha-checkbox",f)}),define("hui/checkbox-group",["register-component/v2/register","./validatable/validatable","object-utils/classes","./core/utils","./core/domObserver","./checkbox"],function(a,b,c,d,e){"use strict";function f(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("legend");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function g(a){var b=d.getComponentFromElement(a.target,"HA-CHECKBOX-GROUP");d.stopEvent(a),b.emit(a.type)}function h(a,b){var c=a._value.indexOf(b.value);b.checked&&!b.disabled?c===-1&&(a._value.push(b.value),a._selectedItems.push(b),a.reportValidity(!0)):a._value&&c!==-1&&(a._value.splice(c,1),a._selectedItems.splice(c,1)),a.reportValidity(null,!0)}function i(a){var b=d.getComponentFromElement(a.target,"HA-CHECKBOX-GROUP");d.stopEvent(a),h(b,a.target),b.emit(a.type)}var j=c.createObject(b,{init:function a(){a.super(this),this._label=null,this._selectedItems=[],this._value=[],this._checkboxes=[],this.validationTarget=this,this.highlightElementSelector='input[type="checkbox"]',this.setupProperties({name:{default:"ha-checkbox-group-"+this.componentId,type:String,change:function(a){this._checkboxes.length>0&&this._checkboxes.forEach(function(b){b.name?b.name=a:b.setAttribute("name",a)})}},minRequired:{default:0,type:Number,change:function(a,b){a!==b&&this.handleTooltipBinding(a||this.required)}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&f(this)}},required:{type:Boolean,default:!1,change:function(a,b){a!==b&&(f(this),this.handleTooltipBinding(a||this.minRequired))}}})},set value(a){this._value.length=0,this._selectedItems.length=0,a&&a.forEach(function(a){this._checkboxes.forEach(function(b){a===b.value?(this._selectedItems.push(b),this._value.push(a),b.checked=!0):this._value.indexOf(b.value)===-1&&(b.checked=!1)}.bind(this))}.bind(this))},get value(){return this._value},set checkboxes(a){var b=this.querySelector("fieldset");this._checkboxHandle&&this._checkboxHandle.pause(),this._checkboxes.length=0,Array.prototype.slice.call(b.querySelectorAll("ha-checkbox"),0).forEach(function(a){this.stopListening(a,"click",g),this.stopListening(a,"change",i),b.removeChild(a)}.bind(this)),a&&(a=[].slice.call(a),a.forEach(function(a){this.listenTo(a,"click",g),this.listenTo(a,"change",i),b.appendChild(a),this._checkboxes.push(a),h(this,a)},this)),this._checkboxHandle&&this._checkboxHandle.resume()},get checkboxes(){return this._checkboxes},set selectedItems(a){},get selectedItems(){return this._selectedItems},set label(a){var b,c=this.querySelector("fieldset"),d=this.querySelector("legend"),e=c.querySelector(".label-container"),g=c.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(c.removeChild(g),d=this.querySelector("legend")),d||(d=this.ownerDocument.createElement("legend")),e||(e=this.ownerDocument.createElement("div"),e.classList.add("label-container"),e.appendChild(d),c.insertBefore(e,c.firstChild)),d.htmlFor=c.id,f(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),e&&c.removeChild(e),d=this.ownerDocument.createElement("legend"),d.htmlFor=c.id,Array.isArray(a)?(g&&c.removeChild(g),[].forEach.call(a,function(a){d.appendChild(a)}),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)):g?(c.removeChild(g),d.innerHTML=a.innerHTML,g.innerHTML=d.outerHTML):(d.appendChild(a),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)),c.insertBefore(g,c.firstChild),f(this)),this.listenTo(d,"click",function(a){"legend"===a.target.localName&&a.stopPropagation()})):(this.stopListening(d,"click"),g?c.removeChild(g):e&&c.removeChild(e),this.hasAttribute("label")&&this.removeAttribute("label")),this._label=a},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},postRender:function a(){a.super(this);var b=this.querySelectorAll("ha-checkbox"),c=this.querySelector("fieldset"),e=this.querySelector("ha-label"),f=c||this;c||(c=this.ownerDocument.createElement("fieldset"),this.appendChild(c)),b.length>0&&(b=d.removeNodesSafe(f,b),this.checkboxes=b);var g=this.getAttribute("label");e?e?this.label=e:g&&this.removeAttribute("label"):g&&(this.label=g)},attachedCallback:function a(){this._checkboxHandle=e.bindChildrenChanges(this.querySelector("fieldset"),"ha-checkbox",this,"checkboxes"),a.super(this)},detachedCallback:function(){this._checkboxHandle&&(this._checkboxHandle.remove(),this._checkboxHandle=null)}});return a("ha-checkbox-group",j)}),define("hui/core/contentNode",[],function(){"use strict";function a(a,b,c,d){var e;d&&d.hasOwnProperty(c)?(e=d[c](a,b,c),a._cachedChildNodes[c]=e):a._cachedChildNodes[c]=b.parentElement.removeChild(b)}function b(b,c,d){var e;if(c&&b.childNodes&&b.childNodes.length){b._cachedChildNodes={};for(e in c)c.hasOwnProperty(e)&&b.querySelector(e)&&a(b,b.querySelector(e),e,d)}}function c(a,b){var c,d;if(a._cachedChildNodes){for(c in a._cachedChildNodes)a._cachedChildNodes.hasOwnProperty(c)&&(d=b[c],a[d]=[].slice.call(a._cachedChildNodes[c].childNodes));delete a._cachedChildNodes}}function d(a,b,c){var d,e,f;for(e in b)b[e]&&c.hasOwnProperty(e)&&(d=c[e],Array.isArray(b[e])?a[d]=b[e]:a[d]=[b[e]]);f="DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.",console.warn(f)}return{cacheInputContent:b,storeCachedInput:c,addContent:d}}),define("hui/drawer/DrawerBase",["../core/a11y","../core/keys","../core/utils","register-component/v2/UIComponent","object-utils/classes","../core/contentNode"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c=a.querySelector(".content h3");c&&(c.textContent=b)}function h(a,b){for(var c=a&&a.parentNode;c;){if(c===b)return!0;c=c.parentNode}return!1}var i=e.createObject(d,{init:function d(){d.super(this),this._lastFocus=null,this._open=!1,this.setupProperties({titleText:{default:"",change:function(a){g(this,a)}}}),this.on("show",function(b){if(("ha-drawer-large"===b.target.localName||"ha-drawer-small"===b.target.localName)&&this._open&&"show"===b.type){var c=this.querySelector(".content"),d=a.getBoundariesTabableElement(c).first;d&&d.focus(),c.scrollTop=0}}),this.on("keydown",function(d){b.ESCAPE===d.keyCode?(c.stopEvent(d),this.emit("dismiss"),this.close()):a.keepFocusInsideListener(d,this)}),this.listenTo(window,"resize",function(){this._open&&"INPUT"===this.ownerDocument.activeElement.tagName&&h(this.ownerDocument.activeElement,this)&&setTimeout(function(){this.ownerDocument.activeElement&&this.ownerDocument.activeElement.scrollIntoViewIfNeeded&&this.ownerDocument.activeElement.scrollIntoViewIfNeeded()}.bind(this),0)}.bind(this))},hide:function(){console.warn('DEPRECATION WARNING: The "hide" method is going to be deprecated. From now on, please use the "close" method instead.'),this.close()},postRender:function b(){b.super(this),a.addA11yFocus(this),this.tabIndex=-1,this.role="dialog"},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')},addContent:function(a){var b={section:"section",main:"section",footer:"footer"};f.addContent(this,a,b)}});return i}),define("hui/core/underlay",["./a11y","./position"],function(a,b){"use strict";var c,d,e=[];return d={show:function(d){var f=document.body,g=f.querySelector(".ha-underlay");return g?e.push(g.style.zIndex):(g=document.createElement("div"),g.classList.add("ha-underlay"),g.tabIndex=-1,f.appendChild(g),c=function(){a.setFocusOnFirst(this)}.bind(d),g.addEventListener("focus",c)),b.bringToFront(g),this._hiddenAriaRemoveHandle=a.hideChildElementsFromAria(document.body,[d]),g},hide:function(){var a="webkitAnimationName"in document.documentElement.style?"webkitAnimationEnd":"animationend",b=document.body,d=b.querySelector(".ha-underlay");d&&!d.classList.contains("fade-out")&&(this._hiddenAriaRemoveHandle&&(this._hiddenAriaRemoveHandle.remove(),this._hiddenAriaRemoveHandle=null),e.length?d.style.zIndex=e.pop():(b.addEventListener(a,function e(){b.removeEventListener(a,e),d.removeEventListener("focus",c),c=null,b.removeChild(d)}),d.classList.add("fade-out")))},setZIndex:function(a){var b=document.body.querySelector(".ha-underlay");b&&(b.style.zIndex=a)}}}),define("hui/drawer-large",["register-component/v2/register","./drawer/DrawerBase","./core/position","./core/underlay","object-utils/classes","./core/utils"],function(a,b,c,d,e,f){"use strict";var g,h=f.createElement,i=function(a){return a.querySelector("aside > footer > *")},j=function(a){return a.querySelector("aside > section > div.inner-content > *")},k=function(a){var b=a.querySelector("main"),c="DEPRECATION WARNING: <main> tags should not be used anymore to add content to <ha-drawer-large>. Please add content through a <section> tag.";return b&&console.warn(c),b},l=function(a){return a.querySelector("section")},m=function(a){return a.querySelector("footer")},n=function(){var a=h("button",{className:"drawer-close first-focus"},[h("span",{className:"hi hi-close"})]);return a.setAttribute("aria-label","close"),a},o=function(a,b,c){var d=h("aside",{className:"drawer-panel"},[p(),q(a,b),r(c)]);return d.setAttribute("aria-labelledby","drawer-large-title-"+b),d.setAttribute("tabindex","-1"),d},p=function(){return h("header",{className:"header"},[n()])},q=function(a,b){var c=h("section",{className:"content"},[h("h3",{id:"drawer-large-title-"+b}),h("div",{className:"inner-content"},[a])]);return c.setAttribute("tabindex","-1"),c},r=function(a){var b=h("footer",{className:"footer"},[a]);return b.setAttribute("tabindex","-1"),b};return g=e.createObject(b,{init:function a(){a.super(this);var b=f.getAnimationEventNames();this.setupProperties({backdrop:{default:!1,type:Boolean},reactLayering:{type:Boolean,default:!1},overlay:{default:!1,type:Boolean,change:function(a,b){a!==b&&(this.backdrop=a,console.warn('DEPRECATION WARNING: The "overlay" property is going to be deprecated. From now on, please use the "backdrop" property instead.'))}}}),this.on("button.drawer-close:click",function(){this.emit("dismiss"),this.close()}.bind(this)),this.on(b.animationend,function(a){"ha-drawer-slide-out"===a.animationName&&this.classList.remove("show")}.bind(this))},get footer(){return f.arrayOfChildrenFrom(i(this))},set footer(a){f.replaceChildrenOf(this.querySelector("aside > footer"),f.wrapIfNotWrapped("footer",a))},get section(){return f.arrayOfChildrenFrom(j(this))},set section(a){f.replaceChildrenOf(this.querySelector("aside > section > div.inner-content"),f.wrapIfNotWrapped("section",a))},detachedCallback:function(){this.backdrop&&this.parentElement&&this.parentElement!==this.ownerDocument.body&&(d.hide(),setTimeout(function(){this.ownerDocument.documentElement.style.overflow="auto",this.ownerDocument.body.classList.remove("overflow-hidden")}.bind(this),350))},show:function(){this._open||(this._open=!0,this.classList.add("show"),this.classList.remove("slide-out"),this.classList.add("slide-in"),this.backdrop&&(this.reactLayering||d.show(this),this.ownerDocument.body.classList.add("overflow-hidden"),this.ownerDocument.documentElement.style.overflow="hidden"),this.reactLayering||c.bringToFront(this),this._lastFocus=this.ownerDocument.activeElement,this.emit("show"))},close:function(){this._open&&(this._open=!1,this.classList.remove("slide-in"),this.classList.add("slide-out"),this.backdrop&&(this.reactLayering||d.hide(),setTimeout(function(){this.ownerDocument.documentElement.style.overflow="auto",this.ownerDocument.body.classList.remove("overflow-hidden")}.bind(this),350)),this._lastFocus&&this._lastFocus.focus(),this._lastFocus=null,this.emit("close"),this.emit("hide"))},postRender:function a(){a.super(this);var b=j(this)||k(this)||l(this),c=i(this)||m(this);f.removeAllChildrenFrom(this),this.appendChild(o(b,this.componentId,c))}}),a("ha-drawer-large",g)}),define("hui/drawer-small",["register-component/v2/register","./drawer/DrawerBase","object-utils/classes","./core/utils"],function(a,b,c,d){"use strict";function e(a){var b=a.ownerDocument,c=Math.max(b.body.scrollHeight,b.documentElement.scrollHeight,b.body.offsetHeight,b.documentElement.offsetHeight,b.body.clientHeight,b.documentElement.clientHeight),d=c-a.offsetTop+"px";a.querySelector(".content").style.height=d}function f(){this._open?this.close():this.show()}function g(a,b,c){var d,e,f=a.parentElement;f&&(d=void 0!==c&&""!==c?f.querySelector(".ha-flex-flexible"):a.previousElementSibling,d&&d.classList.remove("ha-flex-flexible")),e=b?a.ownerDocument.querySelector(b)||a.previousElementSibling:a.previousElementSibling,e&&e.classList.add("ha-flex-flexible")}function h(a){return a.querySelector("section > div.inner-content > *")}function i(a){return a.querySelector("section")}function j(){var a=l("button",{className:"btn-toggle drawer-hide first-focus"},[l("i",{className:"hi hi-chevron-left drawer-arrow"}),l("i",{className:"hi hi-chevron-right drawer-arrow"})]);return a.setAttribute("aria-label","close"),a}function k(a,b){return l("section",{className:"content"},[l("h3",{id:"drawer-small-title-"+a}),l("div",{className:"inner-content"},[b])])}var l=d.createElement,m=null,n=c.createObject(b,{init:function a(){a.super(this),this.setupProperties({targetSiblingSelector:{default:"",type:String,change:function(a,b){g(this,a,b)}}}),this.classList.add("ha-flex-fixed"),this.on("button.drawer-hide:click",f.bind(this))},get section(){return d.arrayOfChildrenFrom(h(this))},set section(a){d.replaceChildrenOf(this.querySelector("section > div.inner-content"),d.wrapIfNotWrapped("section",a))},attachedCallback:function a(){a.super(this),m=this.parentElement,!m||m.classList.contains("ha-flex-columns")||m.classList.contains("ha-flex-flexible")||(m.classList.add("ha-flex-columns"),m.classList.add("ha-flex-flexible")),g(this,this.targetSiblingSelector)},postRender:function a(){a.super(this);var b=document.createDocumentFragment(),c=h(this)||i(this);d.removeAllChildrenFrom(this),d.appendChildren(b,[j(),k(this.componentId,c)]),this.appendChild(b),this.setAttribute("aria-labelledby","drawer-small-title-"+this.componentId)},detachedCallback:function(){m&&(m.classList.remove("ha-flex-columns"),m.classList.remove("ha-flex-flexible")),this.targetSiblingSelector&&(this.targetSiblingSelector=null)},show:function(){this._open||(this._open=!0,e(this),this.classList.add("slide-in"),this._lastFocus=this.ownerDocument.activeElement,this.emit("show"))},close:function(){this._open&&(this._open=!1,this.classList.remove("slide-in"),this._lastFocus&&(this._lastFocus.className.indexOf("btn-toggle")>-1?this._lastFocus.blur():this._lastFocus.focus()),this._lastFocus=null,this.emit("close"),this.emit("hide"))},addFlexColumnClass:function(a){var b=[];a&&Array.isArray(a)&&(b=a,b.forEach(function(a){a.classList.add("ha-flex-columns"),a.classList.add("ha-flex-flexible")}))},addFlexChildrenClass:function(a){var b=[];a&&Array.isArray(a)&&(b=a,b.forEach(function(a){a.classList.add("ha-flex-children")}))}});return a("ha-drawer-small",n)}),define("hui/popover",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/utils","./core/popup"],function(a,b,c,d,e,f,g){function h(a,b){var c,e;switch(a){case"ha-fade-in":b.classList.remove("enter"),b._noAutoFocusFirstTabbableElementOnShow||(c=b.lastElementChild,c&&(e=d.setFocusOnAnyFirst(c),e||c.focus())),b.open=!0,b.emit("show");break;case"ha-fade-out":b.contains(document.activeElement)&&document.activeElement.blur(),b.classList.remove("visible"),b.classList.remove("leave"),!b._noAutoFocusLastActiveElementOnClose&&b.lastFocus&&b.lastFocus.focus(),b.open=!1,b.emit("hide"),b.emit("close")}}function i(a,b){var c,d;return"HA-POPOVER"===b.tagName?c=a.querySelector(b.targetSelector):(d=f.getComponentFromElement(b,"HA-POPOVER"),d&&(c=a.querySelector(d.targetSelector))),c}function j(a,b){var c,d=b;return a.contains(d)?c=!0:(d=i(a,b),c=!!d&&a.contains(d)),c}function k(a,b){var c,d=a.querySelector(".connector");c="_previousSibling"===b?a.previousElementSibling:""!==b?a.ownerDocument.querySelector(b):a.target,c&&("BUTTON"!==c.tagName&&"A"!==c.tagName||c.classList.contains("no-connector")?d&&a.removeChild(d):d||(d=a.ownerDocument.createElement("div"),d.classList.add("connector"),a.insertBefore(d,a.firstChild)))}var l;return l=b.createObject(c,{init:function a(){a.super(this),this.setupProperties({targetSelector:{default:"_previousSibling",change:function(a){"_previousSibling"===a&&(this._target=this.previousElementSibling),k(this,a)}}})},get openOrOpening(){return this.open||this.classList.contains("enter")},set section(a){for(var b=this.querySelector(".connector");this.firstChildElement;)this.removeChild(this.firstChildElement);b&&this.appendChild(b),this.appendChild(a),this._section=a},get section(){return this._section},get target(){var a=this._target;return a||("_previousSibling"===this.targetSelector?(this._target=this.previousElementSibling,a=this._target):a=this.ownerDocument.querySelector(this.targetSelector)),a},set target(a){this._target=a,k(this,this.targetSelector)},postRender:function a(){a.super(this),this._noAutoFocusFirstTabbableElementOnShow=!1,this._noAutoFocusLastActiveElementOnClose=!1,this._closeOnBlur=!0,this.open=!1;var b=this.querySelector(".connector")?this.children[1]:this.children[0];b&&(this._section=b),this.tabIndex=-1,this.listenTo(this,"blur",function(a){this._closeOnBlur&&(a.currentTarget.contains(a.target)||f.stopEvent(a),this._handleCloseOnBlur(this,a.target))}.bind(this),!0),this.on("keydown",function(a){if(e.ESCAPE===a.keyCode){var b=f.getComponentFromElement(a.target,this.tagName);b&&b.close(),this.postHandleKeydown(b)}}.bind(this));var c=f.getAnimationEventNames();this.on(c.animationend,function(a){a.target===this&&h(a.animationName,a.target)}.bind(this))},_handleCloseOnBlur:function(a,b){var c,d=this;setTimeout(function(){c=a.ownerDocument.activeElement,j(a,c)||(a.close(),d.postHandleCloseOnBlur(a,b))},1)},postHandleCloseOnBlur:function(){},postHandleKeydown:function(){},attachedCallback:function(){k(this)},addContent:function(a){this.section=a,console.warn("DEPRECATION WARNING: addContent method should not be used anymore. Use section property instead.")},show:function(){var a,b=this.className.indexOf("position-")>-1,c=this;this.target&&!this.classList.contains("visible")&&(b||g.setPosition(this,this.target))&&(a=g.installResizeMethod(this,this.target),this.on("close",function b(d){c.off("close",b),d.target===this&&(g.uninstallResizeMethod(a),g.clearPosition(this))}),this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"),this.tabIndex=0)},close:function(){this.classList.add("leave")},hide:function(){this.close(),console.warn("DEPRECATION WARNING: hide method should not be used anymore. Use close instead.")},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),a("ha-popover",l)}),define("hui/popover-form",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/contentNode","./core/a11y","./core/utils"],function(a,b,c,d,e,f){"use strict";function g(a){return Array.isArray(a)&&a.length>0?a:null}var h=b.createObject(c,{init:function a(){a.super(this),this.setupProperties({addNewNameSelector:{default:"",type:String}}),this.tabIndex=-1,this.parentNode&&"HA-POPOVER"===this.parentNode.tagName&&(this.parentNode._noAutoFocusLastActiveElementOnClose=!0),this.on("keydown",function(a){e.keepFocusInsideListener(a,this)})},get section(){var a=f.queryChildOf(this,"section"),b=f.arrayOfChildrenFrom(a);return g(b)},set section(a){var b=f.queryChildOf(this,"section");f.replaceChildrenOf(b,a)},get footer(){var a=f.queryChildOf(this,"footer"),b=f.arrayOfChildrenFrom(a);return g(b)},set footer(a){var b=f.queryChildOf(this,"footer");f.removeAllChildrenFrom(b),f.replaceChildrenOf(b,a)},postRender:function a(){var b,c;a.super(this),b=f.queryChildOf(this,"section")||this.ownerDocument.createElement("section"),c=f.queryChildOf(this,"footer")||this.ownerDocument.createElement("footer"),f.removeAllChildrenFrom(this),f.appendChildren(this,[b,c])},addContent:function(a){var b={section:"section",footer:"footer"};d.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore. Use section or footer property instead.")}});return a("ha-popover-form",h)}),define("hui/textarea",["register-component/v2/register","./validatable/validatable","./core/deviceUtils","./core/utils","object-utils/classes"],function(a,b,c,d,e){function f(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("label");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function g(a,b){return function(c){a._inputElement[b]=c}}function h(a){var b=a._inputElement;a._validationListenersAdded||(a._boundValidator=a._reportValidity.bind(a),a.listenTo(b,"mouseenter",a._boundValidator),a.listenTo(b,"mouseout",a._boundValidator),a.listenTo(b,"focus",a._boundValidator),a.listenTo(b,"blur",a._boundValidator),a.listenTo(b,"keyup",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseover",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.add("ha-validatable"),a._validationListenersAdded=!0)}function i(a){var b=a._inputElement;!d.validationRequired(a)&&a._validationListenersAdded&&(a.stopListening(b,"mouseenter",a._boundValidator),a.stopListening(b,"mouseout",a._boundValidator),a.stopListening(b,"focus",a._boundValidator),a.stopListening(b,"blur",a._boundValidator),a.stopListening(b,"keyup",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseover",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.remove("ha-validatable"),a._validationListenersAdded=!1)}var j=e.createObject(b,{init:function a(){a.super(this),this._validationListenersAdded=!1,this._label="",this._validator=null,this._customValidatorFunction=null,this.highlightElementSelector="textarea",this.setupProperties({cols:{type:Number,default:20,change:g(this,"cols")},disabled:{type:Boolean,change:function(a){this._inputElement.disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},labelOptional:{default:"optional",change:function(a){var b=this.querySelector(".optional");this.optional&&b&&(b.innerHTML=" "+a)}},maxLength:{default:524288,type:Number,change:g(this,"maxLength")},minLength:{default:0,type:Number,change:g(this,"minLength")},name:{default:"",type:String,change:function(a){a?this._inputElement.name=a:this._inputElement.removeAttribute("name")}},optional:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector("label");c&&(b=c.querySelector("span.optional"),a?(b||(b=this.ownerDocument.createElement("span"),b.className="optional",c.appendChild(b)),b.innerHTML=" "+this.labelOptional):b&&c.removeChild(b))}},pattern:{default:"",change:function(a){a?h(this):i(this)}},placeholder:{default:"",type:String,change:function(a){var b=this._inputElement;b.placeholder=a,this.label||b.setAttribute("aria-label",a)}},readOnly:{type:Boolean,change:g(this,"readOnly")},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&f(this)}},required:{default:!1,type:Boolean,change:function(a,b){var c=this._inputElement;a!==b&&(f(this),a?h(this,c):i(this,c),c.required=a,c.setAttribute("aria-required",a))}},rows:{type:Number,default:2,change:g(this,"rows")},value:{type:String,default:"",change:function(a){var b,d,e=this._inputElement;e.value=a,a?(this.classList.add("mobile-textarea-content"),c.isHandheld()&&(b=getComputedStyle(e),d=this.ownerDocument.createElement("div"),d.style.fontSize=b.fontSize,d.style.whiteSpace="pre-wrap",d.style.wordBreak="break-all",d.style.fontFamily=b.fontFamily,d.style.width=b.width,d.style.maxHeight=this.mobileMaxHeight+"px",d.style.position="absolute",d.style.top="-"+(this.mobileMaxHeight+10)+"px",d.style.left="-"+(parseInt(b.width)+10)+"px",d.textContent=a.indexOf("\n")===a.length-1?a+"_":a,this.ownerDocument.body.appendChild(d),this._previousHeight=Math.min(this.mobileMaxHeight,d.offsetHeight+15)+"px",this.ownerDocument.body.removeChild(d))):(this.classList.remove("mobile-textarea-content"),this._previousHeight=""),this._resize()}},mobileMaxHeight:{type:Number,default:80,change:function(){this._resize()}}}),this._validationData={}},postRender:function a(){a.super(this);var b,d=this._inputElement,e=this.querySelector("ha-label"),f=this.getAttribute("value"),g=c.isHandheld();this._notDesktop=g,d||(d=this.ownerDocument.createElement("textarea"),d.className="ha-input",this.appendChild(d)),this._resize(),d.id="ha-textarea-"+this.componentId,this.validationTarget=this,f&&(this.value=f,g&&this.classList.add("mobile-textarea-content")),g&&(this.style.paddingTop=40+this.mobileMaxHeight+"px",this.style.height=58+this.mobileMaxHeight+"px",this.classList.add("mobile-textarea"),this.listenTo(d,"focus",function(){this.classList.add("mobile-textarea-focused"),this._resize()}.bind(this)),this.listenTo(d,"blur",function(){this.classList.remove("mobile-textarea-focused"),this.checkValidity()&&this._resize()}.bind(this))),b=this.getAttribute("label"),e?this.label=Array.prototype.slice.call(e.childNodes):b&&(this.label=b),this.listenTo(d,"change",function(a){a.stopPropagation(),g&&(this.value?this.classList.add("mobile-textarea-content"):this.classList.remove("mobile-textarea-content")),this.emit("change")}.bind(this)),this.listenTo(d,"input",function(a){a.stopPropagation(),this.value=a.target.value,this.emit("input")}.bind(this)),this.listenTo(d,"invalid",function(a){a.preventDefault()})},attachedCallback:function(){var a=this.value;this.value="",this.value=a},get validator(){return this._customValidatorFunction},set validator(a){a&&a!==this.validator?(this._customValidatorFunction=a,h(this)):a||(this._customValidatorFunction=null,i(this))},get _inputElement(){return this.querySelector("textarea")},set label(a){var b,c=this._inputElement,d=this.querySelector("label"),e=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(e&&(this.removeChild(e),d=this.querySelector("label")),d||(d=this.ownerDocument.createElement("label"),this.insertBefore(d,c)),d.htmlFor=c.id,f(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),d&&!e?this.removeChild(d):e&&this.removeChild(e),d=this.ownerDocument.createElement("label"),e=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){d.appendChild(a)}),e.appendChild(d),this.insertBefore(e,this.firstElementChild),f(this)),c.hasAttribute("aria-label")&&c.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),e=this.querySelector("ha-label"),e?this.removeChild(e):d&&this.removeChild(d),c.placeholder&&c.setAttribute("aria-label",c.placeholder)),this._label=a},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},_reportValidity:function(a){var b=d.getComponentFromElement(a.target,this.tagName);b&&b.reportValidity(a)},_resize:function(){this._notDesktop&&(this.style.height=58+this.mobileMaxHeight+"px",this.classList.contains("mobile-textarea-focused")?(this.querySelector("textarea").style.height=this.mobileMaxHeight+"px",this.style.paddingTop="40px"):(this.style.paddingTop=40+this.mobileMaxHeight-Number((this._previousHeight||"").split("px")[0])+"px",this.querySelector("textarea").style.height=this._previousHeight))}});return a("ha-textarea",j)}),define("hui/core/icon",{onChangeIconProperty:function(a){if(this._textField)return this._textField.icon=a,void(a||this.removeAttribute("icon"));var b=this.querySelector("i");if(a){if(!b)switch(b=this.ownerDocument.createElement("i"),this.tagName.toLowerCase()){case"ha-select":this.querySelector("button").appendChild(b);break;case"ha-text-field":this.insertBefore(b,this.querySelector("input"));break;default:throw new Error("Embedded icon not implemented for "+this.tagName)}b.className="hi embedded "+a}else b&&b.parentNode.removeChild(b),this.removeAttribute("icon")}}),define("hui/text-field",["register-component/v2/register","./validatable/validatable","./core/icon","./core/utils","./core/deviceUtils","./core/keys","object-utils/classes"],function(a,b,c,d,e,f,g){function h(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("label");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function i(a){return a.required||!!a.max||!!a.min||!!a.pattern||!!a.minLength||!!a.validator}function j(a,b){a!==b&&this.handleTooltipBinding(i(this))}function k(a){var b=a.querySelector("input");a._validationListenersAdded||(a._boundValidator=a._reportValidity.bind(a),a.listenTo(b,"mouseenter",a._boundValidator),a.listenTo(b,"mouseout",a._boundValidator),a.listenTo(b,"focus",a._boundValidator),a.listenTo(b,"blur",a._boundValidator),a.listenTo(b,"keyup",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseover",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.add("ha-validatable"),a._validationListenersAdded=!0)}function l(a){var b=a.querySelector("input");!d.validationRequired(a)&&a._validationListenersAdded&&(a.stopListening(b,"mouseenter",a._boundValidator),a.stopListening(b,"mouseout",a._boundValidator),a.stopListening(b,"focus",a._boundValidator),a.stopListening(b,"blur",a._boundValidator),a.stopListening(b,"keyup",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseover",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.remove("ha-validatable"),a._validationListenersAdded=!1)}var m=g.createObject(b,{init:function a(){a.super(this),this._validationListenersAdded=!1,this._label=null,this.validationTarget=this,this.highlightElementSelector="input",this._customValidatorFunction=null,this.setupProperties({optional:{default:!1,type:Boolean,change:function(a){a&&(this.required=!1);var b,c=this.querySelector("label");c&&(b=c.querySelector("span.optional"),a?b||(b=this.ownerDocument.createElement("span"),b.className="optional",c.appendChild(b),b.innerHTML=" "+this.labelOptional):b&&c.removeChild(b))}},labelOptional:{default:"optional",change:function(a){var b=this.querySelector(".optional");this.optional&&b&&(b.innerHTML=" "+a)}},name:{default:"",change:function(a){var b=this.querySelector("input"),c=this.querySelector('input[type="file"]');a?c?(c.name=a,b.removeAttribute("name")):b.name=a:(b.removeAttribute("name"),c&&c.removeAttribute("name"))}},autoComplete:{default:"on",change:function(a){this.querySelector("input").autocomplete=a}},size:{default:20,type:Number,change:function(a){this.querySelector("input").size=a}},placeholder:{default:"",change:function(a){var b=this.querySelector("input");b.placeholder=a,
this.label||b.setAttribute("aria-label",a),a||(b.hasAttribute("aria-label")&&b.removeAttribute("aria-label"),b.hasAttribute("placeholder")&&b.removeAttribute("placeholder"))}},icon:{default:"",type:String,change:c.onChangeIconProperty},disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("input").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&h(this)}},required:{default:!1,type:Boolean,change:function(a,b){var c=this.querySelector("input");a&&(this.optional=!1),a!==b&&(h(this),a?k(this,c):l(this,c),this.handleTooltipBinding(i(this)),c.required=a,c.setAttribute("aria-required",a))}},maxLength:{default:524288,type:Number,change:function(a){this.querySelector("input").maxLength=a}},minLength:{default:0,type:Number,change:function(a){var b=this.querySelector("input");a?(b.minLength=a,b.setAttribute("minLength",a),k(this,b)):(b.removeAttribute("minLength"),b.minLength=0,l(this,b))}},pattern:{default:"",change:function(a){var b=this.querySelector("input");a?(b.pattern=a,k(this,b)):(b.removeAttribute("pattern"),l(this,b))}},min:{change:this._onChangeMin},max:{change:this._onChangeMax},mobileMaxHeight:{type:Number,default:34,change:function(a){e.isHandheld()&&(this.classList.contains("mobile-text-field-focused")?this._inputElement.style.height=a+"px":(this.value&&(this._previousHeight=Math.min(this.mobileMaxHeight,this._getDefaultHeight(this.value)+15)+"px"),this._inputElement.style.height=this._previousHeight||""))}},attachment:{type:Boolean,change:function(a){a?this._setUpAttachmentField():this._removeAttachmentField()}}}),this._validationData={}},postRender:function a(){a.super(this),e.isHandheld()&&this.classList.add("mobile-text-field");var b,c,d=this.querySelector("input"),g=this.querySelector("ha-label");d||(d=this.ownerDocument.createElement("input"),d.className="ha-input",this.appendChild(d),d.type="text"),e.isHandheld()&&(this.classList.add("mobile-text-field"),this.listenTo(d,"focus",function(){this.classList.add("mobile-text-field-focused"),d.style.height=this.mobileMaxHeight+"px"}.bind(this)),this.listenTo(d,"blur",function(){this.classList.remove("mobile-text-field-focused"),d.style.height=this._previousHeight||""}.bind(this))),d.id="ha-text-field-"+this.componentId,this.highlightElement=d,b=this.getAttribute("value"),b&&(this.value=b,e.isHandheld()&&this.classList.add("mobile-text-field-content")),c=this.getAttribute("label"),g?this.label=Array.prototype.slice.call(g.childNodes):c&&(this.label=c),this.listenTo(d,"input",function(a){a.stopPropagation(),this.value=a.target.value,this.emit("input")}.bind(this)),this.listenTo(d,"change",function(a){a.stopPropagation(),this.value&&e.isHandheld()?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content"),this.emit("change")}.bind(this)),this.listenTo(d,"blur",function(){this.emit("blur")}.bind(this)),this.listenTo(d,"focus",function(){this.emit("focus")}.bind(this)),this.listenTo(d,"invalid",function(a){a.preventDefault()}),this.listenTo(d,"focus",function(){this.emit("focus")}.bind(this)),this.listenTo(d,"click",function(a){var b=this.querySelector('input[type="file"]');b&&(a.preventDefault(),a.stopPropagation(),b.click())}.bind(this)),this.listenTo(this,'input[type="file"]:change',function(a){var b,c,f=a.target.value;f&&(b=f.indexOf("\\")>=0?f.lastIndexOf("\\"):f.lastIndexOf("/"),c=f.substring(b),0!==c.indexOf("\\")&&0!==c.indexOf("/")||(c=c.substring(1)),d.value=c,e.isHandheld()&&this.classList.add("mobile-text-field-content"))}.bind(this)),this.listenTo(d,"keydown",function(a){if(this.attachment&&(a.preventDefault(),a.keyCode===f.BACKSPACE||a.keyCode===f.DELETE)){d.value="",this.classList.remove("mobile-text-field-content");var b,c,e=this.querySelector('input[type="file"]');e&&(b=e.cloneNode(!0),c=e.parentNode,c.removeChild(e),c.appendChild(b))}}.bind(this)),this._setUpMobileListeners(),this.listenTo(d,"blur",function(){this.classList.remove("mobile-text-field-focused"),this.classList.remove("mobile-text-field-attachment-focused"),this.classList.remove("mobile-text-field-show-placeholder")}.bind(this))},_onChangeMax:j,_onChangeMin:j,_reportValidity:function(a){var b=d.getComponentFromElement(a.target,this.tagName);b&&b.reportValidity(a)},startValidation:function(){k(this)},stopValidation:function(){l(this)},_setUpMobileListeners:function(){var a=this.querySelector("input");this.listenTo(a,"focus",function(){e.isHandheld()&&(this.attachment?this.classList.add("mobile-text-field-attachment-focused"):(this.classList.add("mobile-text-field-focused"),a.style.height="34px"))}.bind(this)),this.listenTo(a,"blur",function(){e.isHandheld()&&(this.attachment?this.classList.remove("mobile-text-field-attachment-focused"):(this.classList.remove("mobile-text-field-focused"),a.style.height=this._previousHeight||""))}.bind(this))},_removeAttachmentField:function(){var a,b=this.querySelector('input[type="file"]'),c=this.querySelector("input"),d=this.querySelector("label"),e=this.name;b&&("hi-attach"===this.icon&&(this.icon=""),a=b.parentNode,a.parentNode.removeChild(a)),c&&c.removeAttribute("aria-hidden"),d&&d.removeAttribute("aria-hidden"),this.name="",this.name=e},_setUpAttachmentField:function(){var a,b,c,d,e,f,g,h=this.name;a=this.querySelector('input[type="file"]'),a&&a.parentNode.parentNode.removeChild(a.parentNode),"hi-attach"!==this.icon&&(this.icon="hi-attach"),e=this.querySelector("input"),f=this.querySelector("label"),c=e.id+"-file-upload",g=this.querySelector(".hi-attach"),f&&f.setAttribute("aria-hidden","true"),e.setAttribute("aria-hidden","true"),g.setAttribute("aria-hidden","true"),a=document.createElement("input"),a.setAttribute("type","file"),a.setAttribute("id",c),d=document.createElement("div"),d.classList.add("ha-textfield-file-input-container"),d.classList.add("sr-only"),f&&(b=document.createElement("label"),b.innerHTML=f.innerHTML,b.setAttribute("for",c),d.appendChild(b)),d.appendChild(a),this.appendChild(d),this.name="",this.name=h},get value(){return this.querySelector("input").value},set value(a){var b=this.querySelector("input"),c=e.isHandheld();"number"==typeof a&&(a+="",a&&c?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content")),a!==this.value&&(this.querySelector("input").value=a),a?a!==this.getAttribute("value")&&this.setAttribute("value",a):(this.removeAttribute("value"),c&&(this.classList.remove("mobile-text-field-content"),this._previousHeight="",this.classList.contains("mobile-text-field-focused")||(b.style.height=""))),this._calculateMobileHeight(a)},_calculateMobileHeight:function(a){var b=this.querySelector("input"),c=e.isHandheld();c&&(a?(this.classList.add("mobile-text-field-content"),this._previousHeight=Math.min(this.mobileMaxHeight,this._getDefaultHeight(a)+15)+"px",this.classList.contains("mobile-text-field-focused")||(b.style.height=this._previousHeight)):(this._previousHeight="",this.classList.contains("mobile-text-field-focused")||(b.style.height="")))},get validator(){return this._customValidatorFunction},set validator(a){a&&a!==this.validator?(this._customValidatorFunction=a,this.startValidation()):a||(this._customValidatorFunction=null,this.stopValidation())},get _inputElement(){return this.querySelector("input")},set label(a){var b,c=this.querySelector("input"),d=this.querySelector("label"),e=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(e&&(this.removeChild(e),d=this.querySelector("label")),d||(d=this.ownerDocument.createElement("label"),this.insertBefore(d,c)),d.htmlFor=c.id,h(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),d&&!e?this.removeChild(d):e&&this.removeChild(e),d=this.ownerDocument.createElement("label"),e=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){d.appendChild(a)}),e.appendChild(d),this.insertBefore(e,this.firstElementChild),h(this)),c.hasAttribute("aria-label")&&c.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),e=this.querySelector("ha-label"),e?this.removeChild(e):d&&this.removeChild(d),c.placeholder&&c.setAttribute("aria-label",c.placeholder)),this._label=a,this.attachment&&this._setUpAttachmentField()},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"value"===b?this.value=d:"label"===b?this.label=d:a.super(this,b,c,d)},focus:function(){this.querySelector("input").focus()},_getDefaultHeight:function(a){var b,c,d=getComputedStyle(this._inputElement);return a=String(a||""),b=this.ownerDocument.createElement("div"),b.style.fontSize=d.fontSize,b.style.whiteSpace="pre-wrap",b.style.wordBreak="break-all",b.style.fontFamily=d.fontFamily,b.style.width=d.width,b.style.maxHeight=this.mobileMaxHeight+"px",b.style.position="absolute",b.style.top="-44px",b.style.left="-"+(parseInt(d.width,10)+10)+"px",b.textContent=a.endsWith("\n")?a+"_":a,this.ownerDocument.body.appendChild(b),c=b.offsetHeight,this.ownerDocument.body.removeChild(b),c}});return a("ha-text-field",m)}),define("register-component/template",["mustache"],function(a){var b={},c="text";return{load:function(d,e,f,g){if(b[d])f(b[d]);else{var h;h=function(c){g&&g.isBuild?f():(a.parse(c),b[d]=function(b){return a.render(c,b)},f(b[d]))},e([c+"!"+d],h)}}}}),define("text!hui/toast-message/toast-message.html",[],function(){return'<template>\n\t<div class="toast-wrapper">\n\t\t<button aria-label="Close" class="hi hi-close"></button>\n\t\t<i class="hi hi-confirm hi-circle-check"></i>\n\t\t<p>{{{message}}}</p>\n\t</div>\n</template>'}),define("hui/toast-message",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","register-component/template!./toast-message/toast-message.html","./core/keys","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g){"use strict";function h(a){window.clearTimeout(a),a=null}function i(a){h(l),a.classList.remove("animate"),l=window.setTimeout(function(){a.classList.remove("visible"),a._clearTimeout&&a._clearTimeout()}.bind(a),m)}var j,k,l,m=200;return j=a.createObject(c,{init:function a(){a.super(this),this.template=d,this._message="",this._type="confirm",this._dismissible=!0,this.setupProperties({duration:{default:8e3,type:Number}}),this.tabIndex="-1",this.on("button:click",function(){this.emit("dismiss"),this.close()}.bind(this)),this.on("keydown",function(a){var b=a.keyCode;b===e.ESCAPE&&this.close()}.bind(this))},set type(a){console.warn('DEPRECATION WARNING: "type" property is going to be deprecated, please from now on don\'t use it.')},get type(){return console.warn('DEPRECATION WARNING: "type" property is going to be deprecated, please from now on don\'t use it.'),this._type},set message(a){for(var b,c=this.querySelector(".toast-wrapper > p"),d=0;c.firstChild;)c.removeChild(c.firstChild);if(a)if("string"==typeof a)c.innerHTML=a;else if(Array.isArray(a))for(;d<a.length;d++)b=a[d],b&&b.nodeType&&c.appendChild(b);else a.nodeType&&c.appendChild(a);this._message=a},get message(){return this._message},set dismissible(a){var b=this.querySelector("button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.remove("show"),b.classList.add("hidden")),this._dismissible=a},get dismissible(){return this._dismissible},show:function(){k&&k.classList.contains("visible")&&!k.isEqualNode(this)&&k.close(),k=this;var a;this._clearTimeout(),this.classList.add("animate"),this.classList.add("visible"),this.emit("show"),this.duration>0&&(a=setTimeout(this.close.bind(this),this.duration),this._clearTimeout=function(){clearTimeout(a),this._clearTimeout=function(){}}),this._lastFocus=document.activeElement,this.focus()},close:function(){k=null,i(this),this.emit("close"),this.emit("hide"),this._lastFocus&&this._lastFocus.focus()},hide:function(){console.warn('DEPRECATION WARNING: This method is going to be deprecated, please from now on use "close" instead.'),this.close()},preRender:function(){var a=this.querySelector(".toast-wrapper > p");this._message=a?f.removeNodesSafe(a,a.childNodes):f.removeNodesSafe(this,this.childNodes),this._clearTimeout=function(){}},postRender:function(){g.addA11yFocus(this),this.setAttribute("role","status"),this.message=this._message,"false"===this.getAttribute("dismissible")?this.dismissible=!1:this.dismissible=!0},detachedCallback:function(){k=null,h(l),l=null,this._clearTimeout=null,delete this._clearTimeout},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-toast-message",j)}),define("hui/trowser/trowser-base",["object-utils/classes","register-component/v2/UIComponent","../core/contentNode","../core/a11y","../core/event","../core/utils","../core/deviceUtils"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){k(a,function(a){var f,g,h=a.querySelector("ha-page-modal-header"),i=h.headerItems;b?(f=a.ownerDocument.createElement("ha-page-modal-header-item"),f.type=c,f.icon=d,f.setAttribute("position",e),h.headerItems=i.concat(f)):(g=a.querySelectorAll('ha-page-modal-header-item:not([type="'+c+'"])'),h.headerItems=Array.prototype.slice.call(g))})}function i(a){return Array.isArray(a)&&a.length>0?a:null}function j(a){var b=f.createElement,c={primary:[],secondary:[],tertiary:[]},d=[].slice.call(a.children),e=function(a,b){var d=b.getAttribute("action"),e=Object.keys(c).indexOf(d)!==-1;return e&&a[d].push(b),a};return d.reduce(e,c),f.removeAllChildrenFrom(a),g.isHandheld()?f.appendChildren(a,[b("span",{className:"footer-left"},c.tertiary.concat(c.secondary)),b("span",{className:"footer-center"}),b("span",{className:"footer-right"},c.primary)]):f.appendChildren(a,[b("span",{className:"footer-left"}),b("span",{className:"footer-center"},c.tertiary),b("span",{className:"footer-right"},c.secondary.concat(c.primary))]),a}var k=f.ifExists,l=f.ifSafeChain,m=a.createObject(b,{init:function a(){a.super(this),this._pageModal=null,this.setupProperties({reactLayering:{type:Boolean,default:!1},titleText:{type:String,default:"",change:function(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").titleText=a})}},infoText:{type:String,default:"",change:function(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").infoText=a})}},history:{type:Boolean,default:!1,change:function(a){h(this,a,"history","history","left")}},settings:{type:Boolean,default:!1,change:function(a){h(this,a,"settings","settings-o","right")}},type:{type:String,default:"",change:function(a){"step-flow"===a&&l(this,["_pageModal"],function(a){var b=a.querySelector(".page-modal-panel");b.removeChild(a.querySelector(".page-modal-panel > footer"))})}}})},set dismissible(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").dismissible=a})},get dismissible(){return l(this,["_pageModal","querySelector"],function(a){return a("ha-page-modal-header").dismissible})},set help(a){h(this,a,"help","help-o","right")},get help(){return!0},set footerItems(a){var b=f.createElement("footer",{},a);b=j(b),l(this,["_pageModal"],function(a){a.footer=b})},get footerItems(){return l(this,["_pageModal"],function(a){var b="div.page-modal-panel > footer > footer > ",c=a.querySelector(b+"span.footer-left"),d=a.querySelector(b+"span.footer-center"),e=a.querySelector(b+"span.footer-right"),g=function(a,b){return a.concat(f.arrayOfChildrenFrom(b))},h=[c,d,e];return i(h.reduce(g,[]))})},set section(a){l(this,["_pageModal"],function(b){b.section=a})},get section(){return l(this,["_pageModal","section"],function(a){return a})},postRender:function a(){var b=f.createElement,c=f.contentQueryFactory(this,{section:"ha-page-modal > div.page-modal-panel > section",footer:"ha-page-modal > div.page-modal-panel > footer"}),g=b("ha-page-modal"),h=c("section")||b("section"),i=c("footer")||b("footer"),k=b("ha-page-modal-header"),l=!!this.querySelector("footer > span.footer-left")||!!this.querySelector("footer > span.footer-center")||!!this.querySelector("footer > span.footer-right");a.super(this),d.addA11yFocus(g),f.removeAllChildrenFrom(this),g.classList.add("trowser-modal"),g.header=k,g.section=h,l||(i=j(i)),g.footer=i,this._pageModal=g,this.appendChild(g),"false"!==this.getAttribute("help")&&(this.help=!0),"false"!==this.getAttribute("dismissible")&&(this.dismissible=!0),e.on(g,"show",function(a){a.stopPropagation(),a.target===g&&this.emit("show")}.bind(this)),e.on(g,"close",function(a){a.stopPropagation(),a.target===g&&this.emit("close")}.bind(this)),e.on(g,"dismiss",function(a){a.stopPropagation(),a.target!==g&&a.target!==k||this.emit("dismiss")}.bind(this))},detachedCallback:function(){l(this,["_pageModal"],function(a){l(a,["parentNode","removeChild"],function(b){b(a)})})},show:function(){this.reactLayering||l(this,["_pageModal","show"],function(a){a()})},addContent:function(a){var b={section:"section",footer:"footerItems"};c.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.")},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The hide method is deprecated, use "close" method instead')},close:function(){l(this,["_pageModal","close"],function(a){a()})}});return m}),define("hui/modal",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/contentNode","./core/position","./core/underlay","./core/utils","./core/deviceUtils"],function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){var d=a.querySelector(".modal-title"),e=d.querySelector("#modal-title-"+a.componentId);e&&d.removeChild(e),e="small"===b&&"error"===c||"small"===b&&"alert"===c?a.ownerDocument.createElement("h4"):a.ownerDocument.createElement("h2"),e.id="modal-title-"+a.componentId,e.textContent=a.titleText,d.insertBefore(e,d.firstChild)}function l(a){var b,c,d={1:"one-btn",2:"two-btn",3:"three-btn"};i.isNode(a)&&(c=a.querySelectorAll("button").length,b=d[c],b&&a.classList.add(b))}var m,n=null,o=a.createObject(c,{init:function a(){a.super(this),this._visible=!1,this._message="",this._extrainfo=null,this.setupProperties({dismissible:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("header button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.add("hidden"),b.classList.remove("show"))}},reactLayering:{type:Boolean,default:!1},size:{default:"small",type:String,change:function(a){for(var b=this.querySelector(".modal-dialog"),c=["small","medium","large","fullscreen"],d=0;d<c.length;d++)b.classList.contains(c[d])&&b.classList.remove(c[d]);b.classList.add(a),k(this,a,this.type)}},type:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-dialog"),c=this.querySelector(".modal-title"),d=c.querySelector("i"),e=["confirm","info","error","warn","endflow","alert"],f=0;if(""!==a){for(;f<e.length;f++)b.classList.contains(e[f])&&b.classList.remove(e[f]),c.classList.contains("hi-"+e[f])&&c.classList.remove("hi-"+e[f]);switch("error"===a||"alert"===a||"endflow"===a?(b.classList.add(a),"error"===a||"alert"===a?("alert"===a&&console.warn('DEPRECATION WARNING: Type "alert" is deprecated, take care using this type for futures releases'),this.setAttribute("role","alertdialog"),b.classList.remove("message-icon"),c.classList.add("hi-"+a)):"endflow"===a&&(b.classList.add("message-icon"),c.classList.add("hi-confirm"))):(b.classList.add("message-icon"),c.classList.add("hi-"+a)),k(this,this.size,a),d||(d=this.ownerDocument.createElement("i"),c.firstElementChild?c.insertBefore(d,c.firstElementChild):c.appendChild(d)),d.className="hi",a){case"confirm":case"endflow":d.classList.add("hi-circle-check");break;case"info":d.classList.add("hi-circle-info");break;case"error":case"warn":case"alert":d.classList.add("hi-circle-alert")}}}},titleText:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-title h2")||this.querySelector(".modal-title h4");b&&(b.textContent=a)}},subtitle:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-title h2")||this.querySelector(".modal-title h4"),c=this.querySelector("header");if(c.classList[a?"add":"remove"]("modal-subtitle"),b){var d=document.createElement("div"),e=b.nextElementSibling;d.classList.add("modal-subtitle"),d.textContent=a,e&&e.classList.contains("modal-subtitle")&&e.parentElement.removeChild(e),b.parentElement.appendChild(d)}}}}),this.tabIndex="-1",this.setAttribute("role","dialog"),m=i.getAnimationEventNames().animationend,this.on("header button:click",function(){this.emit("dismiss"),this.close()}.bind(this)),j.isHandheld()&&this.on("click",function(a){a.target===this.querySelector(".modal")&&(this.emit("dismiss"),this.close())})},set buttons(a){var b=this.querySelector("footer");i.removeAllChildrenFrom(b),i.replaceChildrenOf(b,a),l(b)},get buttons(){var a=this.querySelector("footer");return i.arrayOfChildrenFrom(a).filter(function(a){return a&&"BUTTON"===a.tagName})},set message(a){var b=this.querySelector("section");i.removeAllChildrenFrom(b),"string"==typeof a?b.textContent=a:i.replaceChildrenOf(b,a),this._message=a},get message(){return this._message},set section(a){this.message=a},get section(){return this.message},set extraInfo(a){var b=this.querySelector("aside");i.removeAllChildrenFrom(b),i.replaceChildrenOf(b,a),this._extrainfo=a},get extraInfo(){return this._extrainfo},postRender:function a(){var b,c,e,f,g=i.createElement,h=i.setAttributes,k="div.modal > div.modal-dialog > div.modal-content",m=i.contentQueryFactory(this,{main:k,section:k,aside:k,footer:k});a.super(this),d.addA11yFocus(this),j.isHandheld()&&this.classList.add("mobile-modal"),c=m("main")||m("section")||g("section"),e=m("aside")||g("aside"),f=m("footer")||g("footer"),i.removeAllChildrenFrom(this),b=g("div",{className:"modal","attr-tabIndex":"-1","attr-aria-labelledby":"modal-title-"+this.componentId,"attr-aria-describedby":"modal-text-"+this.componentId},[g("div",{className:"modal-dialog"},[g("div",{className:"modal-content"},[g("header",{},[g("button",{type:"button",className:"btn btn-link hi hi-close medium pull-right","attr-aria-label":"Close"}),g("div",{className:"modal-title"})]),h(c,{id:"modal-text-"+this.componentId}),f,e])])]),this.appendChild(b),j.isHandheld()&&(this.classList.add("mobile-modal"),this.size="small"),l(this.querySelector("footer"))},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')},show:function(){if(!this._visible){this.reactLayering||(h.show(this),g.bringToFront(this)),this._visible=!0,this.emit("will-show");var a=this.querySelector(".modal"),b=this.querySelector(".modal-title"),c=this.querySelector("section"),f=a.querySelector(".ha-button-primary")||b.querySelector("input, button, textarea, select")||c.querySelector("input, button, textarea, select"),j=this;this.ownerDocument.body.classList.add("modal-open"),this.classList.remove("hidden"),this.classList.add("show"),n=this.ownerDocument.activeElement,f?f.focus():d.setFocusOnAnyFirst(a),this.listenTo(a,m,function b(){j.stopListening(a,m,b),j.classList.add("from-bottom-slide-in")}),this.on("keydown",function(b){b.keyCode===e.ESCAPE&&(i.stopEvent(b),this.emit("dismiss"),j.close()),d.keepFocusInsideListener(b,a)}),this.emit("show")}},close:function(){if(this._visible){this._visible=!1;var a=this.querySelector(".modal"),b=this;this.classList.add("hidden"),this.classList.remove("from-bottom-slide-in"),this.off("keydown"),this.reactLayering||h.hide(),this.emit("will-close"),this.listenTo(a,m,function c(){b.stopListening(a,m,c),b.classList.remove("show"),b.ownerDocument.body.classList.remove("modal-open"),b.emit("close"),b.emit("hide"),n&&!b._noAutoFocusLastActiveElementOnClose&&n.focus(),n=null})}},hide:function(){console.warn("DEPRECATION WARNING: This method is deprecated, take care using this method for futures releases"),this.close()},addContent:function(a){var b={main:"message",section:"message",aside:"extraInfo",footer:"buttons"};f.addContent(this,a,b)},detachedCallback:function(){this.parentElement&&this.parentElement!==this.ownerDocument.body&&this.close()}});return b("ha-modal",o)}),define("hui/trowser/page-modal-footer",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/deviceUtils","../modal"],function(a,b,c,d){"use strict";function e(a,b){for(var c=0;c<a.length;c++)a[c].setAttribute("position",b);return Array.prototype.slice.call(a)}function f(a,b,c){var d,e=a.querySelector(".footer-left"),f=a.querySelector(".footer-right"),g=a.querySelector(".footer-center"),h=b.length;for(d=0;d<h;d++)switch(b[d].getAttribute("position")||b[d].position){case"left":c.call(e,b[d]);break;case"right":c.call(f,b[d]);break;case"center":c.call(g,b[d])}}var g=a.createObject(b,{init:function a(){a.super(this),this._footerItems=[]},set footerItems(a){f(this,this._footerItems,Node.prototype.removeChild),f(this,a,Node.prototype.appendChild),this._footerItems=a},get footerItems(){return this._footerItems},postRender:function a(){var b=this.querySelector(".footer-left"),c=this.querySelector(".footer-right"),f=this.querySelector(".footer-center"),g=[];d.isHandheld()&&this.classList.add("mobile-page-modal-footer"),a.super(this),this.tabIndex=-1,b?(b&&b.children.length>0&&(g=g.concat(e(b.children,"left"))),c&&c.children.length>0&&(g=g.concat(e(c.children,"right"))),f&&f.children.length>0&&(g=g.concat(e(f.children,"center"))),this.footerItems=g):(b=this.ownerDocument.createElement("span"),c=this.ownerDocument.createElement("span"),f=this.ownerDocument.createElement("span"),b.className="footer-left",c.className="footer-right",f.className="footer-center",this.appendChild(b),this.appendChild(f),this.appendChild(c))},_onClickSave:function(){this._mainMenu.show()},_onClickOverflow:function(){this._overflowMenu.show()}});return c("ha-page-modal-footer",g)}),define("hui/trowser/page-modal-header-item",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register"],function(a,b,c){"use strict";var d=a.createObject(b,{init:function a(){a.super(this),this.setupProperties({type:{type:String,default:"",change:function(a){var b=this.querySelector(".header-button");a&&b.setAttribute("aria-label",a)}},position:{type:String,default:""},icon:{type:String,default:"",change:function(a,b){var c=this.querySelector("span");a&&(c.classList.remove("hi-"+b),c.classList.add("hi-"+a))}}})},createdCallback:function a(){var b;a.super(this),b=this.querySelector("button"),this.listenTo(b,"blur",function(){this.unselect()}.bind(this))},postRender:function a(){var b,c;a.super(this),b=this.querySelector(".header-button")||this.ownerDocument.createElement("button"),c=this.querySelector("span")||this.ownerDocument.createElement("span"),b.className="header-button",b.appendChild(c),b.classList.add("btn"),b.classList.add("btn-link"),c.classList.add("hi"),this.appendChild(b)},select:function(){this.emit("select",{target:this}),this.classList.add("selected")},unselect:function(){this.emit("unselect",{target:this}),this.classList.remove("selected")}});return c("ha-page-modal-header-item",d)}),define("hui/trowser/page-modal-header",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/utils"],function(a,b,c,d){"use strict";function e(a,b,c){var d,e=a.querySelector(".header-left"),f=a.querySelector(".header-center"),g=a.querySelector(".header-right"),h=/function\s([^(]{1,})\(/.exec(c.toString())[1];b.forEach(function(b){switch(b.getAttribute("position")||b.position){case"left":b.classList.add("pull-left"),c.call(e,b);break;case"right":"removeChild"===h?c.call(g,b):"appendChild"===h&&(d=a.querySelector('[type="close"]'),d?g.insertBefore(b,d):c.call(g,b));break;case"center":c.call(f,b)}}.bind(a))}function f(a){var b=Array.prototype.slice.call(a.querySelectorAll("ha-page-modal-header-item"));return b=b.filter(function(a){return"close"!==a.getAttribute("type")})}function g(a){var b=a.querySelector(".title-text");return b?b.textContent:""}function h(a){var b=a.querySelector(".info-text");return b?b.textContent:""}var i=a.createObject(b,{init:function a(){a.super(this),this._headerItems=[],this.setupProperties({titleText:{type:String,default:"",change:function(a){var b,c;a&&(b=this.querySelector(".title-text"),c=this.querySelector(".header-center"),b?b.textContent=a:(b=this.ownerDocument.createElement("label"),b.textContent=this.titleText,b.className="title-text pull-left",c.appendChild(b)))}},infoText:{type:String,default:"",change:function(a){var b,c;a&&(b=this.querySelector(".info-text"),c=this.querySelector(".header-right"),b?b.textContent=this.infoText:(b=this.ownerDocument.createElement("label"),b.textContent=this.infoText,b.className="info-text ghost-text pull-left",c.insertBefore(b,c.firstChild)))}},dismissible:{type:Boolean,default:!0,change:function(a){var b=this.querySelector('[type="close"]'),c=b.querySelector("button");a?(b.classList.remove("hidden"),b.classList.add("show"),c&&c.setAttribute("aria-label","close")):(b.classList.remove("show"),b.classList.add("hidden"))}}})},set headerItems(a){e(this,this._headerItems,Node.prototype.removeChild),e(this,a,Node.prototype.appendChild),this._headerItems=a},get headerItems(){return this._headerItems},createdCallback:function a(){a.super(this),this.on("ha-page-modal-header-item button:click",function(a){for(var b=a.target;"ha-page-modal-header-item"!==b.localName;)b=b.parentNode;"close"===b.getAttribute("type")?this.emit("dismiss"):this.select(b)}.bind(this))},postRender:function a(){var b,c,e,i=d.createElement,j=document.createDocumentFragment();a.super(),b=f(this),c=g(this),e=h(this),d.removeAllChildrenFrom(this),d.appendChildren(j,[i("span",{className:"header-left"}),i("span",{className:"header-center"}),i("span",{className:"header-right pull-right"},[i("ha-page-modal-header-item",{icon:"close",position:"right","attr-type":"close"})])]),this.appendChild(j),this.headerItems=b,this.titleText=c,this.infoText=e},select:function(a){var b=a.getAttribute("type");"close"!==b&&(this.unselect(),a.select())},unselect:function(){var a=this.querySelector(".selected");a&&a.unselect()}});return c("ha-page-modal-header",i)}),define("hui/trowser/page-modal",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/contentNode","../core/a11y","../core/keys","../core/position","../core/underlay","../core/utils"],function(a,b,c,d,e,f,g,h,i){"use strict";var j="webkitTransitionName"in document.documentElement.style?"webkitTransitionEnd":"animationend",k=function(a,b,c){i.replaceChildrenOf(a.querySelector(b),c)},l=function(a){return i.isNode(a)&&a.classList.add("page-modal-footer"),a},m=a.createObject(b,{init:function a(){a.super(this),this.lastFocus=null,this.setupProperties({reactLayering:{type:Boolean,default:!1},visible:{type:Boolean,default:!1}})},get header(){return this._header},get section(){return this._section},get footer(){return this._footer},set header(a){k(this,"header",a),this._header=a},set section(a){k(this,"section",a),this._section=a},set footer(a){l(a),k(this,"div.page-modal-panel > footer",a),this._footer=a},createdCallback:function a(){a.super(this),this.tabIndex="-1",this.role="dialog"},postRender:function a(){var b,c,d,g,h=i.createElement,j=i.contentQueryFactory(this,{header:"div.page-modal-panel > header",section:"div.page-modal-panel > section",footer:"div.page-modal-panel > footer"}),k=this;a.super(this),c=j("header")||h("header"),d=j("section"),g=j("footer"),
l(g),i.removeAllChildrenFrom(this),b=h("div",{className:"page-modal-panel","attr-aria-hidden":"true"},[c,h("section",{"attr-tabindex":"-1"},[d]),h("footer",{"attr-tabindex":"-1"},[g])]),this.appendChild(b),this.on("keydown",function(a){a.keyCode===f.ESCAPE&&(a.stopPropagation(),a.preventDefault(),k.emit("dismiss"),k.close()),f.TAB===a.keyCode&&e.keepFocusInsideListener(a,k)}),this.on("dismiss",function(a){"HA-PAGE-MODAL-HEADER"===a.target.tagName&&(a.stopImmediatePropagation(),k.emit("dismiss"),k.close())}),this.classList.add("hidden")},show:function(){var a,b=this;this.visible||(this.visible=!0,this.classList.remove("hidden"),this.on(j,function a(){e.setFocusOnFirst(b.querySelector("section")),this.reactLayering||h.show(this),this.reactLayering||g.bringToFront(this),b.off(j,a)}),this.reactLayering||g.bringToFront(this),this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("slide-out"),this.ownerDocument.body.classList.add("modal-open"),a=this.querySelector(".page-modal-panel"),a.setAttribute("aria-hidden",!1),setTimeout(function(){this.classList.add("slide-in")}.bind(this),0),this.emit("show"))},addContent:function(a){var b={header:"header",section:"section",footer:"footer"};d.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.")},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The hide method is deprecated, use "close" method instead')},close:function(){var a,b,c=this;this.visible&&(this.visible=!1,this.on(j,function b(){c.classList.remove("slide-out"),c.stopListening(a,j,b),c.lastFocus&&c.lastFocus.focus(),c.lastFocus=null,c.off(j,b),c.classList.add("hidden")}),a=this.querySelector(".page-modal-panel"),a.setAttribute("aria-hidden",!0),b=this.querySelector("ha-page-modal-header"),b&&b.unselect(),this.reactLayering||h.hide(),this.classList.remove("slide-in"),this.classList.add("slide-out"),this.ownerDocument.body.classList.remove("modal-open"),this.emit("close"))}});return c("ha-page-modal",m)}),define("hui/trowser",["object-utils/classes","register-component/v2/register","./trowser/trowser-base","./trowser/page-modal-footer","./trowser/page-modal-header-item","./trowser/page-modal-header","./trowser/page-modal"],function(a,b,c){"use strict";var d=a.createObject(c,{init:function a(){a.super(this),this.contentSelectorMap={section:"section",footer:"footer"}}});return b("ha-trowser",d)}),define("hui/tab",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/utils","./core/a11y"],function(a,b,c,d,e){"use strict";function f(a){var b;return b=a.ownerDocument.createElement("div"),b.className="content",a.appendChild(b),b}function g(a,b){var c=a.querySelector("i:not(.hi)"),e=a.querySelector(".content"),g=b.className||a.badgeClass,h=b.textContent||a.badgeText;e||(e=f(a)),g&&h?c?(c.className=g,c.textContent=h):e.appendChild(d.createElement("i",{className:g,textContent:h})):c&&e.removeChild(c)}function h(a){if(a){var b=a.querySelector(".content>span"),c=a.querySelector(".content>strong"),d=a.classList.contains("active");b&&c&&(d?(b.setAttribute("aria-hidden",!0),c.setAttribute("aria-hidden",!1),a.setAttribute("aria-selected",!0)):(b.setAttribute("aria-hidden",!1),c.setAttribute("aria-hidden",!0),a.setAttribute("aria-selected",!1)))}}var i=b.createObject(c,{init:function a(){a.super(this),this._section=null,this.setupProperties({icon:{default:"",change:function(a){var b,c,d=this.querySelector("i.hi"),e=this.querySelector(".content");a?(this.classList.add("tab-icon"),c=this.querySelector("span"),e||(e=f(this)),d||(d=this.ownerDocument.createElement("i"),d.classList.add("hi"),c?e.insertBefore(d,c):e.appendChild(d)),d.classList.length>1&&(b=d.classList[d.classList.length-1],d.classList.remove(b)),d.classList.add(a)):(this.classList.remove("tab-icon"),d&&e.removeChild(d))}},titleText:{default:"",change:function(a){var b=this.querySelector(".content>span"),c=this.querySelector(".content>strong"),d=this.querySelector(".content");a?(d||(d=f(this)),b||c?(b.textContent=a,c.textContent=a):(b=this.ownerDocument.createElement("span"),b.textContent=a,c=this.ownerDocument.createElement("strong"),c.textContent=a,d.appendChild(b),d.appendChild(c)),h(this)):b&&c&&(c.innerHTML="",b.innerHTML="")}},badgeClass:{default:"",change:function(a,b){(a||!a&&b)&&g(this,{className:a})}},badgeText:{default:"",change:function(a,b){(a||!a&&b)&&g(this,{textContent:a})}}})},set section(a){Array.isArray(a)||(a=[a]),this._section=a,this.emit("section-property-change")},get section(){return this._section},set active(a){a?this.classList.add("active"):this.classList.remove("active"),h(this)},get active(){return this.classList.contains("active")},preRender:function a(){a.super(this)},postRender:function a(){var b,c,f,g;for(a.super(this),this.setAttribute("role","tab"),b=[],c=0;c<this.childNodes.length;c++)this.childNodes[c].classList&&this.childNodes[c].classList.contains("content")||b.push(this.childNodes[c]);0===b.length&&this.id?(f=d.getComponentFromElement(this,"HA-TABS"),g="#"+this.getAttribute("aria-controls"),this.section=[].slice.call(f.querySelector(g).childNodes)):this.section=b,e.addA11yFocus(this)}});return a("ha-tab",i)}),define("hui/core/ResponsiveBase",["object-utils/classes","register-component/v2/UIComponent","./deviceUtils"],function(a,b,c){var d=a.createObject(b,{attachedCallback:function(){this._resizeHandle=c.registerCallback("_resize",this)},detachedCallback:function(){this._resizeHandle.remove()},_resize:function(){}});return d}),define("hui/core/menuItemUtils",[],function(){function a(a,b,c,d){var e=d.createElement("ha-menu-item");return e.value=a.value||a.getAttribute("value"),(a.hasAttribute("disabled")&&a.getAttribute("disabled")!==!1||a.disabled)&&(e.disabled=!0),"function"==typeof c?e.label=c(a):e.label=a.label||a.textContent,b&&Object.keys(b).forEach(function(a){e.setAttribute(a,b[a])}),e}return{createMenuItemLabelWrapper:function(a,b){var c=a.createElement("span");return c.classList.add("menu-item-label"),Array.isArray(b)&&b.forEach(function(a){c.appendChild(a)}),c},createMenuItem:a,createMenuItems:function(b,c,d,e){return b.map(function(b){return a(b,c,d,e)})}}}),define("hui/menu",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","./core/keys","./core/utils","./core/deviceUtils"],function(a,b,c,d,e,f){function g(a){var b=a._searchTerm.toLowerCase(),c=b.length,d=a.ownerDocument.activeElement,e=-1,f=0;for(d&&(e=a.items.indexOf(d)),e!==-1&&e!==a.items.length-1&&(f=e+1);f!==e;)a.items[f].label.toLowerCase().substr(0,c)!==b||a.items[f].disabled?f===a.items.length-1?f=0:++f:(a.items[f].focus(),e=f);a._timeOut=null,a._searchTerm=null}function h(a,b){var c=a.items;c.length&&(c.forEach(function(a){a.selected=!1,a.setAttribute("aria-selected",!1)}),a._selectedItem=b,a.selectedIndex!==c.indexOf(b)&&(a.selectedIndex=c.indexOf(b)),b.selected=!0,b.setAttribute("aria-selected",!0))}function i(a){return"separator"!==a.type&&!a.disabled}function j(a,b,c,d){for(var e=a.length;c>-1&&c<e;){if(c===d)return;if(i(a[c]))return void a[c].focus();"down"===b?c++:c--}}function k(a){return e.closest(a,"ha-menu-item")}var l,m=34;return l=a.createObject(c,{init:function a(){a.super(this),this._selectedItem=null,this._items=null,this.setupProperties({selectedIndex:{default:-1,type:Number,change:function(a){if(a===-1)this._selectedItem=null;else if(a>=0&&a<this.length){var b=this.items[a];this.selectedItem!==b&&(h(this,b),this.emit("select"))}else this._selectedIndex=-1}},size:{default:0,type:Number,change:function(a){a?(7===a?this.style.maxHeight=a*m+15+"px":this.style.maxHeight=a*m+"px",this.style.overflowY="auto"):(this.style.maxHeight="none",this.style.overflowY="hidden")}}}),this.tabIndex=-1,this.hasAttribute("role")||this.setAttribute("role","menu"),this.on("ha-menu-item:click",function(a){var b=k(a.target);b&&i(b)&&(h(this,b),this.emit("select",{detail:{selectedByClickOrKeyboard:!0}}))}.bind(this)),f.isHandheld()&&this.on("ha-menu-item:touchstart",function(a){var b=e.getComponentFromElement(a.target,"HA-MENU-ITEM");!b&&a.target.classList.contains("menu-item-label")&&(b=e.getComponentFromElement(a.target.parentElement,"HA-MENU-ITEM")),b&&i(b)&&b.focus()}.bind(this)),this.on("keydown",function(a){var b,c=a.target,f=this.items;if(d.isLetter(a.keyCode)||d.isNumber(a.keyCode))return e.stopEvent(a),this._timeOut?clearTimeout(this._timeOut):this._searchTerm="",this._searchTerm+=String.fromCharCode(a.keyCode),void(this._timeOut=setTimeout(function(){g(this)}.bind(this),1e3));if("HA-MENU-ITEM"!==c.tagName&&(a.keyCode===d.UP||a.keyCode===d.DOWN||a.keyCode===d.END||a.keyCode===d.HOME))return e.stopEvent(a),void f[0].focus();switch(a.keyCode){case d.UP:e.stopEvent(a),b=0===f.indexOf(c)?f.length-1:f.indexOf(c)-1,j(f,"up",b);break;case d.DOWN:e.stopEvent(a),j(f,"down",(f.indexOf(c)+1)%f.length);break;case d.END:e.stopEvent(a),j(f,"up",f.length-1,f.indexOf(c));break;case d.HOME:e.stopEvent(a),j(f,"down",0,f.indexOf(c));break;case d.ENTER:case d.SPACEBAR:"HA-MENU-ITEM"===c.tagName&&i(c)&&(e.stopEvent(a),h(this,c),this.emit("select",{detail:{selectedByClickOrKeyboard:!0}}));break;default:return}}.bind(this),!0),this.on("ha-menu-item:mousemove",function(a){for(var b=a.target;b&&"HA-POPOVER"!==b.tagName;)b=b.parentElement;b&&b.classList.contains("leave")||a.target.focus()}.bind(this),!0)},set items(a){var b;for(this.tabIndex=-1;this.firstChild;)this.removeChild(this.firstChild);Array.isArray(a)&&(a.forEach(function(a){a.nodeType?b=a:(b=this.ownerDocument.createElement("ha-menu-item"),Object.keys(a).forEach(function(c){b[c]=a[c]})),b.setAttribute("aria-selected",!!b.selected),this.appendChild(b)},this),this.length=a.length),this._items=a},get items(){return this._items},get selected(){return console.warn("DEPRECATION WARNING: selected property is deprecated. Use selectedItem instead"),this._selectedItem},get selectedItem(){return this._selectedItem},set selected(a){},get length(){return this._items.length},set length(a){},preRender:function(){var a=this.querySelectorAll("ha-menu-item");this.items=e.removeNodesSafe(this,a)},add:function(a,b){b="undefined"!=typeof b?b:this.items.length,this.items.splice(b,0,a),this.items=this.items},remove:function(a){a>=0&&a<this.items.length&&(this.items.splice(a,1),this.items=this.items)}}),b("ha-menu",l)}),define("hui/menu-item",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/deviceUtils","./core/menuItemUtils"],function(a,b,c,d,e){function f(a){if(a)return a.replace(/<\/?[^>]+(>|$)/g,"")}var g=c.createObject(b,{init:function a(){a.super(this),this._label="",this.setupProperties({value:{default:""},disabled:{default:!1,type:Boolean,change:function(a){a?(this.classList.add("disabled"),this.setAttribute("disabled","disabled"),this.setAttribute("aria-disabled","true")):(this.classList.remove("disabled"),this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"))}},selected:{default:!1,type:Boolean},type:{default:"default",change:function(a){"separator"===a?(this.classList.add("separator"),this.innerHTML=""):this.classList.remove("separator")}}})},set label(a){var b;if("default"===this.type){if("string"==typeof a){if(this.setAttribute("label",a),this.setAttribute("aria-label",f(a)),a){if(b=this.querySelector("span.menu-item-label"),!b){for(;this.firstChild;)this.removeChild(this.firstChild);b=e.createMenuItemLabelWrapper(this.ownerDocument),this.appendChild(b)}for(;b.firstChild;)b.removeChild(b.firstChild)}b&&(b.textContent=a)}else this.removeAttribute("label"),this.removeAttribute("aria-label"),a.nodeType&&this.appendChild(a);this._label=a}},get label(){return this._label},postRender:function a(){a.super(this),this.tabIndex=-1,this.label=this.textContent,this.value=this.getAttribute("value")||this.label,this.setAttribute("role","button"),d.isHandheld()&&this.classList.add("mobile-menu-item")}});return a("ha-menu-item",g)}),define("hui/item",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/domObserver"],function(a,b,c,d){"use strict";var e;return e=c.createObject(a,{init:function a(){a.super(this),this.setupProperties({value:{default:"",type:String},label:{default:"",type:String,change:function(a){this._labelBinding&&this._labelBinding.pause(),this.innerHTML=a,this._labelBinding&&this._labelBinding.resume()}}})},postRender:function a(){a.super(this),this.label=this.innerHTML,this.value=this.getAttribute("value")||this.label},attachedCallback:function(){this._labelBinding=d.bindContentChanges(this,this,"label",function(){return this.innerHTML}.bind(this))},detachedCallback:function(){this._labelBinding&&(this._labelBinding.remove(),this._labelBinding=null)}}),b("ha-item",e)}),define("hui/menu/menu-based-buttons",["object-utils/classes","../core/ResponsiveBase","../core/popup","../core/utils","../core/deviceUtils","../core/keys","../core/menuItemUtils","../core/domObserver","../popover","../modal","../menu","../menu-item","../item"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){a&&(k(a)?c.setPosition(a,b,["bottom","top"],["left","right"]):c.show(a,b,["bottom","top"],["left","right"]))}function j(a){a&&("HA-MODAL"===a.nodeName?a.close():c.hide(a))}function k(a){return a&&("HA-POPOVER"===a.nodeName&&a.open||"HA-MODAL"===a.nodeName&&a.classList.contains("show"))}function l(a,b,c){c.setAttribute("aria-expanded","true"),c.classList.add("active"),a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0,i(a,b)}function m(a,b,c){k(a)&&(b.setAttribute("aria-expanded","false"),setTimeout(function(){j(a)},c||0))}var n=a.createObject(b,{init:function a(){a.super(this),this._popover=null,this._items=null,this.setupProperties({label:{default:"",type:String,change:function(a){var b=this.querySelector(".label"),c=this.dropdownElement.querySelector("ha-menu");b.innerHTML=a,c.setAttribute("aria-label",a)}},selectedIndex:{default:-1,type:Number,change:function(a){var b=this.dropdownElement.querySelector("ha-menu");Array.isArray(this.items)&&a>-1&&a<this.items.length?b.selectedIndex=this.selectedIndex:a!==-1&&(this.selectedIndex=-1)}},noFocusBackOnSelect:{default:!1,type:Boolean}})},postRender:function a(){a.super(this),this._setupComponent()},_setupComponent:function(){var a=this.dropdownElement,b=this._getTriggerElement();e.isHandheld()&&this.classList.add("mobile-menu-based-button"),b?b.id=this._getTargetSelectorId():b=this._renderTriggerElement(),a&&a.parentNode&&a.parentNode.removeChild(a),this._initPopover(b),this.listenTo(b,"click",function(a){var c=this.dropdownElement;this.disabled||(a.stopPropagation(),b.focus(),k(c)?m(c,b):l(c,this,b))}.bind(this)),this.listenTo(b,"blur",function(a){var c=d.getSafeTargetFromEvent(a),e=this.dropdownElement;this.contains(c)||e.contains(c)||(m(e,b),this.emit("blur"))}.bind(this),!0),this.listenTo(b,"keydown",function(a){var c=this.dropdownElement,e=c.querySelector("ha-menu");if(!this.disabled)switch(a.keyCode){case f.SPACEBAR:case f.ENTER:d.stopEvent(a),k(c)||l(c,this,b);break;case f.DOWN:d.stopEvent(a),this._showWithAlignment(c,e,b,"position-bottom");break;case f.UP:d.stopEvent(a),this._showWithAlignment(c,e,b,"position-top")}}.bind(this),!0),this.on("keydown",function(a){var c=this.dropdownElement;this.disabled||a.keyCode!==f.TAB&&a.keyCode!==f.ESCAPE||k(c)&&(d.stopEvent(a),m(c,b),b.focus())}.bind(this)),this.listenTo(b,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0)},_initPopover:function(a){this._dropdownElement=null;var b,c=this.ownerDocument.createElement(this.modal?"ha-modal":"ha-popover");return c.classList.add("popover-menu-items"),c.targetSelector="#"+this._getTargetSelectorId(),b=this.ownerDocument.createElement("ha-menu"),c.section=b,this.label&&b.setAttribute("aria-label",this.label),this.appendChild(c),this.items=Array.prototype.slice.apply(this.querySelectorAll("ha-item")),e.isHandheld()&&(c.classList.add("mobile-menu"),c.classList.add("from-bottom")),this.listenTo(c,"show",function(a){a.stopPropagation(),this.emit("items-show")}.bind(this)),this.listenTo(c,"close",function(b){b.stopPropagation(),this.emit("items-close"),this._focusOnNextClose&&(a.focus(),this._focusOnNextClose=!1),a.classList.remove("active")}.bind(this)),this.listenTo(c,"hide",function(a){a.stopPropagation()}),this.listenTo(b,"click",function(a){a.stopPropagation()}.bind(this)),this.listenTo(b,"select",function(b){this._handleSelect(b,a,c)}.bind(this)),this.listenTo(a,"blur",function(b){var e=d.getSafeTargetFromEvent(b);c.contains(e)||a.classList.remove("active")}.bind(this)),this.listenTo(c,"blur",function(b){var e=d.getSafeTargetFromEvent(b);this.contains(e)||c.contains(e)||(a.classList.remove("active"),m(c,a),this.emit("blur"))}.bind(this),!0),this.listenTo(c,"keydown",function(b){b.keyCode===f.TAB&&(a.focus(),d.stopEvent(b))}.bind(this)),c},_getPopover:function(){return this._dropdownElement?this._dropdownElement:(this._dropdownElement=this.querySelector(this.modal?"ha-modal":"ha-popover"),this._dropdownElement)},_handleSelect:function(a,b,c,d){a.stopPropagation(),d||(this.selectedIndex=a.target.selectedIndex),this.noFocusBackOnSelect?b.classList.remove("active"):this._focusOnNextClose=!0,m(c,b,e.isHandheld()?300:0),d||this.emit("select")},_showWithAlignment:function(a,b,c,d){if(k(a)){if(a.classList.contains(d)){var e,f;"position-top"===d?e=b.items.length-1:"position-bottom"===d&&(e=0),f=b.items&&b.items.length>0?b.items[e]:b,f.focus()}}else l(a,this,c)},attachedCallback:function(){this._itemHandle=h.bindChildrenChanges(this,"ha-item",this,"items")},detachedCallback:function(){var a=this.dropdownElement;a&&a.parentElement&&a.parentElement.removeChild(a),this._itemHandle&&(this._itemHandle.remove(),this._itemHandle=null)},set popover(a){console.warn('DEPRECATION WARNING: "popover" property is going to be deprecated, please from now on don\'t use it.');var b,c;this.popover&&this.popover!==a&&this.removeChild(this.popover),this._popover=a,a&&(c=this._getTargetSelectorId(),a.classList.add("popover-menu-items"),a.targetSelector="#"+c,a._noAutoFocusLastActiveElementOnClose=!0,b=this._getTriggerElement(),b&&(b.id=c),a.parentNode!==this&&this.appendChild(a))},get popover(){return console.warn('DEPRECATION WARNING: "popover" property is going to be deprecated, please from now on don\'t use it.'),this._popover},set items(a){if(a){this._itemHandle&&this._itemHandle.pause();var b,c=this.dropdownElement.querySelector("ha-menu"),d=[];b=Array.prototype.slice.call(this.querySelectorAll("ha-item")),b.forEach(function(a){this.removeChild(a)}.bind(this)),Array.isArray(a)&&a.forEach(function(a){d.push(a),this.insertBefore(a,this._getFirstNonItemChild())},this),c.render?c.items=g.createMenuItems(d,{role:"menuitem"},this.itemRenderer||this.renderItem,this.ownerDocument):(c.innerHTML="",d.forEach(function(a){c.appendChild(a)})),this._items=a,this._itemHandle&&this._itemHandle.resume()}},get items(){return this._items},set selectedItem(a){},get selectedItem(){return Array.isArray(this.items)&&this.selectedIndex>-1?this.items[this.selectedIndex]:null},get dropdownElement(){return this._getPopover()},_getTargetSelectorId:function(){return this.localName+"-target-"+this.componentId},_getFirstNonItemChild:function(){return Array.prototype.slice.call(this.children).filter(function(a){return"HA-ITEM"!==a.tagName})[0]},get modal(){return"HA-MENU-BUTTON"===this.tagName&&e.getScreenParameters().deviceType===e.deviceTypes.mobile}});return n}),define("hui/menu-button",["object-utils/classes","register-component/v2/register","./menu/menu-based-buttons","./core/deviceUtils","./item"],function(a,b,c,d){"use strict";var e,f=["ha-button-default","ha-button-primary","ha-button-dark"],g=Date.now()+"-menu-button-cancel-item-value";return e=a.createObject(c,{init:function a(){a.super(this),this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("button"),c=this.querySelector(".combo-button-action"),d=this.querySelector(".combo-button-dropdown");c&&d?a?(c.disabled=!0,d.disabled=!0):(c.disabled=!1,d.disabled=!1):b.disabled=a}},addMobileCancelOption:{default:!1,type:Boolean,change:function(a,b){d.getScreenParameters().deviceType===d.deviceTypes.mobile&&a!==b&&(a&&this.mobileCancelText?this._addCancelItem(this.mobileCancelText):this._removeCancelItem(!0))}},mobileCancelText:{default:"Cancel",type:String,change:function(a,b){d.getScreenParameters().deviceType===d.deviceTypes.mobile&&(a===b&&"Cancel"===a||(this.addMobileCancelOption=!0))}},icon:{default:"",type:String,change:function(a){var b=this._getTriggerElement(),c=b.querySelector(".icon-span"),d=b.querySelector(".label");c&&(a?(b.classList.add("with-icon"),c.className="icon-span hi large "+a,d&&d.classList.add("sr-only")):(b.classList.remove("with-icon"),c.classList.add("hidden"),d&&d.classList.remove("sr-only"))),this.showCaret=!this.showCaret,this.showCaret=!this.showCaret}},showCaret:{default:!1,type:Boolean,change:function(a){var b,c=this._getTriggerElement();c&&(b=c.querySelector(".caret")),!a&&b?b.parentElement.removeChild(b):a&&!b&&c&&(b=this.ownerDocument.createElement("span"),b.className="caret",c.appendChild(b))}}})},_handleSelect:function a(b,c,d){a.super(this,b,c,d,b&&b.target&&b.target.selectedItem&&b.target.selectedItem.value===g)},_transferButtonClasses:function(){var a=this._getTriggerElement();f.forEach(function(b){this.classList.contains(b)&&(a.classList.add(b),this.classList.remove(b))},this)},_renderTriggerElement:function(){var a,b,c;return a=this.ownerDocument.createElement("button"),a.type="type",a.className="ha-button no-connector",a.id=this._getTargetSelectorId(),a.setAttribute("aria-expanded","false"),a.setAttribute("aria-haspopup","true"),b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),c=this.ownerDocument.createElement("span"),c.className="icon-span",a.appendChild(c),d.isDesktop()&&(this.showCaret=!0),this.appendChild(a),a},_removeCancelItem:function(a){this._hasCancelItem&&(this._items.splice(-1),this._hasCancelItem=!1,a&&(this.items=this._items))},_addCancelItem:function(a){this._items.some(function(a){return a.value===g||a.getAttribute("value")===g})&&(this._hasCancelItem=!0,this._removeCancelItem());var b=document.createElement("ha-item");b.value=g,b.textContent=a,this.items=this._items.concat(b),this._hasCancelItem=!0},_getTriggerElement:function(){return this.querySelector("button.ha-button.no-connector")},attachedCallback:function a(){a.super(this),this._transferButtonClasses()}}),b("ha-menu-button",e)}),define("hui/tabs",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/utils","./core/deviceUtils","./tab","./popover","./menu-button","./item"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=n(a,b),d=b.querySelector("#"+c);q(b,a,d)}function i(a,b,c){var d,e,f,g=c.querySelector("section"),h=l(b,c);if(e=n(b,c),d=c.querySelector("#"+e),d||(d=c.ownerDocument.createElement("div"),g.appendChild(d),d.id=e,d.setAttribute("aria-labelledby",o(b,c)),d.setAttribute("role","tabpanel")),d.setAttribute("aria-hidden",!h),h?d.classList.add("active"):d.classList.remove("active"),a.section){for(d.innerHTML="",f=0;f<a.section.length;f++)d.appendChild(a.section[f]);q(c,b,d),r(c,b)}}function j(a,b){return 0===a?0:!a||!b.tabs||a>b.tabs.length?-1:a}function k(a,b){if(a){a=a&&"HA-ITEM"===a.nodeName?a:f.getComponentFromElement(a,"HA-TAB");var c;c=g.isHandheld()&&b.useTabButton?b.querySelector(".ha-tabs-header ha-item.active"):b.querySelector(".ha-tabs-header .active"),p(c,b),p(a,b),b.selectedIndex=b.tabs.indexOf(a),a.focus()}}function l(a,b){return b.selectedIndex>0?b.selectedIndex===a:0===a}function m(a){return parseInt(a.forHTML.slice(-1),10)}function n(a,b){return b.tabs[a]&&b.tabs[a].hasAttribute("aria-controls")?b.tabs[a].getAttribute("aria-controls"):"ha-tab-content-"+b.componentId+"-"+a}function o(a,b){return b.tabs[a]&&b.tabs[a].id?b.tabs[a].id:"ha-tab-"+b.componentId+"-"+a}function p(a,b){if(a){var c=a.forHTML,d=c?b.querySelector("#"+c):a,e=a.classList&&a.classList.contains("active");if(!d)return;e?("HA-TAB"===a.tagName?a.active=!1:a.classList.remove("active"),a.setAttribute("aria-expanded",!1),a.setAttribute("tabindex",-1),d.classList.remove("active"),d.setAttribute("aria-hidden",!0)):("HA-TAB"===a.tagName?a.active=!0:a.classList.add("active"),a.setAttribute("aria-expanded",!0),a.setAttribute("tabindex",0),d.classList.add("active"),d.setAttribute("aria-hidden",!1))}}function q(a,b,c){var e;e=d.getBoundariesTabableElement(c,!0),a.jumpers[b]=e.last||e.first}function r(a,b){function c(a){var b=f.getComponentFromElement(a.target,"HA-TABS");a.keyCode!==e.TAB||a.shiftKey||s(a.target.jumpTo,b,a)}function d(a,b){g=a.jumpers[b],i=a.querySelector("#"+o(parseInt(b,10)+1,a)),i&&g&&(g.jumpTo=i,a.stopListening(g,"keydown",c),a.listenTo(g,"keydown",c))}var g,h,i;if(b)d(a,b);else for(h in a.jumpers)d(a,h)}function s(a,b,c,d){a&&(f.stopEvent(c),k(a,b),d?d.focus():a.focus())}function t(a){var b,c,d=a.target,e=-1;for(c=f.getComponentFromElement(d,"HA-TABS"),b=0;b<c.tabs.length;b++)if(c.tabs[b]===d){e=b;break}i(d,e,c)}function u(a,b){var c,d;d=a._tabs[b],d.id=o(b,a),d.forHTML=n(b,a),d.setAttribute("aria-controls",n(b,a)),c=l(b,a),d.setAttribute("aria-selected",c),d.setAttribute("aria-expanded",c),c?d.classList.add("active"):d.classList.remove("active"),a.querySelector("header").appendChild(d),i(d,b,a)}function v(a,b){return a.map(function(a,c){var d=b.ownerDocument.createElement("ha-tab"),e=a.titleText||a.getAttribute("label"),f=l(c,b);return d.section=Array.prototype.slice.call(b.querySelector("#"+a.getAttribute("aria-controls")).children),d.titleText=e,d.classList[f?"add":"remove"]("active"),d})}function w(a,b){var c=[],d=a.ownerDocument.createElement("ha-menu-button"),e=a.ownerDocument.createElement("span");e.className="caret",d.querySelector("button").appendChild(e),b.forEach(function(b,e){var f=a.ownerDocument.createElement("ha-item"),g=b.titleText||b.getAttribute("titleText"),h=n(e,a),j=l(e,a);j&&(d.label=g),f.forHTML=n(e,a),f.section=b.section,f.label=f.textContent=f.titleText=g,f.value=h,c.push(f),f.id=o(e,a),f.forHTML=h,f.setAttribute("aria-controls",h),f.setAttribute("aria-selected",j),f.classList[j?"add":"remove"]("active"),i(f,e,a)}),a._oldTabs||(a._oldTabs=a._tabs),a._tabs=c,d.items=c,d.on("select",function(b){var c=b.target,d=c.items[c.selectedIndex];c.label=d.textContent,a.selectedIndex=c.selectedIndex}),a.querySelector("header").appendChild(d),d._getPopover().classList.remove("from-bottom")}var x=b.createObject(c,{init:function a(){a.super(this),this.jumpers={},this._tabs=null,this.setupProperties({selectedIndex:{default:0,type:{parse:function(a){return Number(a)},stringify:function(a){return String(a)}},change:function(a){var b,c=j(a,this);this.tabs&&c!==-1&&(b=this.tabs[a],b&&!b.classList.contains("active")&&k(b,this))}},useTabButton:{default:g.isHandheld(),type:f.YesNoType,change:function(a){!a&&this._oldTabs?this.tabs=this._oldTabs:this.tabs&&(this.tabs=this.tabs)}}})},postRender:function a(){a.super(this),d.addA11yFocus(this)},set tabs(a){function b(){var b;if(c.querySelector("header").innerHTML="",c.querySelector("section").innerHTML="",c._tabs=a||[],g.isHandheld()&&c.useTabButton)w(c,c._tabs);else{for(c._oldTabs=c._tabs,b=0;b<c._tabs.length;b++)u(c,b),c.listenTo(c._tabs[b],"section-property-change",t);r(c)}}var c=this;b(a)},get tabs(){return this._tabs},get selectedItem(){return this._tabs[this.selectedIndex]},set selectedItem(a){},ready:function a(){a.super(this);var b,c=this.querySelector("header"),d=this.querySelector("section"),e=null!==this.querySelector(".ha-tabs-content"),h=Array.prototype.slice.call(this.querySelectorAll("ha-tab")).concat(Array.prototype.slice.call(this.querySelectorAll("ha-item")));if(e){if(this.useTabButton&&g.isHandheld())this._tabs=v(h,this),this.querySelector("header").innerHTML="",w(this,this._tabs);else for(this._tabs=h,b=0;b<this._tabs.length;b++)u(this,b),this.listenTo(this._tabs[b],"section-property-change",t);r(this)}else c=this.ownerDocument.createElement("header"),c.classList.add("ha-tabs-header"),c.setAttribute("role","tablist"),d=this.ownerDocument.createElement("section"),d.classList.add("ha-tabs-content"),this.appendChild(c),this.appendChild(d),this.tabs=f.removeNodesSafe(this,h),this.tabIndex="-1"},add:function(a,b){var c,d,e=this.tabs.length;a&&"HA-TAB"===a.tagName&&(c=0===b?0:b?b:e,d=this.tabs,d.splice(c,0,a),this.tabs=d)},remove:function(a){var b,c=j(a,this);c!==-1&&(b=this.tabs,b.splice(c,1),this.tabs=b)},attachedCallback:function(){var a=this.querySelector("ha-tab");a&&(a.tabIndex=0)},createdCallback:function a(){a.super(this),this.on("header ha-tab:click",function(a){k(a.target,this),this.emit("select")}.bind(this)),this.on("header ha-tab:keydown",function(a){var b,c,d,f,g=a.target;a.keyCode===e.TAB?(c=m(g),h(c,this),a.shiftKey?(d=c-1,d>=0&&(b=this.querySelector("#"+o(d,this)),this.jumpers.hasOwnProperty(d)&&this.jumpers[d]?s(b,this,a,this.jumpers[d]):s(b,this,a))):(f=c+1,f<Object.keys(this.tabs).length&&(b=this.querySelector("#"+o(f,this)),(0===Object.keys(this.jumpers).length||this.jumpers.hasOwnProperty(c)&&!this.jumpers[c])&&s(b,this,a)))):a.keyCode===e.LEFT&&g.previousElementSibling?(b=g.previousElementSibling,s(b,this,a)):a.keyCode===e.RIGHT&&g.nextElementSibling&&(b=g.nextElementSibling,s(b,this,a))}.bind(this))}});return a("ha-tabs",x)}),define("hui/inline-message",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/popup","./core/tooltip","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.animationName,c=a.target;switch(b){case"ha-fade-in":c.classList.remove("enter"),c.emit("show");break;case"ha-fade-out":c.classList.remove("visible"),c.classList.remove("leave"),c.emit("close")}}function i(a){var b,c=a.querySelector(".connector"),d=a._listenersTargets[0];return a.targetSelector.indexOf("_previousSibling")>-1?(b=a.targetSelector.split("_previousSibling")[1],d=b?a.previousElementSibling.querySelector(b.trim()):a.previousElementSibling):""!==a.targetSelector&&(d=a.ownerDocument.querySelector(a.targetSelector)),d?void(c||(c=a.ownerDocument.createElement("div"),c.classList.add("connector"),a.insertBefore(c,a.firstChild))):void(c&&a.removeChild(c))}var j;return j=c.createObject(a,{init:function a(){a.super(this);var b=f.getAnimationEventNames();this.on(b.animationend,h),this._listenersTargets=[],this._message=null,this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this.setupProperties({autoClose:{type:Boolean,default:!1,change:function(a){this._dismissible=!a}},position:{type:String,default:"right bottom",change:function(a){var b={bottom:"left",top:"left",left:"middle",right:"middle"};this._alignment=a.split(" ").map(function(a){return b[a]}).join(" ")}},targetSelector:{type:String,default:"",change:function(a){e.removeOldListeners(this),a?(this.classList.remove("visible"),this.classList.remove("static"),e.setTooltipTargets(this,a),this._listenersTargets[0]&&this._listenersTargets[0]._inputElement&&(this._listenersTargets=[this._listenersTargets[0]._inputElement]),e.resetListeners(this,this.trigger),this._listenersTargets[0]&&(this.setAttribute("id","ha-inline-message-"+this.componentId),this._listenersTargets[0].setAttribute("aria-describedby",this.getAttribute("id")))):(this.classList.add("static"),this.classList.add("visible"),this._listenersTargets=[])}},trigger:{type:String,default:"custom",change:function(a){e.resetListeners(this,a)}}})},attachedCallback:function(){this.targetSelector&&!this._attached&&(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger))},postRender:function a(){var b,c,d;
a.super(this),g.addA11yFocus(this),c=this.querySelector(".hi"),b=this.querySelector(".message-content"),b?d=b.innerHTML:(d=this.innerHTML,this.innerHTML=""),c||(c=this.ownerDocument.createElement("i"),c.classList.add("hi"),c.classList.add("hi-circle-check"),c.setAttribute("aria-hidden",!0),this.appendChild(c)),b||(b=this.ownerDocument.createElement("div"),b.classList.add("message-content"),this.appendChild(b)),this.style.minWidth="1px",this.setAttribute("role","tooltip"),this.setAttribute("aria-live","polite"),this.message=d,this.tabIndex=-1},get alignment(){return this._alignment},get dismissible(){return this._dismissible},get duration(){return 0},set message(a){var b=this.querySelector(".message-content");"string"==typeof a?(b.innerHTML=a,this._message=a):a.nodeType&&(b.innerHTML="",b.appendChild(a),this._message=a)},get message(){return this._message},close:function(a){this.classList.add("leave"),a&&"blur"===a.type||!this._target||!this._target.focus||this._target.focus(),this._target=null},show:function(){this.classList.contains("visible")||(this.targetSelector&&(i(this),this.querySelector(".connector")&&(this._target=this._listenersTargets[0],this._target&&(this._target._inputElement&&(this._target=this._target._inputElement),d.setPosition(this,this._target,this.position.split(" "),this.alignment.split(" "))))),this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"))}}),b("ha-inline-message",j)}),define("hui/label",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";var d=a.createObject(c,{});return b("ha-label",d)}),define("text!hui/page-message/page-message.html",[],function(){return'<template>\n    <span class="hi-icon-{{type}}"></span>\n    <button class="btn hi hi-close" aria-label="Close"></button>\n    <header>\n        <h4>{{titleText}}</h4>\n    </header>\n    <div class="message-content">{{message}}</div>\n</template>\n'}),define("hui/page-message",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/a11y","register-component/template!./page-message/page-message.html"],function(a,b,c,d){"use strict";function e(a){var b;b=a.previousElementSibling||a.parentElement.previousElementSibling,b&&b.focus()}var f;return f=c.createObject(a,{show:function(){this.classList.remove("hidden"),this.emit("show")},init:function a(){a.super(this),this._message=null,this._dismissible=!0,this.setupProperties({titleText:{default:"",type:String,change:function(a){var b=this.querySelector("header"),c=this.querySelector("h4");a?(b||(b=this.ownerDocument.createElement("header"),c=this.ownerDocument.createElement("h4"),b.appendChild(c),this.insertBefore(b,this.querySelector(".message-content"))),c.textContent=a,this.setAttribute("aria-label",a)):(b&&this.removeChild(b),this.removeAttribute("aria-label"))}},type:{default:"info",type:String,change:function(a){var b=this.querySelector("span.message-icon");"alert"===a||"warn"===a||"error"===a?b.className="message-icon hi hi-circle-alert":"discovery"===a?b.className="message-icon hi hi-lightbulb-o":b.className="message-icon hi hi-circle-info","alert"===a&&console.warn('DEPRECATION WARNING: The "alert" type is going to be deprecated. From now on, please use "error" type instead.')}}}),this.on("button.btn.hi-close:click",function(){this.emit("dismiss"),this.close()}.bind(this))},set message(a){var b=this.querySelector(".message-content");"string"==typeof a?(b.innerHTML=a,this._message=a):a.nodeType&&(b.innerHTML="",b.appendChild(a),this._message=a)},get message(){return this._message},set dismissible(a){var b=this.querySelector("button");a?(b.classList.add("show"),b.removeAttribute("aria-hidden")):(b.classList.remove("show"),b.setAttribute("aria-hidden",!0)),this._dismissible=a},get dismissible(){return this._dismissible},postRender:function a(){var b,c,e=this.querySelector(".message-content"),f=this.querySelector("span.message-icon"),g=this.querySelector("h4"),h=this.querySelector("button");a.super(this),d.addA11yFocus(this),e?c=e.innerHTML:(c=this.innerHTML,this.innerHTML="",h=this.ownerDocument.createElement("button"),h.className="btn hi hi-close",h.setAttribute("aria-hidden",!0),h.setAttribute("aria-label","close"),e=this.ownerDocument.createElement("div"),e.className="message-content",b=this.ownerDocument.createElement("header"),f||(f=this.ownerDocument.createElement("span"),f.classList.add("message-icon")),f.setAttribute("aria-hidden",!0),g=this.ownerDocument.createElement("h4"),b.appendChild(g),this.appendChild(f),this.appendChild(h),this.appendChild(b),this.appendChild(e)),this.setAttribute("role","alert"),this.dismissible="false"!==this.getAttribute("dismissible"),this.message=c,this.tabIndex=-1},hide:function(){console.warn('DEPRECATION WARNING: The "hide" event is going to be deprecated. From now on, please use "close" method instead.'),this.emit("hide"),this.close()},close:function(){e(this),this.classList.add("hidden"),this.emit("close")},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-page-message",f)}),define("hui/stacked-page-messages",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/utils"],function(a,b,c,d){"use strict";function e(a,b){if(a.type!==b.type){if(a.type===j||a.type===k)return-1;if(b.type===j||b.type===k)return 1;if(a.type===l)return-1;if(b.type===l)return 1}return 0}function f(a){var b=a.parentElement,c=a.previousElementSibling;c?c.focus():b&&(c=b.previousElementSibling,c&&c.focus())}function g(a,b){return d.getArrayDiff(a,b)}function h(a,b){return d.getArrayDiff(b,a)}var i,j="alert",k="error",l="warn";return i=c.createObject(a,{init:function a(){a.super(this),this._messages=[],this._sortMessages=!0,this.on("ha-page-message:close",function(a){this.remove(this.messages.indexOf(a.target))}.bind(this))},add:function(a,b){var c=this.messages?this.messages.slice():[];null!==a&&(void 0!==b?(c.splice(b,0,a),this._sortMessages=!1):c.push(a)),this.messages=c},remove:function(a){var b;null!==this.messages&&this.messages.length&&a<this.messages.length&&(b=this.messages.slice(),b.splice(a,1),this.messages=b)},set messages(a){var b=g(this._messages,a),c=h(this._messages,a);d.removeNodesSafe(this,b),d.appendChildCollection(this,c),this._messages=a,null!==a&&a.length>0?(this._sortMessages&&a.sort(e),this._sortMessages=!0,this.show()):(this.close(),f(this))},get messages(){return this._messages},postRender:function(){var a=d.removeNodesSafe(this,this.querySelectorAll("ha-page-message"));this.innerHTML="",this.messages=a},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The "hide" method is going to be deprecated. From now please use "close" instead.'),this.emit("hide")},close:function(){this.classList.add("hidden"),this.emit("close")},show:function(){this.classList.remove("hidden"),this.emit("show")},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-stacked-page-messages",i)}),define("hui/paginated-message",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes"],function(a,b,c){var d;return d=c.createObject(b,{init:function a(){a.super(this),this._message=null,this.setupProperties({titleText:{default:"",type:String,change:function(a){this.querySelector(".message-title").textContent=a,a?this.setAttribute("aria-label",a):this.removeAttribute("aria-label")}},type:{default:"error",type:String,change:function(a){"alert"===a&&console.warn("DEPRECATION WARNING: The message type 'alert' is deprecated. Please use 'error' instead."),"alert"===a||"error"===a||"warn"===a?this.querySelector("i").className="hi hi-circle-alert":this.querySelector("i").className="hi hi-circle-info"}}})},show:function(){this.classList.remove("hidden"),this.emit("show")},hide:function(){this.close(),this.emit("hide"),console.warn('DEPRECATION WARNING: The hide method is going to be deprecated. From now on, please use "close" instead.')},close:function(){this.classList.add("hidden"),this.emit("close")},set message(a){"string"==typeof a?this.querySelector(".message-content").innerHTML=a:this.querySelector(".message-content").appendChild(a),this._message=a},get message(){return this._message},postRender:function(){var a,b,c=this.querySelector(".message-content"),d=this.querySelector(".message-title"),e=this.querySelector("i");b=c?c.innerHTML:this.innerHTML,c||(this.innerHTML="",e||(e=this.ownerDocument.createElement("i")),e.setAttribute("aria-hidden",!0),a=this.ownerDocument.createElement("div"),a.className="message-container",d=this.ownerDocument.createElement("span"),d.className="message-title",d.setAttribute("role","heading"),d.setAttribute("aria-level","1"),c=this.ownerDocument.createElement("span"),c.className="message-content",a.appendChild(d),a.appendChild(c),this.appendChild(e),this.appendChild(a),this.setAttribute("role","alert")),this.message=b,this.type=this.getAttribute("type")||"error"},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),a("ha-paginated-message",d)}),define("text!hui/paginated-messages/paginated-messages.html",[],function(){return'<template>\n    <div class="messages"></div>\n    <div class="pagination-control">\n        <button aria-label="Previous alert" class="navigate-previous"><i class="hi hi-chevron-left"></i></button>\n        <div class="pagination-control-text">\n        </div>\n        <button aria-label="Next alert" class="navigate-next"><i class="hi hi-chevron-right"></i></button>\n        <span class="arrow-border"></span>\n    </div>\n    <button aria-label="Close" class="btn hi hi-close"></button>\n</template>\n'}),define("hui/helpers/string.helper",[],function(){var a={replaceKeys:function(a,b){return a.replace(/{{([^{}]*)}}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}};return a}),define("hui/paginated-messages",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","register-component/template!./paginated-messages/paginated-messages.html","./core/keys","./helpers/string.helper","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g,h){function i(a){j(a),k(a)}function j(a){var b=a.querySelector(".navigate-next"),c=a.querySelector(".navigate-previous"),d=!1,e=a._messages.length,f=a.ownerDocument;1===a._displayedIndex?(c===f.activeElement&&(d=!0),c.classList.remove("visible")):c.classList.add("visible"),a._displayedIndex===e?(b===f.activeElement&&c.focus(),b.classList.remove("visible")):(b.classList.add("visible"),d&&b.focus())}function k(a){var b=a.querySelector(".pagination-control"),c=a._messages.length;c>1?b.style.display="block":b.style.display="none",b.querySelector(".current-message").innerHTML=a._displayedIndex,b.querySelector(".total-messages").innerHTML=c}function l(a,b){var c,d=a._messages.length;b>0&&b<=d&&(a._displayedIndex=b,c=a.querySelector(".paginated-message-displayed"),c&&c.classList.remove("paginated-message-displayed"),a._messages[b-1].classList.add("paginated-message-displayed"),i(a))}var m;return m=c.createObject(b,{init:function a(){a.super(this),this.template=d,this._messages="",this._displayedIndex=0,this._dismissible=!0,this.setupProperties({paginationLabel:{default:"{{current}} of {{total}}",type:String,change:function(a){var b=f.replaceKeys(a,{current:'<span class="current-message"></span>',total:'<span class="total-messages"></span>'});this.querySelector(".pagination-control-text").innerHTML=b,i(this)}}}),this.on(".hi-close:click",function(){var a,b=this.querySelector(".messages"),c=this._messages.length;this._dismissible&&c>0&&(a=b.children[this._displayedIndex-1],a.close(),this._messages.splice(this._displayedIndex-1,1),b.removeChild(a),c--,this.emit("dismiss"),0===c?this.close():(this._displayedIndex=Math.max(this._displayedIndex-1,1),l(this,this._displayedIndex)))}.bind(this)),this.on(".navigate-next:click",function(){this.showNext()}.bind(this)),this.on(".navigate-previous:click",function(){this.showPrevious()}.bind(this)),this.on("keydown",function(a){a.keyCode===e.LEFT?this.showPrevious():a.keyCode===e.RIGHT&&this.showNext()}.bind(this),!0)},get displayedIndex(){return this._displayedIndex},get messages(){return this._messages},get dismissible(){return this._dismissible},set dismissible(a){a?this.classList.add("dismissible"):this.classList.remove("dismissible"),this._dismissible=a},set messages(a){this._messages=[],a=[].slice.call(a);var b,c=this.querySelector(".messages");c.innerHTML="",a.forEach(function(a){c.appendChild(a),this._messages.push(a)}.bind(this)),b=c.querySelector("ha-paginated-message:not(.hidden)"),b&&b.classList.add("paginated-message-displayed"),i(this)},showNext:function(){l(this,this._displayedIndex+1),this.emit("show-next")},showPrevious:function(){l(this,this._displayedIndex-1),this.emit("show-previous")},show:function(){this.classList.remove("hidden"),this.emit("show")},hide:function(){this.close(),this.emit("hide"),console.warn('DEPRECATION WARNING: The hide method is going to be deprecated. From now on, please use "close" instead.')},close:function(){h.setFocusOnPreviousElement(this),this.classList.add("hidden"),this.emit("close")},preRender:function(){var a,b=this.querySelector(".messages");this._messages||(a=this.querySelectorAll("ha-paginated-message"),b?this._messages=Array.prototype.map.call(a,function(a){return a}):this._messages=g.removeNodesSafe(this,a))},postRender:function(){var a,b=this.querySelector(".messages");this.setAttribute("tabindex",-1),b.innerHTML="",this._messages.forEach(function(a){b.appendChild(a)}),"false"!==this.getAttribute("dismissible")?this.dismissible=!0:this.dismissible=!1,this._displayedIndex=1,a=b.querySelector("ha-paginated-message:not(.hidden)"),a&&a.classList.add("paginated-message-displayed"),h.addA11yFocus(this)},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),a("ha-paginated-messages",m)}),define("hui/add-new-helper",["./core/popup","./core/menuItemUtils"],function(a,b){function c(b){b&&b.open&&a.hide(b)}function d(b,c){var d;c&&(d="HA-SELECT"===b.tagName?b:b.querySelector(".search-container"),c.open||a.show(c,d,["bottom","top"],["left","right"]))}function e(a,c,d){var e,f,g;return f=d.createElement("span"),f.className="hi hi-create-lg",e=b.createMenuItemLabelWrapper(d,[f,d.createTextNode([a,c].join(" "))]),g=d.createElement("ha-menu-item"),g.label=e,g.value="",g.classList.add("add-new-menu-item"),g.setAttribute("role","option"),g.setAttribute("aria-label",a),g}function f(a,b,c){var d,f;f=a.items,f&&0!==f.length&&f[0].classList.contains("add-new-menu-item")||(d=e(b,c,a.ownerDocument),a.add(d,0))}function g(a){var b,c=a.value.length;setTimeout(function(){a.createTextRange?(b=a.createTextRange(),b.move("character",c),b.select()):a.setSelectionRange(c,c),a.focus()},0)}var h={showPopoverForm:function(a,b){var e,f,h=a.dropdownElement;c(h),"HA-SELECT"!==a.tagName&&(f=a.addNewPopover.querySelector("ha-popover-form").addNewNameSelector,f&&(e=a.addNewPopover.querySelector(f),e.value=a.typedText,g(e.querySelector("input")))),d(a,b)},addMenuItem:function(a){var b=a.dropdownElement,c="",d=b.querySelector("ha-menu");"HA-SELECT"!==a.tagName&&(c=a.querySelector("input").value),d&&"HA-MENU"===d.tagName&&f(d,a.addNewText,c)}};return h}),define("hui/typeahead-base",["./validatable/validatable","object-utils/classes","./core/popup","./core/event","./add-new-helper","./core/keys","./core/utils","./core/menuItemUtils","./core/deviceUtils","./modal","./popover","./popover-form","./menu","./menu-item","./text-field"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){return a.querySelector(".search-container ha-text-field.search")}function k(a){return g.getComponentFromElement(a,"HA-TEXTFIELD-TYPE-AHEAD")||g.getComponentFromElement(a,"HA-SELECT-TYPE-AHEAD")}function l(a,b){a&&(a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0,a.open?c.setPosition(a,b,["bottom","top"],["left","right"]):(c.show(a,b,["bottom","top"],["left","right"]),g.showPopoverOrModal(a,b,c),y=a))}function m(a){g.hidePopoverOrModal(a,c)}function n(a){var b=a.dropdownElement;a.classList.remove("menu-expanded"),a._getTriggerElement().setAttribute("aria-expanded","false"),m(b)}function o(a,b){var c,d,e=a.storeLabelProperty;d="HA-TEXTFIELD-TYPE-AHEAD"===a.tagName?a.storeLabelProperty:a.storeValueProperty,a.store?(c={},c[e]=b,c[d]=b,a._cachedItems.push(c)):console.error("No store defined. Please add a store where items can be retrieved")}function p(a){var b,d;return d=a.addNewPopover.querySelector("ha-popover-form"),d.addNewNameSelector?(b=d.querySelector(d.addNewNameSelector),b&&b.value?(g.hidePopoverOrModal(a.addNewPopover,c),o(a,b.value),a.value=b.value,a.classList.add("element-selected"),a.dropdownElement.classList.add("element-was-selected"),b.value="",void a.emit("change")):void g.hidePopoverOrModal(a.addNewPopover,c)):void g.hidePopoverOrModal(a.addNewPopover,c)}function q(a,b,c,d){var e=a.ownerDocument.createElement("ha-menu-item");return e.label=b,e.value=c||b,e.setAttribute("role","option"),d&&e.setAttribute("aria-label",d),e}function r(a,b){a.sort(function(a,c){return a[b]<c[b]?-1:a[b]>c[b]?1:0})}function s(a,b,c){var d,f,k,m,o,p,s,t,u,v,w,y,z=[],A=a.dropdownElement.querySelector("ha-menu");if(0===b.length)return void(A.items=[]);if(t=c?"":j(a).value.toString(),o=a.storeLabelProperty,p="HA-TEXTFIELD-TYPE-AHEAD"===a.tagName?a.storeLabelProperty:a.storeValueProperty,""===t)("HA-SELECT-TYPE-AHEAD"===a.tagName||i.isDesktop())&&b.forEach(function(b){z.push(q(a,b[o],b[p]))});else if("contains"===a.filterMode)for(f=b.length,s=new RegExp(t,"gi"),u=0;u<f;u++)d=b[u],k=d[o],s.test(k)&&(m=k.replace(s,function(a){return g.createElement("span",{className:"type-ahead-strong",innerHTML:a}).outerHTML}),m=g.createElement("span",{innerHTML:m}),y=h.createMenuItemLabelWrapper(a.ownerDocument,[m]),z.push(q(a,y,d[p],k)));if(a._alreadySortedItems||r(z,"textContent"),z.length>x&&t&&"HA-TEXTFIELD-TYPE-AHEAD"===a.tagName&&(z=[].slice.call(z,0,x)),A.items=z,"HA-SELECT-TYPE-AHEAD"===a.tagName&&a.value)for(u=0;u<z.length;u++)d=z[u],d[p]===a.value?d.setAttribute("selected","selected"):d.removeAttribute("selected");i.isHandheld()||z.length>0||0===z.length&&a.addNew?(v=a.dropdownElement,a.disabled||(a.addNew&&e.addMenuItem(a),w=a.querySelector(".search-container"),a.classList.add("menu-expanded"),a._getTriggerElement().setAttribute("aria-expanded","true"),l(v,w))):i.isDesktop()&&n(a)}function t(a){var b;a.keyCode!==f.TAB&&a.keyCode!==f.ENTER&&a.keyCode!==f.ESCAPE&&a.keyCode!==f.SPACEBAR&&(b=k(a.target),b._openedByKeyboard=!0,b._searchOnTimeout())}function u(a){var b="";a.staticItems||(b=a.typedText),a._fetchItems(b,function(){a.emit("items-update")})}function v(a){a.value="",j(a).value="",a._selectedItem=null,a.classList.remove("element-selected")}var w,x=7,y=null;return w=b.createObject(a,{init:function a(){a.super(this),this._openedByKeyboard=!1,this._alreadySortedItems=!1,this._isValueSetByProgram=!0,this._cachedItems=null,this._store=null,this._selectedItem=null,this._addNewPopover=null,this._fetchItems=function(a,b){var c={contains:a};a=a||"",this._alreadySortedItems=!1,this.store&&this.store.query?this.store.query(c).then(function(a){this.staticItems&&(r(a,this.storeLabelProperty),this._alreadySortedItems=!0),this._cachedItems=a,b&&b(this,a)}.bind(this)):console.error("No store defined or 'query' method does not exist on the store. Please set a correct store")},this._getMatchItemValue=function(a,b){var c,d,e,f=j(this),g=b?this.storeLabelProperty:this.storeValueProperty;if(!this.store||!this._cachedItems)return"";for(d=0;d<this._cachedItems.length;d++)if(c=this._cachedItems[d],c[g]===a)return this._selectedItem=c,e=this._selectedItem[this.storeLabelProperty],f.value=e,this.typedText=e,this.classList.add("element-selected"),"HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?e:this._selectedItem[this.storeValueProperty];return""},this._checkAndSetValue=function(){var a=this._getMatchItemValue(this.typedText,!0);this.value&&this.value===this.typedText||(this._isValueSetByProgram=!1,this.value=a,this.value||(this.value="",this.typedText=""))},this._matchAndShowResults=function(a){this.store?a?(this.staticItems&&this._cachedItems||this._fetchItems(j(this).value),s(this,this._cachedItems,!0)):this.staticItems&&this._cachedItems?s(this,this._cachedItems):this._fetchItems(j(this).value,s):console.error("No store defined. Please add a store where items can be retrieved")},this._triggerElementClickListener=function(){var a=this.dropdownElement;this.querySelector("ha-text-field").classList.add("mobile-focused"),this.addNewPopover&&this.addNewPopover.open?c.hide(this.addNewPopover):g.isOpen(a)?g.hidePopoverOrModal(a,c):(this._openedByKeyboard=!1,this._matchAndShowResults(!0)),setTimeout(function(){this.querySelector("ha-text-field").classList.remove("mobile-focused")}.bind(this),500),this.emit("click")},this._searchOnTimeout=function(){var a=250;this._timeOut&&clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){this._matchAndShowResults()}.bind(this),a)},this.setupProperties({label:{default:"",type:String,change:function(a){var b,c=this.querySelector("label"),d=this.querySelector(".action-button"),e=this.querySelector(".search-container ha-text-field"),f=e&&e.querySelector("input");a?(c?f.id=c.getAttribute("for"):(c=this.ownerDocument.createElement("label"),this.insertBefore(c,this.firstElementChild),b=this.localName+"-label-"+this.componentId,c.setAttribute("id",b),c.setAttribute("for",f.id),d&&d.setAttribute("aria-describedby",b)),c.textContent=g.toggleSuffixText(a," *",this.required&&!this.noRequiredIndicator),i.isDesktop()&&f.removeAttribute("aria-label")):(c&&c.parentNode===this&&(this.removeChild(c),d&&d.removeAttribute("aria-describedby")),f.setAttribute("aria-label",this.placeholder||this.typeaheadAriaLabel))}},filterMode:{default:"contains"},storeLabelProperty:{default:"label"},staticItems:{default:!1,type:Boolean,change:function(a){a&&this.store?this._fetchItems():this._cachedItems=null}},name:{default:"",type:String,change:function(a){j(this).name=a}},addNew:{default:!1,type:Boolean},addNewText:{default:"Add New",type:String},value:{default:"",type:String,change:function(a,b){var c,d=j(this),e=!1;if("HA-TEXTFIELD-TYPE-AHEAD"===this.tagName&&(e=!0),a===b)a&&(this.typedText=this._selectedItem[this.storeLabelProperty]);else{if(!this.store||!this._cachedItems)return;a?(this._isValueSetByProgram&&(e?this._getMatchItemValue(a,!0):(c=this._getMatchItemValue(a,!1),c||v(this))),e&&!this.addNew&&(d.value=a)):v(this)}this._isValueSetByProgram=!0}},placeholder:{default:"",change:function(a){i.isHandheld()||(j(this).placeholder=a),a||this.hasAttribute("placeholder")&&this.removeAttribute("placeholder"),i.isHandheld()&&this.dropdownElement&&(this.dropdownElement.subtitle=a)}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){if(a!==b){var c=this.querySelector("label");c&&this.required&&(c.textContent=g.toggleSuffixText(c.textContent," *",!a))}}},required:{default:!1,type:Boolean,change:function(a,b){var c=this.querySelector("label"),e=this.querySelector("input");a!==b&&(c&&(c.textContent=g.toggleSuffixText(c.textContent," *",a&&!this.noRequiredIndicator)),this._validateIgnoreEvent||(this._validateIgnoreEvent=function(){this.reportValidity()}.bind(this)),this._validateUseEvent||(this._validateUseEvent=function(a){this.reportValidity(a)}.bind(this)),a?(d.on(this._menuPopover,"close",this._validateIgnoreEvent),this.on("input:focusout",this._validateUseEvent),e.setAttribute("required",!0),e.setAttribute("aria-required","true")):(d.off(this._menuPopover,"close",this._validateIgnoreEvent),this.off("input:focusout",this._validateUseEvent),e.setAttribute("required",!1),e.removeAttribute("aria-required")),this.handleTooltipBinding(a))}},openItemsOnFocus:{default:!1,type:Boolean},typeaheadAriaLabel:{default:"View Choices",type:String,change:function(a){var b=this.querySelector(".search-container input"),c=this.querySelector("button.action-button span.sr-only");"button"!==b.type&&this.label?c&&(c.textContent=this.placeholder||a):b.setAttribute("aria-label",this.placeholder||a)}}}),this.on("keydown",function(a){var b,c,d,h=a.target,i=this.dropdownElement,k=i.querySelector("ha-menu");switch(a.keyCode){case f.TAB:if("INPUT"===h.tagName&&h.parentElement.classList.contains("search")){if(a.shiftKey){this.value=this.typedText;break}if(g.isOpen(i)&&n(this),d=this._getMatchItemValue(this.typedText,!0),this.addNew){if(this._openedByKeyboard=!0,c=this.typedText,a.shiftKey){this._checkAndSetValue();break}this.value!==this.typedText&&(this._isValueSetByProgram=!1,this.value=d,this.value||(g.stopEvent(a),this.typedText=c,this.addNewPopover._closeOnBlur=!0,e.showPopoverForm(this,this.addNewPopover)))}else if(this._isValueSetByProgram=!1,this.value="HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?d?d:this.typedText:d,a.shiftKey)break}else h===this.querySelector("button.action-button")&&g.isOpen(i)&&(g.stopEvent(a),n(this));break;case f.ESCAPE:g.isOpen(i)&&(g.stopEvent(a),n(this)),j(this).focus();break;case f.DOWN:g.stopEvent(a),g.isOpen(i)?i.classList.contains("position-bottom")&&(b=k.items&&k.items.length>0?k.items[0]:k,b.focus()):(this._openedByKeyboard=!0,this._matchAndShowResults(this));break;case f.UP:g.stopEvent(a),g.isOpen(i)?i.classList.contains("position-top")&&(b=k.items&&k.items.length>0?k.items[k.items.length-1]:k,b.focus()):(this._openedByKeyboard=!0,this._matchAndShowResults(this));break;case f.BACKSPACE:case f.DELETE:"INPUT"===h.tagName&&h.parentElement.classList.contains("search")&&(this._openedByKeyboard=!0,this._searchOnTimeout())}}.bind(this))},postRender:function a(){a.super(this);var b=this.querySelector("div.search-container"),c=j(this),h=i.isHandheld(),k=this.querySelector("ha-menu"),l=this.querySelector((h?"ha-modal":"ha-popover")+".popover-menu-items"),m=this.querySelector("ha-popover-form"),o=this.localName+"-"+this.componentId+"-search-container",p=this.querySelector(".search-container ha-text-field input");b||(b=this.ownerDocument.createElement("div"),b.classList.add("search-container"),c=this.ownerDocument.createElement("ha-text-field"),c.classList.add("search"),b.appendChild(c),p=c.querySelector("input"),this.appendChild(b),k=this.ownerDocument.createElement("ha-menu"),k.classList.add("typeahead-menu"),k.setAttribute("role","listbox"),l=this.ownerDocument.createElement(h?"ha-modal":"ha-popover"),l.targetSelector="#"+o,l.classList.add("popover-menu-items"),l.section=k,h&&this._createPopoverFilterTextField(l),this.appendChild(l)),this.dropdownElement=l,m&&(this.addNewPopover=m.parentNode),b.id=o,l.targetSelector="#"+o,l.postHandleCloseOnBlur=function(a,b){var c,d;a&&b&&(d=a.ownerDocument.activeElement,a.target&&(c=a.target.parentElement),c&&"HA-SELECT-TYPE-AHEAD"===c.tagName&&(b.classList.contains("add-new-menu-item")||a.querySelector("ha-popover-form")||c.contains(d)||c._checkAndSetValue()))},l.postHandleKeydown=function(a){var b;a&&a.target&&(b=a.target.parentElement),!b||"HA-SELECT-TYPE-AHEAD"!==b.tagName&&"HA-TEXTFIELD-TYPE-AHEAD"!==b.tagName||b._textField.focus()},this.listenTo(c,"focus",function(){this.querySelector(".search-container").classList.add("focused"),this._menuPopover&&this._menuPopover.open&&this._menuPopover.close(),this.openItemsOnFocus&&i.isDesktop()&&this._matchAndShowResults()}.bind(this),!0),this.listenTo(c,"click",function(a){a.stopPropagation(),this.disabled||(i.isDesktop()?(a.target.select(),this.querySelector(".search-container").classList.add("focused")):(this._triggerElementClickListener(),this.reportValidity()))}.bind(this),!0),this.listenTo(c,"keypress",t,!0),this.listenTo(c,"keyup",function(a){a.keyCode!==f.ESCAPE&&(this.typedText=c.value)}.bind(this),!0),this.listenTo(this,"blur",function(a){var b=a.target;b===c.querySelector("input")&&this._blurCheck(a)}.bind(this),!0),m&&m.parentNode&&(this.addNewPopover=m.parentNode),this.listenTo(this._menuPopover,"show",function(a){a.stopPropagation()}.bind(this)),this.listenTo(this._menuPopover,"close",function(a){a.stopPropagation(),this.addNew&&this.dropdownElement.querySelector("ha-menu").remove(0),this._getTriggerElement().setAttribute("aria-expanded","false"),this.classList.remove("menu-expanded"),this.reportValidity()}.bind(this)),this.listenTo(this._menuPopover,"hide",function(a){a.stopPropagation()}.bind(this)),d.on(this._menuPopover,"select",function(a){var b,c=this.dropdownElement.querySelector("ha-menu");a.target===c&&(n(this),b=c.selectedItem,this._itemSelected=!0,this.addNew&&b.classList.contains("add-new-menu-item")?(this.addNewPopover._closeOnBlur=!0,e.showPopoverForm(this,this.addNewPopover),this.emit("add-new")):("HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?this.typedText=b.value:this.typedText=b.getAttribute("aria-label"),this.value!==b.value&&(this._isValueSetByProgram=!1,this.value=b.value),this.classList.add("element-selected"),this.dropdownElement.classList.add("element-was-selected"),i.isDesktop()&&j(this).focus(),this.emit("change")))}.bind(this)),this.listenTo(this._menuPopover,"keydown",function(a){a.keyCode===f.TAB&&i.isDesktop()&&(c.focus(),g.stopEvent(a))}.bind(this)),h&&(l.titleText=this.label,l.subtitle=this.placeholder,l.dismissible=!0,l.classList.add("mobile-menu"),l.classList.add("mobile-type-ahead-menu"),l.size="fullscreen",p.type="button",p.setAttribute("aria-label",this.placeholder||this.typeaheadAriaLabel),this.listenTo(l,"will-show",function(){this._savedBodyScrollTop=document.body.scrollTop}.bind(this)),this.listenTo(l,"will-close",function(){document.activeElement&&document.activeElement.blur(),this._savedBodyScrollTop&&(document.body.scrollTop=this._savedBodyScrollTop,this._savedBodyScrollTop=null)}.bind(this)),this.listenTo(l,"close",function(){this.addNewPopover&&this.addNewPopover.open||(p.focus(),setTimeout(function(){document.activeElement===p&&(p.blur(),p.focus())},100))}.bind(this)),this.listenTo(p,"blur",function(a){this._blurCheck(a)}.bind(this)))},_createPopoverFilterTextField:function(a){var b=document.createElement("ha-text-field"),c=document.createElement("form"),d=document.createElement("input"),e=a.querySelector("ha-menu");d.type="submit",d.value="",c.action="#",c.classList.add("typeahead-mobile-form"),c.addEventListener("submit",function(b){b.stopPropagation(),b.preventDefault(),this._saveNewValue=!0,a.close()}.bind(this)),b.setAttribute("autocomplete","off"),b.classList.add("active"),this.listenTo(b,"keyup",function(a){a.keyCode!==f.ESCAPE&&a.keyCode!==f.ENTER&&(this._matchAndShow=!0,this.typedText=b.value)}.bind(this)),this.listenTo(a,"show",function(){this._tempValue=this.typedText,"HA-SELECT-TYPE-AHEAD"===this.tagName?(this._matchAndShow=!0,b.value=this.typedText=""):b.value=this.typedText||""}.bind(this)),this.listenTo(a,"close",function(){this._itemSelected||this._saveNewValue||(this.typedText=this._tempValue),this._itemSelected=!1,this._saveNewValue=!1}.bind(this)),"HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?(c.appendChild(b),c.appendChild(d),e.parentNode.insertBefore(c,e)):e.parentNode.insertBefore(b,e)},detachedCallback:function(){[this._addNewPopover,this._menuPopover].forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)})},get store(){return this._store},set store(a){this._store=a,this._cachedItems=[],this.value="",this.staticItems&&this._fetchItems(),this._store&&this._store.on&&(this._store.on("add",function(){
u(this)}.bind(this)),this._store.on("delete",function(){u(this)}.bind(this)))},get addNewPopover(){return this._addNewPopover},set addNewPopover(a){var b;if(this.addNewPopover&&this.addNewPopover!==a&&this.removeChild(this.addNewPopover),this._addNewPopover=a,a){b=this.querySelector(".search-container").id,a.targetSelector?a.targetSelector="#"+b:a.setAttribute("targetSelector","#"+b),a.classList.add("popover-add-items"),this.appendChild(a);var c=a.querySelector("ha-popover-form");c&&(d.on(c,"save",function(a){g.stopEvent(a),p(this),this.emit("add-new")}.bind(this)),d.on(c,"cancel",function(a){g.stopEvent(a),m(this.addNewPopover)}.bind(this)))}},_getMenuPopover:function(){return this._menuPopover||(this._menuPopover=this.querySelector((i.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},get _textField(){return this.querySelector(".search-container ha-text-field.search")},get typedText(){var a=j(this);return a.value},set typedText(a){var b=j(this);b.value!==a&&(b.value=a),"HA-TEXTFIELD-TYPE-AHEAD"!==this.tagName||this.addNew||(this.value=this.typedText),this._matchAndShow&&(this._matchAndShow=!1,this._matchAndShowResults())},_blurCheck:function(a){var b=k(a.target),c=g.getSafeTargetFromEvent(a);b.querySelector(".search-container").classList.remove("focused"),b.contains(c)||b.dropdownElement.contains(c)||(n(b),"HA-SELECT-TYPE-AHEAD"!==b.tagName||b.addNew&&"addNewName"===c.parentElement.id||b._checkAndSetValue(),b.emit("blur"))},get _inputElement(){return this.querySelector(".search-container ha-text-field.search")._inputElement},get dropdownElement(){return this._menuPopover||(this._menuPopover=this.querySelector((i.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},set dropdownElement(a){this._menuPopover=a},reportValidity:function a(b){if(b&&"blur"===b.type)setTimeout(function(){this._menuPopover&&(this._menuPopover.contains(document.activeElement)||this.contains(document.activeElement))||a.super(this,b)}.bind(this),0);else{a.super(this,b);var c=this.querySelector(".input-error-message"),d=this.querySelector("input");c?(c.setAttribute("id","input-error-message-"+this.componentId),d.setAttribute("aria-describedby","input-error-message-"+this.componentId)):d.removeAttribute("aria-describedby")}}})}),define("hui/select-type-ahead",["register-component/v2/register","object-utils/classes","./typeahead-base","./core/icon","./core/popup","./core/keys","./core/utils","./core/deviceUtils","./popover","./popover-form","./menu","./menu-item","./text-field"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=a.dropdownElement;a.addNewPopover&&a.addNewPopover.open?e.hide(a.addNewPopover):b.open?(e.hide(b),a.querySelector(".search-container ha-text-field input").focus()):(a._openedByKeyboard=!1,a._matchAndShowResults(a)),a.emit("click")}var j;return j=b.createObject(c,{init:function a(){a.super(this),this.validationTarget=this,this.highlightElementSelector=".search input",this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("button.action-button");b&&(b.disabled=a),this.querySelector("ha-text-field.search").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},icon:{default:"",type:String,change:d.onChangeIconProperty},storeValueProperty:{default:"value"},size:{default:7,type:Number,change:function(a){var b=this.dropdownElement.querySelector("ha-menu"),c=!!b.render;c?b.size=a:b.setAttribute("size",a)}}})},postRender:function a(){a.super(this);var b,c,d,e=this.querySelector("button.action-button"),j=this.querySelector("div.search-container"),k=h.isHandheld(),l=this.querySelector((k?"ha-modal":"ha-popover")+".popover-menu-items");h.isDesktop()?(e||(e=this.ownerDocument.createElement("button"),e.type="button",e.classList.add("action-button"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-haspopup","true"),e.setAttribute("tabindex","-1"),b=this.ownerDocument.createElement("span"),b.classList.add("caret"),b.setAttribute("aria-hidden","true"),e.appendChild(b),c=this.ownerDocument.createElement("span"),c.classList.add("caret"),c.setAttribute("aria-hidden","true"),e.appendChild(c),d=this.ownerDocument.createElement("span"),d.classList.add("sr-only"),d.innerHTML=this.placeholder||this.typeaheadAriaLabel,e.appendChild(d),j.appendChild(e)),this.listenTo(e,"click",function(a){this.disabled||(a.stopPropagation(),e.focus(),i(this))}.bind(this)),this.listenTo(e,"focus",function(){this.querySelector(".search-container").classList.add("focused")}.bind(this),!0),this.listenTo(e,"blur",function(a){this._blurCheck(a)}.bind(this),!0),this.listenTo(e,"keydown",function(a){if(a.keyCode===f.SPACEBAR||a.keyCode===f.ENTER)a.target.classList.contains("action-button")&&(g.stopEvent(a),l.open||(this._openedByKeyboard=!0,this._matchAndShowResults(this)));else if(a.keyCode===f.TAB&&!a.shiftKey&&this.typedText!==this.value){var b=this._getMatchItemValue(this.typedText,!0);this._isValueSetByProgram=!1,this.value=b}}.bind(this),!0),this.listenTo(e,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0)):(c=this.ownerDocument.createElement("button"),c.classList.add("hi"),c.classList.add("hi-chevron-down"),c.setAttribute("aria-hidden","true"),this.querySelector("ha-text-field").appendChild(c))},set selectedItem(a){},get selectedItem(){return this._selectedItem},_getTriggerElement:function(){return this.querySelector("button.action-button")||this.querySelector('input[type="button"]')}}),a("ha-select-type-ahead",j)}),define("hui/select",["./validatable/validatable","register-component/v2/register","./core/icon","./core/popup","./core/event","./core/keys","./core/utils","./core/deviceUtils","object-utils/classes","./add-new-helper","./core/menuItemUtils","./core/domObserver","./modal","./popover","./popover-form","./menu","./menu-item","./item"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c){function d(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)d(a),a=a.nextSibling}var e;c=c||a.querySelector("label"),c&&(b?c.textContent=g.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(d(c),e&&(e.textContent=g.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function n(a,b){var c=Array.prototype.slice.call(b.childNodes);for(var d in c)if(c[d].nodeName===a)return c[d];return null}function o(a,b){b.setAttribute("aria-expanded","true"),b.classList.add("active"),h.isHandheld()?a._noAutoFocusLastActiveElementOnClose=!1:(a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0),g.showPopoverOrModal(a,b,d)}function p(a){g.hidePopoverOrModal(a,d)}function q(a,b){g.isOpen(a)&&(b.setAttribute("aria-expanded","false"),g.hidePopoverOrModal(a,d))}function r(a,b,c){var d=a.ownerDocument.createElement("ha-item");return d.label=c,d.value=b,d}function s(a,b){var c=r(a,b,b),d=a.items;d.unshift(c),a.items=d}function t(a){var b,c;return c=a.addNewPopover.querySelector("ha-popover-form"),c.addNewNameSelector?(b=c.querySelector(c.addNewNameSelector),b&&b.value?(g.hidePopoverOrModal(a.addNewPopover,d),s(a,b.value),a.value=b.value,a.classList.add("element-selected"),a.dropdownElement.classList.add("element-was-selected"),b.value="",void a.emit("change")):void g.hidePopoverOrModal(a.addNewPopover,d)):void g.hidePopoverOrModal(a.addNewPopover,d)}function u(a,b){var c=g.getSafeTargetFromEvent(b);this.contains(c)||c===this._menuPopover||this._menuPopover.contains(c)||this._menuPopover.contains(b.target)||(q(this._menuPopover,a),this.emit("blur"))}function v(a,b,c){"function"==typeof c?g.replaceChildrenOf(a,c(b)):a.textContent=b.label||b.textContent}var w,x=!1;return w=i.createObject(a,{createdCallback:function a(){var b;this.hasAttribute("value")&&(b=this.getAttribute("value")),a.super(this),b&&setTimeout(function(){this.value=b}.bind(this),0)},init:function a(){a.super(this),this.validationTarget=this,this.highlightElementSelector=".action-button",this._items=null,this._label="",this._addNewPopover=null,this._boundValidate=this.validate.bind(this),this.setupProperties({size:{default:10,type:Number,change:function(a){var b=this._menu||this.dropdownElement.querySelector("ha-menu"),c=!!b.render;c?b.size=a:b.setAttribute("size",a)}},selectedIndex:{default:-1,type:Number,change:function(a,b){if(a!==b){var c=this._menu||this.dropdownElement.querySelector("ha-menu");a===-1?(c.selectedIndex=-1,this.value=""):this.items&&a>-1&&a<this.items.length&&a!==b?(this.addNew&&this.items.length!==c.items.length?c.selectedIndex=this.selectedIndex+1:c.selectedIndex=this.selectedIndex,c.selectedItem&&(this.value=c.selectedItem.value)):this.selectedIndex=-1}}},name:{default:"",type:String},addNew:{default:!1,type:Boolean},addNewText:{default:"Add New",type:String},value:{default:"",type:String,change:function(a,b){var c,d,e=this._menu||this.dropdownElement.querySelector("ha-menu"),f=!!e.render,g=this.querySelector("span.label");if(!a)return g.textContent=this.placeholder,this.value="",void this.classList.remove("element-selected");if(a!==b){if(!f)return;e.selectedItem&&e.selectedItem.value===a?(d=this.addNew&&this.items.length!==e.items.length?e.selectedIndex-1:e.selectedIndex,c=this.items[d]):this.items.forEach(function(b,e){b.value!==a&&b.getAttribute("value")!==a||(d=e,c=b)},this),c?(this.selectedIndex=d,v(g,c,this.selectedItemRenderer)):(g.textContent=this.placeholder,this.selectedIndex=-1,this.value="",this.classList.remove("element-selected"))}}},disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("button.action-button").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},placeholder:{default:"",change:function(a,b){var c=this.querySelector("button.action-button");a!==b&&(this.value||(h.isDesktop()?this.querySelector("span.label").innerHTML=a:(this.querySelector("span.label").innerHTML="",this.dropdownElement&&(this.dropdownElement.subtitle=a))),this.label||(this.placeholder?c.setAttribute("aria-label",a):c.removeAttribute("aria-label")))}},icon:{default:"",type:String,change:c.onChangeIconProperty},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&m(this)}},required:{default:!1,type:Boolean,change:function(a,b){this._validateIgnoreEvent||(this._validateIgnoreEvent=function(){this.validate()}.bind(this)),a!==b&&(m(this),a!==b&&(a?(this.addNewPopover&&e.on(this.addNewPopover,"close",this._validateIgnoreEvent),e.on(this._menuPopover,"close",this._validateIgnoreEvent)):(this.addNewPopover&&e.off(this.addNewPopover,"close",this._validateIgnoreEvent),e.off(this._menuPopover,"close",this._validateIgnoreEvent))),this.handleTooltipBinding(a),this.querySelector("button.action-button").setAttribute("aria-required",a))}},noFocusBackOnSelect:{default:!1,type:Boolean},selectButtonAriaLabel:{default:"View Choices",type:String,change:function(a){var b=this.querySelector("button.action-button");b&&b.setAttribute("aria-label",this.placeholder||a)}}})},_getTargetSelectorId:function(){return this.localName+"-target-"+this.componentId},postRender:function a(){a.super(this);var b,c,i,k,l,m,p,r=this.querySelector("button.action-button"),s=this.querySelector("ha-label"),t=h.isHandheld(),v=this.querySelector("ha-popover-form"),w=this._getTargetSelectorId(),y=function(a){this.disabled||(a.stopPropagation(),this.classList.add("mobile-focused"),r.focus(),this.addNewPopover&&this.addNewPopover.open?g.hidePopoverOrModal(this.addNewPopover,d):g.isOpen(i)?q(i,r):(this.addNew&&j.addMenuItem(this),o(i,r),x=!1,this.emit("click")),setTimeout(function(){this.classList.remove("mobile-focused")}.bind(this),500))}.bind(this);r||(r=this.ownerDocument.createElement("button"),r.type="button",r.className="action-button no-connector ha-input",r.id=w,r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-label",this.placeholder||this.selectButtonAriaLabel),b=this.ownerDocument.createElement("span"),b.classList.add("label"),r.appendChild(b),t||(k=this.ownerDocument.createElement("span"),k.classList.add("caret"),k.setAttribute("aria-hidden","true"),r.appendChild(k)),l=this.ownerDocument.createElement("span"),l.setAttribute("aria-hidden","true"),h.isDesktop()?l.classList.add("caret"):(l.classList.add("hi"),l.classList.add("hi-chevron-down")),r.appendChild(l),this.appendChild(r),m=this.ownerDocument.createElement("ha-menu"),m.setAttribute("role","listbox"),i=this.ownerDocument.createElement(t?"ha-modal":"ha-popover"),i.targetSelector="#"+w,i.classList.add("popover-menu-items"),i.section=m,t&&(i.dismissible=!0),h.isHandheld()&&(i.dismissible=!0),this.appendChild(i)),this._menuPopover=i=i||this.querySelector((t?"ha-modal":"ha-popover")+".popover-menu-items"),t&&(i.classList.add("mobile-menu"),i.size="fullscreen"),this._menu=m,this.items=Array.prototype.slice.call(this.querySelectorAll("ha-item")),p=this.getAttribute("label"),s?s&&(t?this.label=s.textContent:this.label=Array.prototype.slice.call(s.childNodes)):p&&(this.label=p),t&&(i.titleText=this.label,i.subtitle=this.placeholder),this.listenTo(r,"click",y),h.isHandheld()&&(c=n("LABEL",this))&&this.listenTo(c,"click",y),this.listenTo(r,"keydown",function(a){var b;switch(a.keyCode){case f.TAB:case f.ESCAPE:i.open&&(g.stopEvent(a),q(i,r),r.focus());break;case f.SPACEBAR:case f.ENTER:g.stopEvent(a),i.open||(this.addNew&&j.addMenuItem(this),x=!0,o(i,r));break;case f.DOWN:g.stopEvent(a),i.open?i.classList.contains("position-bottom")&&(b=m.items&&m.items.length>0?m.items[0]:m,b.focus()):(this.addNew&&j.addMenuItem(this),x=!0,o(i,r));break;case f.UP:g.stopEvent(a),i.open?i.classList.contains("position-top")&&(b=m.items&&m.items.length>0?m.items[m.items.length-1]:m,b.focus()):(this.addNew&&j.addMenuItem(this),x=!0,o(i,r))}}.bind(this),!0),this.listenTo(r,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0),this._addNewPopover&&(this._addNewPopover.targetSelector="#"+this.querySelector("button.action-button").id),v&&v.parentNode&&(this.addNewPopover=v.parentNode),i||(this.addNewPopover?Array.prototype.forEach.call(this.querySelectorAll("ha-popover"),function(a){a!==this.addNewPopover&&a.querySelector("ha-menu")&&(i=this._menuPopover=a)}.bind(this)):i=this._menuPopover=this.querySelector("ha-popover")),m=i.querySelector("ha-menu"),this.listenTo(m,"click",function(a){"ha-menu-item"===a.target.localName&&a.stopPropagation()}.bind(this)),this.listenTo(m,"select",function(a){if(a.target===m){a.stopPropagation();var b=this.querySelector("button.action-button");this.addNew&&m.selectedItem.classList.contains("add-new-menu-item")?(this.addNewPopover._closeOnBlur=!0,m.selectedIndex=-1,j.showPopoverForm(this,this.addNewPopover),this.emit("add-new")):(this.selectedIndex=this.addNew&&this.items.length!==m.items.length?a.target.selectedIndex-1:a.target.selectedIndex,this.classList.add("element-selected"),this.dropdownElement.classList.add("element-was-selected"),a.detail&&a.detail.selectedByClickOrKeyboard&&!this.noFocusBackOnSelect?this._focusOnNextClose=!0:b.classList.remove("active"),this.emit("change")),q(i,b)}}.bind(this)),e.on(i,"show",function(a){a.stopPropagation(),x&&m.selectedItem&&m.selectedItem.focus()}.bind(this)),e.on(i,"close",function(a){a.stopPropagation(),this._focusOnNextClose&&(r.focus(),this._focusOnNextClose=!1),this.addNew&&m.remove(0),r.classList.remove("active")}.bind(this)),e.on(i,"hide",function(a){a.stopPropagation()}.bind(this)),e.on(i,"blur",u.bind(this,r),!0),this.listenTo(r,"blur",u.bind(this,r),!0),e.on(i,"keydown",function(a){if(!this.disabled){var b=a.target;switch(a.keyCode){case f.TAB:case f.ESCAPE:(h.isDesktop()||a.keyCode===f.ESCAPE)&&i.open&&(g.stopEvent(a),q(i,r),r.focus());break;case f.ENTER:case f.SPACEBAR:"HA-MENU"===b.tagName&&(g.stopEvent(a),x=!0,this.addNew&&j.showPopoverForm(this,this.addNewPopover))}}}.bind(this))},attachedCallback:function(){this._bindHandle=l.bindChildrenChanges(this,"ha-item",this,"items")},detachedCallback:function(){[this._addNewPopover,this._menuPopover].forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)}),this._bindHandle&&(this._bindHandle.remove(),this._bindHandle=null)},set label(a){var b,c,d=function(a,b){var c=Array.prototype.slice.call(b.childNodes);for(var d in c)if(c[d].nodeName===a)return c[d];return null},e=this.querySelector(".action-button"),f=d("LABEL",this),g=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(this.removeChild(g),f=d("LABEL",this)),f||(f=this.ownerDocument.createElement("label"),this.insertBefore(f,e)),m(this,a,f),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),f=d("LABEL",this),f&&!g?this.removeChild(f):g&&this.removeChild(g),f=this.ownerDocument.createElement("label"),g=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){f.appendChild(a)}),g.appendChild(f),this.insertBefore(g,this.firstElementChild),m(this)),c=this.localName+"-label-"+this.componentId,f.setAttribute("id",c),e.setAttribute("aria-describedby",c),e.hasAttribute("aria-label")&&e.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),e.removeAttribute("aria-describedby"),f=d("LABEL",this),g=this.querySelector("ha-label"),g?this.removeChild(g):f&&this.removeChild(f),this.placeholder?e.setAttribute("aria-label",this.placeholder):e.removeAttribute("aria-label")),this._label=a},get label(){return this._label},get selectedItem(){return Array.isArray(this.items)&&this.selectedIndex>-1?this.items[this.selectedIndex]:null},set selectedItem(a){},get items(){return this._items},set items(a){var b,c,d,e=this.dropdownElement.querySelector("ha-menu"),f=!!e.render;if(this._bindHandle&&this._bindHandle.pause(),d=Array.prototype.slice.call(this.querySelectorAll("ha-item")),d.forEach(function(a){this.removeChild(a)}.bind(this)),f)for(;e.items.length>0;)e.remove(0);else b=Array.prototype.slice.call(e.querySelectorAll("ha-menu-item")),b.forEach(function(a){e.removeChild(a)}.bind(this));Array.isArray(a)&&a.forEach(function(a,b){this.insertBefore(a,this._getFirstNonItemChild()),c=k.createMenuItem(a,{role:"option"},this.itemRenderer,this.ownerDocument),f?e.add(c,b):e.appendChild(c)},this),this._items=a,this.selectedIndex=-1,this._bindHandle&&this._bindHandle.resume()},get addNewPopover(){return this._addNewPopover},set addNewPopover(a){var b;if(this.addNewPopover&&this.addNewPopover!==a&&this.removeChild(this.addNewPopover),this._addNewPopover=a,a){b=this.querySelector("button.action-button").id,a.targetSelector?a.targetSelector="#"+b:a.setAttribute("targetSelector","#"+b),a.classList.add("popover-add-items"),a.parentElement!==this&&this.appendChild(a);var c=a.querySelector("ha-popover-form");c&&(e.on(c,"save",function(a){g.stopEvent(a),t(this),this.emit("add-new")}.bind(this)),e.on(c,"cancel",function(a){g.stopEvent(a),p(this.addNewPopover)}.bind(this)))}},get dropdownElement(){return this._menuPopover||(this._menuPopover=this.querySelector((h.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},set dropdownElement(a){this._menuPopover=a},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},_getMenuPopover:function(){return console.info("_getMenuPopover should be deprecated in favor of .dropdownElement"),this.dropdownElement},validate:function(a){return this.reportValidity(a)},reportValidity:function a(b){return b&&"blur"===b.type?void setTimeout(function(){this._menuPopover&&(this._menuPopover.contains(document.activeElement)||this.contains(document.activeElement))||a.super(this,b)}.bind(this),0):a.super(this,b)},_getFirstNonItemChild:function(){return Array.prototype.slice.call(this.children).filter(function(a){return"HA-ITEM"!==a.tagName})[0]}}),b("ha-select",w)}),define("hui/single-step",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/popup","./core/tooltip","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g){"use strict";function h(a){for(var b=a.target;"HA-SINGLE-STEP"!==b.tagName;)b=b.parentElement;b.emit("dismiss"),b.close()}function i(a){var b=a.target;setTimeout(b._hideCallback,b.duration)}function j(a,b){var c,d,e,g=!1,h=a.querySelector(".single-step-title");if(b&&(g=b.singleStepTitleText||b.getAttribute("singleStepTitleText")),e=g?g:a.titleText){for("string"==typeof e&&(e=[a.ownerDocument.createTextNode(e)]),c=h.childNodes.length,d=0;d<c;d++)h.removeChild(h.childNodes[0]);h.innerHTML="",f.appendChildCollection(h,e)}}function k(a,b){var c,d,e,g=!1,h=a.querySelector(".single-step-inner");if(b&&(g=b.singleStepMessage||b.getAttribute("singleStepMessage")),e=g?g:a.message){for("string"==typeof e&&(e=[a.ownerDocument.createTextNode(e)]),c=h.childNodes.length,d=0;d<c;d++)h.removeChild(h.childNodes[0]);h.innerHTML="",f.appendChildCollection(h,e)}}var l,m=null;return l=a.createObject(b,{init:function a(){a.super(this),this._listenersTargets=[],this._titleText="",this._message="",this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this._open=!0,this.setupProperties({_alignment:{default:"left"},open:{default:!0,type:Boolean,change:function(a){a!==this._open&&(this._open=a,this._open?this.show():this.close())}},targetSelector:{default:"_previousSibling",change:function(a){e.removeOldListeners(this),e.setTooltipTargets(this,a),e.resetListeners(this,this.trigger)}},position:{default:"top"},dismissible:{type:Boolean,default:!1,change:function(a){a?(this.classList.add("dismissible"),this.on("button:click",h)):(this.classList.remove("dismissible"),this.off("button:click",h)),e.resetTooltipDismissal(this)}},trigger:{default:"hover",change:function(a){e.resetListeners(this,a)}},duration:{default:0,change:function(a){a>0?this.on("show",i):this.off("show",i),e.resetTooltipDismissal(this)}},attributeChangedCallback:function a(b,c,d){"open"===b?this.open=d:a.super(this,b,c,d)}})},createdCallback:function a(){var b;a.super(this),b=f.getAnimationEventNames(),this.on(b.animationend,function(a){var b=a.target;switch(a.animationName){case"ha-fade-in":b.classList.remove("enter"),b.emit("show");break;case"ha-fade-out":b.classList.remove("leave"),b.classList.remove("visible"),b.emit("close"),d.clearPosition(b)}})},attachedCallback:function(){this._attached||(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger),j(this,this._listenersTargets[0]),k(this,this._listenersTargets[0]),this._open&&this.show())},postRender:function a(){var b,c,d,e,h,i,j,k,l;a.super(this),g.addA11yFocus(this),this.hasAttribute("titleText")?h=this.getAttribute("titleText"):(j=this.querySelector(".single-step-title"),h=j?f.removeNodesSafe(j,j.childNodes):f.removeNodesSafe(this,this.children)),this.hasAttribute("message")?i=this.getAttribute("message"):(k=this.querySelector(".single-step-inner"),i=k?f.removeNodesSafe(k,k.childNodes):f.removeNodesSafe(this,this.children)),b=this.querySelector("div.single-step-container"),c=this.querySelector("div.single-step-bar"),d=this.querySelector("div.single-step-title"),e=this.querySelector("div.single-step-inner"),l=this.querySelector("button.btn-container"),this.style.minWidth="1px",b||(b=this.ownerDocument.createElement("div"),b.className="single-step-container",l=this.ownerDocument.createElement("button"),l.className="hi hi-close btn-icon-only",b.appendChild(l),c=this.ownerDocument.createElement("div"),c.className="single-step-bar",b.appendChild(c),d=this.ownerDocument.createElement("div"),d.className="single-step-title",b.appendChild(d),e=this.ownerDocument.createElement("div"),e.className="single-step-inner",b.appendChild(e),this.appendChild(b)),this.titleText=h,this.message=i},get titleText(){return this._titleText},set titleText(a){this._titleText=a,j(this)},get message(){return this._message},set message(a){this._message=a,k(this)},get open(){return this._open},set open(a){a!==this._open&&(this._open=a,this._open?this.show():this.close())},show:function(a){var b,c,e,f,g,h,i=17,l=this.classList.contains("visible"),n=a?a.currentTarget:null,o=[];if(n||(n=this._listenersTargets[0]),n){if(j(this,n),k(this,n),!m||!n.isEqualNode(m))for(m=n,o=this.ownerDocument.querySelectorAll("ha-single-step.visible"),h=0;h<o.length;h++)b=o[h],b.close();if(e=this.position.split(" "),f=new Array(e[0]),g=e[1]?new Array(e[1]):new Array(this._alignment),l&&this.classList.contains("leave")&&(this.classList.remove("leave"),d.clearPosition(this)),c=this.className.indexOf("position-")>-1,!c){if(!d.setPosition(this,n,f,g,i))return;this._resizeMethod=d.installResizeMethod(this,n,f,g,i)}l||(this.classList.add("visible"),this._open=!0)}},close:function(){this._timed&&(clearTimeout(this._timed),delete this._timed),this.classList.contains("visible")&&(this.classList.add("leave"),m=null,this._resizeMethod&&(d.uninstallResizeMethod(this._resizeMethod),this._resizeMethod=null),this._open=!1)}}),c("ha-single-step",l)}),define("hui/combo-link",["object-utils/classes","register-component/v2/register","./menu/menu-based-buttons","./core/utils"],function(a,b,c,d){"use strict";var e=a.createObject(c,{_renderTriggerElement:function(){var a,b,c,d,e;return a=this.ownerDocument.createElement("button"),a.type="button",a.className="btn btn-link",b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),c=this.ownerDocument.createElement("button"),c.type="button",c.className="btn hi-icon-button btn-link no-connector",c.id=this._getTargetSelectorId(),c.setAttribute("aria-expanded","false"),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-label",this.label+" menu"),d=this.ownerDocument.createElement("span"),d.className="caret",c.appendChild(d),e=this.ownerDocument.createElement("div"),e.className="btn-group",e.appendChild(a),e.appendChild(c),this.appendChild(e),c},_getTriggerElement:function(){return this.querySelector("button.hi-icon-button")},attachedCallback:function a(){a.super(this);var b,c;b=this.querySelector(".btn-group > button"),this.listenTo(b,"click",function(a){d.stopEvent(a),this.emit("click")}.bind(this)),c=b.querySelector("span.label"),this.listenTo(c,"click",function(a){d.stopEvent(a);var b=this.dropdownElement;b.open&&b.close(),this.emit("click")}.bind(this))}});return b("ha-combo-link",e)}),define("hui/combo-button",["object-utils/classes","register-component/v2/register","./menu-button","./core/utils"],function(a,b,c,d){"use strict";var e,f=["ha-button-default","ha-button-primary","ha-button-dark"];return e=a.createObject(c.prototype,{_transferButtonClasses:function a(){a.super(this);var b=this.querySelector(".combo-button-action"),c=this._getTriggerElement();b&&c&&(f.forEach(function(a){c.classList.contains(a)&&b.classList.add(a)},this),this.listenTo(b,"click",function(a){d.stopEvent(a),this.dropdownElement.close(),this.emit("click")}.bind(this)))},_renderTriggerElement:function(){var a,b,c,d;return a=this.ownerDocument.createElement("button"),a.type="button",a.className="ha-button combo-button-action",b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),this.appendChild(a),c=this.ownerDocument.createElement("button"),c.type="button",c.className="ha-button combo-button-dropdown no-connector",c.id=this._getTargetSelectorId(),c.setAttribute("aria-expanded","false"),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-label",this.label+" menu"),d=this.ownerDocument.createElement("span"),d.className="caret",c.appendChild(d),this.showCaret=!0,this.appendChild(c),c},_getTriggerElement:function(){return this.querySelector("button.ha-button.combo-button-dropdown")},_resize:function(a,b){if(b.isDesktop!==a.isDesktop){var c,d=this.querySelector("ha-modal")||this.querySelector("ha-popover");d&&d.parentNode.removeChild(d),c=b.isDesktop?[this.querySelector("button.ha-button.combo-button-dropdown"),this.querySelector("button.ha-button.combo-button-action")]:[this.querySelector("button.ha-button.no-connector")],c.forEach(function(a){f.forEach(function(b){a.classList.contains(b)&&this.classList.add(b)},this),a.parentNode.removeChild(a)},this),this.postRender(),this._transferButtonClasses(),this._initBoundProperties()}}}),b("ha-combo-button",e)}),define("hui/simple-list",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/keys","./core/utils"],function(a,b,c,d,e){var f=function(a){var b=[];return a.childElementCount>=0&&(b=e.removeNodesSafe(a,a.childNodes)),b},g=function(a){var b,c,d=0,e=0;if(a&&a.parentNode){for(b=a.parentNode.childNodes;(c=b.item(e++))&&c!==a;)1===c.nodeType&&d++;return d}return-1},h=49,i=c.createObject(b,{init:function a(){a.super(this),this._selectedItem=null,this._items=[],this.setupProperties({complexity:{default:"basic",type:String},selectedIndex:{default:-1,type:Number,change:function(a){[].forEach.call(this.querySelectorAll("li"),function(b,c){c===a?(b.classList.add("ha-active"),b.setAttribute("aria-selected",!0),this._selectedItem=b):(b.classList.remove("ha-active"),b.setAttribute("aria-selected",!1))}.bind(this)),this.emit("select")}},size:{type:Number,change:function(a){var b=this.querySelector("ul");a?(b.style.maxHeight=a*h+"px",b.style.overflowY="auto"):(b.style.maxHeight="none",b.style.overflowY="hidden")}},titleText:{default:"",change:function(a,b){var c,d=this.querySelector("h2");b!==a&&(d?d.innerHTML=a:(c=this.querySelector("ul"),d=this.ownerDocument.createElement("h2"),d.id="ha-list-header-"+this.componentId,d.innerHTML=a,this.insertBefore(d,c)))}}}),this.on(".list-group:keydown",function(a){var b,c=a.target;if(a.keyCode!==d.TAB){if(c&&c.classList.contains("list-group"))return void c.firstChild.focus();for(;c&&!c.classList.contains("list-group-item");)c=c.parentNode;switch(e.stopEvent(a),a.keyCode){case d.UP:c.previousSibling?(b=c.previousSibling,b.focus(),this.selectedIndex=g(b)):(b=c.parentNode.lastChild,b.focus(),this.selectedIndex=g(b));break;case d.DOWN:c.nextSibling?(b=c.nextSibling,b.focus(),this.selectedIndex=g(b)):(b=c.parentNode.firstChild,b.focus(),this.selectedIndex=g(b));break;case d.ENTER:case d.SPACEBAR:this.selectedIndex=g(c)}}}.bind(this)),this.on(".list-group-item:click",function(a){this.emit("click"),e.stopEvent(a);for(var b=a.target;b&&!b.classList.contains("list-group-item");)b=b.parentNode;b&&(this.selectedIndex=g(b))}.bind(this))},set items(a){var b,c,d,e=this.querySelector(".list-group");a&&a.length>0&&(e.innerHTML="",this._items=[],[].forEach.call(a,function(a){a.classList.add("list-group-item"),a.tabIndex=-1,b=f(a),b.forEach(function(b){b.data?(c=this.ownerDocument.createElement("span"),c.innerHTML=b.data,a.setAttribute("aria-selected",!1),a.appendChild(c)):(d=this.ownerDocument.createElement("span"),d.classList.add("control"),d.appendChild(b),a.appendChild(d)),this._items.push(a)},this),e.appendChild(a)}.bind(this)),this.getAttribute("size")||(this.size=this._items.length))},get items(){return this._items},set selectedItem(a){},get selectedItem(){return this._selectedItem},postRender:function a(){a.super(this);var b,c,d=null!==this.querySelector(".list-group-item"),e=this.getAttribute("size");d||(b=this.querySelector(".list-group"),b||(b=this.ownerDocument.createElement("ul"),b.tabIndex=0,b.classList.add("list-group"),this.appendChild(b)),b.setAttribute("aria-labelledby","ha-list-header-"+this.componentId),c=this.querySelectorAll("li")||[],this.items=c,!e&&c.length>0&&(this.size=c.length),this.setAttribute("complexity","basic"))}});return a("ha-list",i)}),define("text!hui/flyout/flyout.html",[],function(){return'<template>\n  <div class="header-bar">\n    <span class="flyout-tip"></span>\n  </div>\n  <div class="flyout-content-wrapper">\n    <div class="flyout-side-panel-wrapper"></div>\n    <section class="flyout-content">\n    </section>\n  </div>\n</template>'}),define("hui/flyout",["register-component/v2/register","object-utils/classes","./core/contentNode","./core/popup","./core/utils","./core/a11y","./core/keys","./core/Viewport","register-component/template!./flyout/flyout.html","register-component/v2/UIComponent"],function(a,b,c,d,e,f,g,h,i,j){
"use strict";function k(a){var b=a.animationName,c=a.target;"ha-fade-in"===b?(c.classList.remove("enter"),c.emit("show")):"ha-fade-out"===b&&(c.classList.remove("visible"),c.classList.remove("leave"),c.emit("close"))}function l(a){var b=a.target,c=b.querySelector(".flyout-tip"),d=n(b);"ha-fade-in"!==a.animationName&&"more"!==a.type&&"less"!==a.type||(b.style.top=parseInt(b.style.top,10)+7+"px",c.style.left=d.offsetLeft-b.offsetLeft+d.offsetWidth/2-c.offsetWidth/2+"px")}function m(a){var b=e.getComponentFromElement(a.target,"HA-FLYOUT");"HA-FLYOUT"===b.tagName&&e.stopEvent(a),b.contains(e.getSafeTargetFromEvent(a))&&b.contains(document.activeElement)&&document.activeElement!==a.target||b.close()}function n(a){var b;return"_previousSibling"===a.targetSelector?(a._button||(a._button=a.previousElementSibling),b=a._button):b=a.querySelector(a.targetSelector),b}function o(a){var b,c=e.getComponentFromElement(a.target,"HA-FLYOUT"),h=c.querySelector(".flyout-more"),i=c.querySelector(".flyout-less"),j=c.querySelector(".show-more");"click"!==a.type&&a.keyCode!==g.ENTER||(a.preventDefault(),h.classList.contains("hidden")?(i.classList.add("hidden"),h.classList.remove("hidden"),j.classList.add("show-less"),j.querySelector("span").innerHTML=c.lessText,b="more"):(h.classList.add("hidden"),i.classList.remove("hidden"),j.classList.remove("show-less"),j.querySelector("span").innerHTML=c.moreText,b="less"),d.setPosition(c,n(c),t,u),c.emit(b,{target:c}),f.setFocusOnAnyFirst(c.querySelector(".flyout-content")))}function p(a,b){a.classList.contains("visible")?a.close():a.show(b)}function q(a){d.setPosition(a,n(a),t,u),l({target:a,animationName:"ha-fade-in"})}function r(a){var b,c,d,f,g,h,i=a.querySelectorAll("ha-menu-item, th"),j=a.querySelector(".flyout-side-panel td"),k=a.querySelectorAll(".flyout-content td"),l=k.length,m=i.length,n=0,o=document.createElement("canvas");for(b=getComputedStyle(i[0]),g=b.fontSize+" "+b.fontFamily,c=0;c<m;c++)d=i[c].textContent,h=e.getTextWidth(d,g,o),h>n&&(n=h);for(f=getComputedStyle(i[0].parentElement),c=0;c<l;c++)k[c].style.width=n+w+"px";j&&(j.style.width=n+v+"px")}var s,t=["bottom"],u=["center"],v=59,w=40,x={section:"section"},y=b.createObject(j,{init:function a(){a.super(this),this.template=i,this._attached=!1,c.cacheInputContent(this,x),this.setupProperties({titleText:{default:"",change:function(a){var b=this.querySelector("h3"),c=this.querySelector(".flyout-content");b?b.innerHTML=a:(b=this.ownerDocument.createElement("h3"),b.innerHTML=a,c.insertBefore(b,c.firstElementChild)),b.id="flyout-title-"+this.componentId}},moreText:{default:"More",change:function(a){var b,c=this.querySelector(".show-more");c&&!c.classList.contains("show-less")&&(b=c.querySelector("span"),b.innerHTML=a)}},lessText:{default:"Less",change:function(a){var b,c=this.querySelector(".show-more");c&&c.classList.contains("show-less")&&(b=c.querySelector("span"),b.innerHTML=a)}},targetSelector:{default:"_previousSibling"}})},set section(a){var b=this.querySelector(".flyout-content"),c=b.children,d=this.querySelector("h3");c.length>0&&e.removeNodesSafe(b,c),d&&b.appendChild(d),Array.isArray(a)?a.forEach(function(a){b.appendChild(a)}):b.appendChild(a)},get section(){return this.querySelector(".flyout-content")},attachedCallback:function(){if(!this._attached){this._attached=!0;var a,b,c,d=n(this),f=this.querySelector(".flyout-side-panel"),h=this.querySelector(".flyout-side-panel-wrapper"),i=this.querySelector(".flyout-more"),j=this.querySelector(".flyout-content"),k=this.querySelector("ha-menu");d&&"BUTTON"===d.tagName?(this.listenTo(d,"click",function(a){a.preventDefault(),p(this,a)}.bind(this)),this.listenTo(d,"keypress",function(a){a.keyCode===g.ENTER&&(a.preventDefault(),p(this,a))}.bind(this))):console.warn("Flyout must have at least a button as previous sibling"),f&&(this.classList.add("ha-flyout-side-panel"),e.removeNodesSafe(this,f),h.appendChild(f),r(this)),i&&(j.classList.add("clearfix"),i.classList.add("hidden"),c=this.querySelector("button.show-more"),c||(c=this.ownerDocument.createElement("button"),c.tabIndex=0,c.classList.add("show-more"),a=this.ownerDocument.createElement("i"),a.className="show-more-arrow",c.appendChild(a),b=this.ownerDocument.createElement("span"),b.innerHTML=this.moreText,c.appendChild(b),j.appendChild(c)),this.on(".show-more:click",o),this.on(".show-more:keypress",o),r(i)),j.children.length>1&&!f&&!i&&!k&&(this.classList.add("flyout-non-menu"),j.tabIndex=-1),this.setAttribute("aria-labelledby","flyout-title-"+this.componentId)}},show:function(a){var b=n(this),c=this.querySelectorAll("ha-menu");c.length&&c[0].tabIndex===-1&&[].forEach.call(c,function(a){a.tabIndex=0}),d.setPosition(this,b,t,u)&&(this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible")),s=a?a.type:null,this._resizeMethod=function(){q(this)}.bind(this),h.onResize(this._resizeMethod),this.focus()},close:function(){this.classList.add("leave"),n(this).focus()},preRender:function a(){a.super(this)},createdCallback:function a(){var b=e.getAnimationEventNames(),c=b.animationend,f=b.animationstart;a.super(this),this.listenTo(this,"blur",function(a){setTimeout(function(){m(a)},1)},!0),this.on(f,l),this.on("more",l),this.on("less",l),this.on(c,k),this.on("close",function(){d.uninstallResizeMethod(this._resizeMethod)}),this.on("keydown",function(a){g.ESCAPE===a.keyCode&&(e.stopEvent(a),this.close())})},postRender:function a(){a.super(this),c.storeCachedInput(this,x),this.tabIndex=-1}});return a("ha-flyout",y)}),define("text!hui/money-bar/money-bar.html",[],function(){return'<template>\n    <div class="segments">\n    </div>\n</template>'}),define("text!hui/money-bar-cell/money-bar-cell.html",[],function(){return'<template>\n    <div class="money-bar-block"></div>\n    <div class="money-bar-text">\n    \t<span class="primary-text">{{primaryText}}</span>\n    \t<span class="secondary-text">{{secondaryText}}</span>\n    \t<span class="close-icon" tabindex="-1" aria-label="Close" role="button"> &#xf061;</span>\n    </div>\n</template>'}),define("hui/money-bar-cell",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar-cell/money-bar-cell.html","./core/keys","object-utils/classes"],function(a,b,c,d,e){var f=e.createObject(a,{init:function a(){a.super(this),this.template=c,this.mbcells=null,this.setupProperties({primaryText:{default:"",change:function(a){var b=this.querySelector(".primary-text"),c=this.querySelector(".money-bar-text"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("primary-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.primaryText=b)}},secondaryText:{default:"",change:function(a){var b=this.querySelector(".secondary-text"),c=this.querySelector(".money-bar-text"),d=c.querySelector(".close-icon");a&&(b||(b=document.createElement("span"),b.classList.add("secondary-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.secondaryText=b)}},state:{default:"deselected",change:function(a){var b=this._nodes.mbBlock,c=this.querySelector(".close-icon");this.state!==b.state&&("deselected"===a?(b.state=a,this.classList.remove("click"),c.setAttribute("tabindex","-1"),this.emit("deselected",{target:this})):"selected"===a?(b.state=a,this.classList.add("click"),c.setAttribute("tabindex","0"),this.emit("selected",{target:this})):this.state=b.state)}}}),this.listenTo(this,"mouseenter",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"mouseleave",function(a){this._eventRemoveClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focusin",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focus",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focusout",function(a){this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1")}.bind(this)),this.listenTo(this,"blur",function(a){this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1")}.bind(this)),this.listenTo(this,"click",function(a){a.preventDefault(),a.stopPropagation(),"selected"===this.state?(this.state="deselected",this.classList.remove("inlay-select"),this._eventRemoveClass("click","inlay-select",a),this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1"),this.blur()):(this.state="selected",this.setAttribute("tabindex","0"),this.focus(),this._eventAddClass("click","inlay-select",a))}.bind(this)),this.listenTo(this,".close-icon:keydown",function(a){if(a.keyCode===d.ENTER){var b=this.nextElementSibling;this.state="deselected",this.classList.contains("outlay")&&null!==b&&b.classList.contains("inlay")&&b.classList.remove("inlay-select"),a.stopPropagation(),this.style.outline="1px dotted #212121",this.style.outline="-webkit-focus-ring-color auto 5px",this.focus()}else a.keyCode===d.TAB&&(a.stopPropagation(),a.preventDefault(),this.style.outline="1px dotted #212121",this.style.outline="-webkit-focus-ring-color auto 5px",this.focus())}.bind(this))},postRender:function(){var a=this.querySelector(".primary-text"),b=this.querySelector(".secondary-text"),c=this.querySelector(".money-bar-block");this._nodes={},this._nodes.mbBlock=c,this._nodes.primaryText=a,this._nodes.secondaryText=b,this.setAttribute("tabindex","-1"),this.setAttribute("role","menuitem"),this.setAttribute("id","ha-money-bar-cell-"+this.componentId)},_eventAddClass:function(a,b,c){this.classList.add(a);var d=this.nextElementSibling;this.classList.contains("outlay")&&null!==d&&d.classList.contains("inlay")&&d.classList.add(b),c.stopPropagation()},_eventRemoveClass:function(a,b,c){this.classList.remove(a);var d=this.nextElementSibling;this.classList.contains("outlay")&&null!==d&&d.classList.contains("inlay")&&d.classList.remove(b),c.stopPropagation()}});return b("ha-money-bar-cell",f)}),define("text!hui/money-bar-segment/money-bar-segment.html",[],function(){return'<template>\n\t<h4 class="segment-header">\n\t\t<span class="segment-text-bold">{{titleTextBold}}</span>\n\t\t<span class="segment-text">{{titleText}}</span>\n\t</h4>\n    <div class="cells">\n    </div>\n</template>'}),define("hui/money-bar-segment",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar-segment/money-bar-segment.html","./core/utils","object-utils/classes"],function(a,b,c,d,e){var f=e.createObject(a,{init:function a(){a.super(this),this.template=c,this._cells=null,Object.defineProperty(this,"cells",{set:function(a){var b=this.querySelector(".cells"),c=this.querySelector(".segment-header");b&&(b.innerHTML="",a.forEach(function(a){a.setAttribute("aria-describedby",c.id),b.appendChild(a)})),this._cells=a}}),this.setupProperties({titleTextBold:{default:"",change:function(a){var b=this.querySelector(".segment-text-bold"),c=this.querySelector(".segment-header"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("segment-text-bold"),c.insertBefore(b,d)),b.textContent=a,this._nodes.titleTextBold=b)}},titleText:{default:"",change:function(a){var b=this.querySelector(".segment-text"),c=this.querySelector(".segment-header"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("segment-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.titleText=b)}},size:{default:"2",change:function(a){var b=this._nodes.cellContainer;this.size!==b.size&&(b.size=a,this.style.flex=a+" 0 auto",this.style["-webkit-flex"]=a+" 0 auto")}}})},preRender:function(){var a,b=this.querySelector(".cells");a=this.querySelectorAll("ha-money-bar-cell"),b?this.cells=Array.prototype.map.call(a,function(a){return a}):this.cells=d.removeNodesSafe(this,a)},postRender:function a(){a.super(this);var b=this.querySelector(".cells"),c=this.querySelector(".segment-header"),d=this.querySelector(".segment-text"),e=this.querySelector(".segment-text-bold");this._nodes={},this._nodes.cellContainer=b,b.innerHTML="",c.setAttribute("id","segment-header-"+this.componentId),this._nodes.titleText=d,this._nodes.titleTextBold=e,this._cells.forEach(function(a){a.setAttribute("aria-describedby",c.id),b.appendChild(a)}),this.style.flex=this.size+" 0 auto",this.style["-webkit-flex"]=this.size+" 0 auto",this.id="ha-money-bar-segment-"+this.componentId}});return b("ha-money-bar-segment",f)}),define("hui/money-bar",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar/money-bar.html","./core/utils","./core/keys","./core/a11y","object-utils/classes","./money-bar-cell","./money-bar-segment"],function(a,b,c,d,e,f,g){var h=g.createObject(a,{init:function a(){a.super(this),this.template=c,this._segments=null,Object.defineProperty(this,"segments",{set:function(a){var b=this.querySelector(".segments");b&&(b.innerHTML="",a.forEach(function(a){b.appendChild(a)})),this._segments=a}}),this.listenTo(this,"ha-money-bar-cell:selected",function(a){this.clearSelectedExcept(a.target)}.bind(this)),this.listenTo(this,"keydown",function(a){var b,c,d=a.target,f=this.querySelectorAll("ha-money-bar-cell"),g=a.target.nextElementSibling;if("HA-MONEY-BAR-CELL"===a.target.nodeName)if(a.stopPropagation(),a.preventDefault(),a.keyCode===e.UP||a.keyCode===e.LEFT){if(d.id!==f[0].id){for(c=0;f[c].id!==d.id;)c++;b=f[c-1],d.setAttribute("tabindex","-1"),d.style.outline="none",d.blur(),b.setAttribute("tabindex","0"),b.style.outline="1px dotted #212121",b.style.outline="-webkit-focus-ring-color auto 5px",b.focus(),"selected"===d.state&&d.querySelector(".close-icon").setAttribute("tabindex","-1"),"selected"===b.state&&b.querySelector(".close-icon").setAttribute("tabindex","0")}}else if(a.keyCode===e.DOWN||a.keyCode===e.RIGHT){if(d.id!==f[f.length-1].id){for(c=f.length-1;f[c].id!==d.id;)c--;b=f[c+1],d.style.outline="none",d.setAttribute("tabindex","-1"),d.blur(),b.setAttribute("tabindex","0"),b.style.outline="1px dotted #212121",b.style.outline="-webkit-focus-ring-color auto 5px",b.focus(),"selected"===d.state&&d.querySelector(".close-icon").setAttribute("tabindex","-1"),"selected"===b.state&&b.querySelector(".close-icon").setAttribute("tabindex","0")}}else a.keyCode===e.ENTER?"deselected"===d.state?(d.state="selected",d.classList.contains("outlay")&&null!==g&&g.classList.contains("inlay")&&g.classList.add("inlay-select")):(d.state="deselected",d.classList.contains("outlay")&&null!==g&&g.classList.contains("inlay")&&g.classList.remove("inlay-select")):a.keyCode===e.TAB&&("deselected"===d.state?(d.setAttribute("tabindex","-1"),d.style.outline="none",d.blur(),this.focus()):(d.style.outline="none",d.querySelector(".close-icon").focus()));else"HA-MONEY-BAR"===a.target.nodeName&&(a.keyCode!==e.DOWN&&a.keyCode!==e.RIGHT||(f[0].setAttribute("tabindex","0"),f[0].style.outline="1px dotted #212121",f[0].style.outline="-webkit-focus-ring-color auto 5px",f[0].focus(),a.stopPropagation(),a.preventDefault()))}.bind(this))},preRender:function(){var a,b=this.querySelector(".segments");this._segments||(a=this.querySelectorAll("ha-money-bar-segment"),b?this.segments=Array.prototype.map.call(a,function(a){return a}):this.segments=d.removeNodesSafe(this,a))},postRender:function(){f.addA11yFocus(this);var a=this.querySelector(".segments");this._nodes={},this._nodes.segContainer=a,a.innerHTML="",this._segments.forEach(function(b){a.appendChild(b)}),this.setAttribute("role","menubar"),this.setAttribute("tabindex","0")},clearSelected:function(){var a=this.querySelectorAll("ha-money-bar-cell"),b=0;for(b;b<a.length;b++)a[b].setAttribute("state","deselected"),a[b].classList.remove("inlay-select")},clearSelectedExcept:function(a){var b,c=!0,d=0;for(a.classList.contains("outlay")&&(c=!1),b=this.querySelectorAll("ha-money-bar-cell"),d;d<b.length;d++)b[d].id!==a.id&&(b[d].setAttribute("state","deselected"),c&&b[d].classList.remove("inlay-select"))},setSelected:function(a){this.clearSelected(),a.setAttribute("state","selected")}});return b("ha-money-bar",h)}),define("text!hui/tags/tag.html",[],function(){return'<template>\n    <span class="tag-label">{{label}}</span>\n    <button>\n        <span class="hi hi-close" aria-hidden="true"></span>\n        <span class="dismiss-text sr-only">Dismiss {{label}}</span>\n    </button>\n</template>\n'}),define("hui/tag",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","register-component/template!./tags/tag.html"],function(a,b,c,d){var e=b.createObject(c,{init:function a(){a.super(this),this.template=d,this.setupProperties({value:{type:String,default:""},label:{type:String,default:"",change:function(a){this.querySelector("span.tag-label").textContent=a,this.querySelector(".dismiss-text").textContent=this.dismissText+a}},dismissText:{type:String,default:"Dismiss ",change:function(a){this.querySelector(".dismiss-text").textContent=a+this.label}},notDismissible:{type:Boolean,default:!1,change:function(a){this.querySelector("button").classList[a?"add":"remove"]("hidden")}}}),this.on("button:click",this._onClickDismiss.bind(this))},preRender:function a(){a.super(this),this._label=this.textContent},postRender:function a(){a.super(this),this._label&&(this.label=this._label)},_onClickDismiss:function(a){this.emit("dismiss"),a.stopPropagation()}});return a("ha-tag",e)}),define("text!hui/tags/tags.html",[],function(){return'<template>\n    <div class="tags-container"></div>\n    <button class="more" action="showAll"></button>\n    <button class="dismiss hidden" action="dismissAll"></button>\n</template>\n'}),define("hui/tags",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./helpers/string.helper","register-component/template!./tags/tags.html","./tag"],function(a,b,c,d,e){function f(a,b){var c=document.createElement("style"),d=document.querySelector("head");return d.appendChild(c),c=c.sheet,c.addRule?c.addRule(a,b):c.insertRule(a+"{"+b+"}",0),{sheet:c,remove:function(){var a=c.ownerNode;c.deleteRule(0),a.parentElement.removeChild(a),c=a=null}}}var g;return g=b.createObject(c,{init:function a(){a.super(this),this.template=e,this.setupProperties({maxDisplay:{type:Number,default:3,change:function(a){var b="ha-tags-"+this.componentId;this.setAttribute("data-unique-id",b),this._maxDisplayRule&&this._maxDisplayRule.remove(),this._maxDisplayRule=f("ha-tags[data-unique-id="+b+"] ha-tag:nth-of-type(1n + "+(a+1)+")","display: none"),this._update()}},noDismissAll:{type:Boolean,default:!1,change:function(){this._update()}},dismissAllText:{type:String,default:"Clear all",change:function(a){var b=this.querySelector("button.dismiss");b.textContent=a}},moreText:{type:String,default:"... and {{count}} more",change:function(){this._update()}}}),this.on("ha-tag:dismiss",this._onDismiss.bind(this)),this.on("button:click",this._onClickButton.bind(this))},preRender:function a(){a.super(this),this._tags=this.querySelectorAll("ha-tag")},postRender:function a(){a.super(this),this.tags=this._tags;var b=this.querySelectorAll("ha-tag");this._tags=[],this.tags=b},detachedCallback:function(){this._maxDisplayRule&&this._maxDisplayRule.remove(),this._maxDisplayRule=null},add:function(a){var b=this._tags;b.push(a),this.querySelector(".tags-container").appendChild(a),this._update()},remove:function(a){a&&(this.querySelector(".tags-container").removeChild(a),this.tags.splice(this.tags.indexOf(a),1),this._update())},set tags(a){var b=this.querySelector(".tags-container");Array.prototype.forEach.call(b.querySelectorAll("ha-tag"),this.remove.bind(this)),this._tags=[],a&&Array.prototype.forEach.call(a,this.add.bind(this))},get tags(){return this._tags},_onDismiss:function(a){this.remove(a.target)},_onClickButton:function(a){var b=a.target.getAttribute("action");"function"==typeof this[b]&&this[b]()},showAll:function(){this.emit("show-all")},dismissAll:function(){this.emit("dismiss-all"),this.tags=null},_update:function(){var a=this.querySelector("button.more"),b=this.querySelector("button.dismiss"),c=this.tags;c.length>this.maxDisplay?(a.classList.remove("hidden"),a.textContent=d.replaceKeys(this.moreText,{count:c.length-this.maxDisplay})):(a.classList.add("hidden"),a.textContent=""),b.classList[!this.noDismissAll&&c.length?"remove":"add"]("hidden")}}),a("ha-tags",g)}),define("hui/stage",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/contentNode","./core/a11y"],function(a,b,c,d,e){"use strict";function f(){this.open?this.close():this.show()}function g(a){var b,c=a.querySelector("section"),d=a.querySelector(".btn-toggle");c&&a.collapsible&&(b=c.id,b||(c.id="stage-section-"+a.componentId,b=c.id),d&&d.setAttribute("aria-controls",b))}var h,i;return i={header:"header",section:"section"},h=c.createObject(b,{init:function a(){a.super(this),this._header=null,this._section=null,d.cacheInputContent(this,i),this.setupProperties({collapsible:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector("header"),d=this.querySelector("section"),e=this.querySelector(".btn-toggle");a?d&&c?(e||(e=this.ownerDocument.createElement("button"),e.className="btn-toggle",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","expand"),this.appendChild(e),b=this.ownerDocument.createElement("i"),b.className="hi hi-chevron-down",e.appendChild(b)),d.classList.remove("inner-visible"),g(this)):this.reactLayering||console.error("You can not set collapsible to be true if you do not have both a header and a section."):(e&&this.removeChild(e),d&&d.classList.add("inner-visible"))}},open:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector(".btn-toggle"),d=this.querySelector("section");this.collapsible&&d&&(b=c.querySelector(".hi"),a?(c.setAttribute("aria-expanded","true"),c.setAttribute("aria-label","collapse"),b.classList.add("hi-chevron-up"),b.classList.remove("hi-chevron-down"),d.classList.add("inner-visible")):(c.setAttribute("aria-expanded","false"),c.setAttribute("aria-label","expand"),b.classList.remove("hi-chevron-up"),b.classList.add("hi-chevron-down"),d.classList.remove("inner-visible")))}},reactLayering:{type:Boolean,default:!1}}),this.on("button.btn-toggle:click",f.bind(this))},get header(){return this._header},set header(a){var b,c=this.querySelector("header");for(c||(c=this.ownerDocument.createElement("header"),this.appendChild(c));c.firstElementChild;)c.removeChild(c.firstElementChild);Array.isArray(a)?a.forEach(function(a){c.appendChild(a)}):c.appendChild(a),b=c.querySelector(".ha-back-links"),b?c.classList.add("ha-stage-contains-back-links"):c.classList.remove("ha-stage-contains-back-links"),this._header=a},get section(){return this._section},set section(a){var b=this.querySelector("section");for(b||(b=this.ownerDocument.createElement("section"),this.appendChild(b)),g(this);b.firstElementChild;)b.removeChild(b.firstElementChild);Array.isArray(a)?a.forEach(function(a){b.appendChild(a)}):b.appendChild(a),this.collapsible||b.classList.add("inner-visible"),this._section=a},show:function(){this.collapsible&&!this.open&&(this.open=!0,this.emit("show"))},close:function(){this.collapsible&&this.open&&(this.open=!1,this.emit("close"))},postRender:function a(){a.super(this),e.addA11yFocus(this);var b=this.querySelector(".btn-toggle");b&&this.removeChild(b),d.storeCachedInput(this,i)}}),a("ha-stage",h)}),define("text!hui/step-flow/flow-step.html",[],function(){return"<template>\n    <section></section>\n    <footer></footer>\n</template>"}),define("hui/step-flow/flow-step",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./flow-step.html","../core/utils","../core/contentNode"],function(a,b,c,d,e,f){"use strict";var g,h=function(a){return e.getComponentFromElement(a,"HA-STEP-FLOW")},i=function(a,b,c){var d=a.querySelector(b),f=[].concat(c),g=d&&d.children||[];e.removeNodesSafe(d,g),e.appendChildCollection(d,f)},j={section:"section",footer:"footer"};return g=a.createObject(b,{init:function a(){var b=this;a.super(this),this._hideOnTransition=!1,this._originalTop=null,this.classList.contains("landing")||this.classList.contains("confirmation")?this._noCacheContent=!0:(f.cacheInputContent(this,j),this.template=d,this.stepType="default"),this.setupProperties({stepId:{},showSaveForLaterButton:{type:Boolean},saveForLaterButtonText:{type:String,default:"Save and Finish Later"},nextButtonText:{},previousButtonText:{},hideStepButtons:{type:Boolean,change:function(a){this._setButtonsHidden(a)}},titleText:{type:String,default:"",change:function(a){var c=this._section,d=c.querySelector("section>h1.step-title");a?(d||(d=this.ownerDocument.createElement("h1"),d.setAttribute("tabindex","-1"),d.classList.add("step-title"),c.insertBefore(d,c.firstChild)),d.innerHTML=a,this._titleNode=d):d&&(e.removeNodesSafe(this.section,d),this._titleNode=null),this._progressIndicatorTextSet||this.emit("change-flow-step-progress-indicator-text",{step:b,progressIndicatorText:a})}},subtitleText:{type:String,default:"",change:function(a){var c=this._section,d=c.querySelector("section>h1.step-title"),f=c.querySelector("section>h3.step-subtitle");a?(f||(f=this.ownerDocument.createElement("h3"),f.classList.add("step-subtitle"),c.insertBefore(f,d&&d.nextSibling||c.firstChild)),f.innerHTML=a,this._subtitleNode=f):f&&(e.removeNodesSafe(b,f),this._subtitleNode=f)}},progressIndicatorText:{type:String,default:this.getAttribute("titleText"),change:function(a){this._progressIndicatorTextSet=a&&a!==this.titleText,this.emit("change-flow-step-progress-indicator-text",{step:b,progressIndicatorText:a})}},stepComplete:{type:Boolean,change:function(a){this.emit("change-flow-step-complete",{step:b,stepComplete:a})}},stepAvailable:{type:Boolean,change:function(a){this.emit("change-flow-step-available",{step:b,stepAvailable:a})}},hideProgressIndicator:{type:Boolean},hideProgressIndicatorItem:{type:Boolean},useCustomButtons:{type:Boolean}}),this._btnListener=function(a){var c=a.target,d=c.getAttribute("data-to-step-id");d?b.swipeToById(d,"down"!==c.getAttribute("data-to-step-direction")):c.classList.contains("next-btn")?(h(b).emit("next"),h(b).swipeToNext()):c.classList.contains("prev-btn")?(h(b).emit("previous"),h(b).swipeToPrevious()):c.classList.contains("done-btn")?(h(b).emit("done"),h(b).swipeToIndex(null)):c.classList.contains("save-for-later-btn")&&b.emit("saveForLater",{step:b})};var c=e.getAnimationEventNames().animationend;this.listenTo(this,c,function(a){"HA-FLOW-STEP"===a.target.tagName&&(this._hideOnTransition?(this._hideOnTransition=!1,this.style.visibility="hidden",this.style.display="none",h(b)._doneOutTransition(b)):(this._setFocus(),h(this)._setTransition(!1)))})},get stepType(){return this._stepType},set stepType(a){"landing"===a||"confirmation"===a?(this.hideProgressIndicatorItem=!0,this.hideProgressIndicator=!0,this.classList.remove("default"),this.classList.contains(a)||this.classList.add(a),this._stepType=a):(this._stepType="default",this.classList.remove("landing","confirmation"),this.classList.add("default"))},set section(a){i(this,"section",a),this._addButtonListeners()},get section(){return this._section},set content(a){this._section.appendChild(a),this._content=a},get content(){return this._content},set footer(a){i(this,"footer",a),this._addButtonListeners()},get footer(){return this._footer},postRender:function a(){a.super(this),this._section=this.querySelector("section"),this._footer=this.querySelector("footer"),this._noCacheContent||f.storeCachedInput(this,j),this._addButtonListeners()},_setFocus:function(){var a=this.querySelector(".step-title");a&&a.focus()},_setButtonsHidden:function(a){var b,c,d=this.querySelectorAll(".step-flow-button");if(d)for(c=0;c<d.length;c++)b=d.item(c),a?b.classList.add("hide"):b.classList.remove("hide")},isLanding:function(){return"landing"===this.stepType},replaceSection:function(a){e.removeNodesSafe(this,[this._section]),this._section=a,this.insertBefore(a,this.firstChild)},validate:function(){return!this.validator||this.validator.call(this)},swipeToIndex:function(a){h(this).swipeToIndex(a)},swipeToById:function(a,b){h(this).swipeToById(a,b)},initialize:function(a){this._initialized||(this.useCustomButtons||(this._createButtons(a),this._setButtonsHidden(this.hideStepButtons)),this._initialized=!0)},_createButtons:function(a){var b=a.getStepsArray(),c=b.indexOf(this),d=this,e=function(b){return d[b]?d[b]:a[b]};c<0||(c>0&&"default"===this.stepType&&this._createButton(e("previousButtonText"),["prev-btn","ha-button-secondary"]),c===b.length-1?this._createButton(a.doneButtonText,["done-btn","ha-button-primary"]):this._createButton(e("nextButtonText"),["next-btn","ha-button-primary"]),this.showSaveForLaterButton&&this._createButton(this.saveForLaterButtonText,["save-for-later-btn","ha-button-secondary"]),this._addButtonListeners())},_createButton:function(a,b){var c=this.ownerDocument.createElement("button");c.classList.add("ha-button"),c.classList.add("step-flow-button"),b.forEach(function(a){c.classList.add(a)}),c.innerHTML=a,this._footer.appendChild(c)},_addButtonListeners:function(){var a=this,b=Array.prototype.slice.call(this.querySelectorAll("button.step-flow-button"));b&&b.forEach(function(b){a.listenTo(b,"click",a._btnListener)})},_setup:function(){this.classList.remove("slide-in-next"),this.classList.remove("slide-in-back"),this.classList.remove("slide-out-next"),this.classList.remove("slide-out-back"),this.classList.remove("slide-out-next-delayed"),this.classList.remove("slide-out-back-delayed")},_swipeIn:function(a){this._saveOriginal(this),this._setup(),this.parentElement.scrollTop=0,a?this.classList.add("slide-in-next"):this.classList.add("slide-in-back"),this.style.visibility="visible",this.style.display="block",this.stepAvailable=!0},_swipeOut:function(a,b){this._setup(),a?this.classList.add(b?"slide-out-next-delayed":"slide-out-next"):this.classList.add(b?"slide-out-back-delayed":"slide-out-back"),this._hideOnTransition=!0},_saveOriginal:function(){null===this._originalTop&&(this._originalTop=this.getBoundingClientRect().top-h(this).getBoundingClientRect().top)}}),c("ha-flow-step",g)}),define("text!hui/step-flow/step-flow-progress-indicator-step.html",[],function(){return'<div class="prog-container">\n    <button class="prog-circle" disabled="true">\n        <div class="prog-step-number">{{stepNumber}}</div>\n        <div  aria-label="Go back to the completed step {{stepNumber}}" class="prog-check hi hi-checkmark"></div>\n    </button>\n    <div class="prog-step-name">{{stepName}}</div>\n</div>'}),define("text!hui/step-flow/step-flow-progress-indicator-bar.html",[],function(){return'<div class="mobile-step-indicator">\n    <div class="mobile-step-title"></div>\n    <div class="mobile-step-number"></div>\n</div>\n<div class="mobile-prog-bar">\n\t<div class="mobile-prog-bar-complete" style="width: 0%;"></div>\n</div>'}),define("hui/step-flow/step-flow-progress-indicator",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./step-flow-progress-indicator-step.html","register-component/template!./step-flow-progress-indicator-bar.html","../core/utils"],function(a,b,c,d,e,f){"use strict";var g,h=function(a){return f.getComponentFromElement(a,"HA-STEP-FLOW")};return g=a.createObject(b,{init:function a(){a.super(this)},initialize:function(a){var b,c,f,g,h,i=this,j=a.getStepsArray(),k=1,l=function(a){return function(){i[a].apply(i,arguments)}};for(this._setVisible(!1),this._stepFlow=a,this._progressItems={},g=j.filter(function(a){return!a.hideProgressIndicatorItem}).length,c=this.ownerDocument.createElement("div"),c.innerHTML=e(),c.classList.add("mobile-progress-indicator"),this.appendChild(c),this._progressBar=c,this._progressIndicatorSteps=g,h=0;h<j.length;h++)j[h].hideProgressIndicatorItem||(f=h+"",b=this.ownerDocument.createElement("div"),b.setAttribute("data-progress-id",f),b.setAttribute("data-progress-step-number",k),b.innerHTML=d({stepNumber:k++,stepName:j[h].progressIndicatorText?j[h].progressIndicatorText:j[h].titleText
}),b.classList.add("progress-indicator-step"),this.listenTo(b.querySelector(".prog-container"),"click",l("_onProgressItemClick")),this.listenTo(j[h],"change-flow-step-progress-indicator-text",l("_onChangeProgressIndicatorText")),this.listenTo(j[h],"change-flow-step-complete",l("_onChangeFlowStepComplete")),j[h].stepComplete&&b.classList.add("completed"),this.listenTo(j[h],"change-flow-step-available",l("_onChangeFlowStepAvailable")),j[h].stepAvailable&&b.classList.add("available"),this.appendChild(b),this._progressItems[f]=b,j[h].setAttribute("data-progress-id",f));this.listenTo(a,"before-step",l("_onBeforeStep")),this.listenTo(a,"after-step",l("_onAfterStep"))},reset:function(){var a=this;Object.keys(this._progressItems).forEach(function(b){var c=a._progressItems[b];c.classList.remove("selected")}),this._setVisible(!1)},_getItemFromStep:function(a){var b=a.getAttribute("data-progress-id");return this._progressItems[b]},_onProgressItemClick:function(a){var b,c,d=a.currentTarget.parentElement,e=d.getAttribute("data-progress-id");if(!this.classList.contains("hide-progress-indicator")&&!d.classList.contains("selected")&&e&&""!==e)for(c=h(this).getStepsArray(),b=0;b<c.length;b++)if(c[b].stepAvailable&&c[b].getAttribute("data-progress-id")===e){h(this).swipeToAutoForward(c[b]);break}},_onBeforeStep:function(a){if(a){var b;if(a.fromStep?(b=this._getItemFromStep(a.fromStep),b&&b.classList.remove("selected")):a.toStep&&(b=this._getItemFromStep(a.toStep),b&&b.classList.add("selected"),a.toStep.hideProgressIndicator&&!this.classList.contains("hide-progress-indicator")?this._setVisible(!1):this._setVisible(!0)),a.toStep&&a.toStep.hideProgressIndicator?this._setVisible(!1):this._setVisible(!0),a.toStep&&!a.toStep.hideProgressIndicator){b=this._getItemFromStep(a.toStep),this._progressBar.querySelector(".mobile-step-title").textContent=a.toStep.titleText,this._progressBar.querySelector(".mobile-step-number").textContent=b.getAttribute("data-progress-step-number")+" of "+this._progressIndicatorSteps;var c=100*b.getAttribute("data-progress-step-number")/this._progressIndicatorSteps;this._progressBar.querySelector(".mobile-prog-bar-complete").style.width=c+"%"}}},_setVisible:function(a){a?(this.classList.remove("hide"),this.classList.remove("hide-progress-indicator"),this.setAttribute("aria-hidden",!1)):(this.setAttribute("aria-hidden",!0),this.classList.add("hide-progress-indicator"))},_onAfterStep:function(a){if(a&&a.toStep){var b=a&&a.toStep&&this._getItemFromStep(a.toStep);b&&b.classList.add("selected")}},_onChangeProgressIndicatorText:function(a){if(a&&a.step){var b=this._getItemFromStep(a.step).querySelector(".prog-step-name"),c=this._progressBar.querySelector(".mobile-step-title");b.textContent=a.progressIndicatorText,c.textContent=a.progressIndicatorText}},_onChangeFlowStepComplete:function(a){if(a&&a.step){var b=this._getItemFromStep(a.step);b&&(a.stepComplete?b.classList.add("completed"):b.classList.remove("completed"))}},_onChangeFlowStepAvailable:function(a){if(a&&a.step){var b,c=this._getItemFromStep(a.step);c&&(b=c.querySelector("button"),a.stepAvailable?(c.classList.add("available"),b.removeAttribute("disabled")):(c.classList.remove("available"),b.setAttribute("disabled","true")))}}}),c("ha-step-flow-progress-indicator",g)}),define("hui/step-flow/flow-landing",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/utils","../core/contentNode"],function(a,b,c,d){"use strict";var e=a.createObject(b,{set content(a){var b=a instanceof Array?a:[a];this._section=this.querySelector("section"),this._section||(this._section=this.ownerDocument.createElement("section"),this.appendChild(this._section)),d.appendChildCollection(this._section,b)},get content(){return this._section}});return c("ha-flow-landing",e)}),define("text!hui/step-flow/flow-confirmation.html",[],function(){return'<section>\n    <div class="confirm-check hi hi-circle-check"></div>\n    <h1 class="step-title" tabindex="-1">{{titleText}}</h1>\n    <h3 class="step-subtitle">{{subtitleText}}</h3>\n</section>\n'}),define("hui/step-flow/flow-confirmation",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./flow-confirmation.html","../core/utils","../core/contentNode"],function(a,b,c,d,e,f){"use strict";var g,h={section:"content"};return g=a.createObject(b,{init:function a(){var b=this;a.super(this),this.setupProperties({titleText:{},subtitleText:{}}),this.classList.contains("processed")||(f.cacheInputContent(this,h),this.template=function(){return d({titleText:b.titleText,subtitleText:b.subtitleText})})},set content(a){var b=a instanceof Array?a:[a];e.appendChildCollection(this._section,b)},get content(){return this._section},postRender:function a(){a.super(this),this._section=this.querySelector("section"),this.classList.contains("processed")||(f.storeCachedInput(this,h),this.classList.add("processed"))}}),c("ha-flow-confirmation",g)}),define("hui/step-flow",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/utils","./step-flow/flow-step","./step-flow/step-flow-progress-indicator","./step-flow/flow-landing","./step-flow/flow-confirmation"],function(a,b,c,d){"use strict";var e,f;return e=d.getAnimationEventNames().animationend,f=a.createObject(b,{init:function a(){var b=this;a.super(this),this._steps=[],this._visible=!1,this._currentStep=null,this._currentIdx=-1,this.setupProperties({progressIndicator:{type:Boolean,default:!1,change:function(a){a?(this._progressIndicator||(this._progressIndicator=this.ownerDocument.createElement("ha-step-flow-progress-indicator"),this.insertBefore(this._progressIndicator,this.firstChild),this._visible&&(this._initializeProgressIndicator(),this._progressIndicator._setVisible(!0))),this.classList.add("with-progress")):this._progressIndicator&&(d.removeNodesSafe(this,[this._progressIndicator]),this._progressIndicator=null,this._progressIndicatorInitialized=!1,this.classList.remove("with-progress"))}},flow:{type:String,default:"linear",change:function(a){this.steps.forEach(function(b){b.stepAvailable=b.stepAvailable||"linear"!==a})}},disableAutoComplete:{type:Boolean},enableAnimateIn:{type:Boolean},closeParentTrowser:{type:Boolean},nextButtonText:{default:"Next"},previousButtonText:{default:"Previous"},doneButtonText:{default:"Done"},startIndex:{default:0}}),this.listenTo(this,e,function(a){var c=a.animationName;"ha-step-flow-vertical-out"===c&&b.classList.remove("shown"),"ha-step-flow-vertical-in"===c&&null===this._currentStep&&(b.swipeToIndex(0),b.classList.remove("vertical-in")),"ha-step-progress-indicator-fade-out"===c&&b.querySelector("ha-step-flow-progress-indicator").classList.add("hide"),"ha-step-flow-bg-step"===c&&(b.classList.remove("landing"),b.classList.remove("landing-out")),"ha-step-flow-bg-landing"===c&&(b.classList.add("landing"),b.classList.remove("landing-in"))})},set steps(a){var b=this,c=[];d.removeNodesSafe(b,this._steps),a.forEach(function(a){"HA-FLOW-STEP"===a.tagName&&(b.appendChild(a),a.style.visibility="hidden",a.style.display="none",a.classList.contains("landing")?(b._landingStep=a,b._landing=a.querySelector("ha-flow-landing")):a.classList.contains("confirmation")?(b._confStep=a,b._confirmation=a.querySelector("ha-flow-confirmation")):(a.stepAvailable=a.stepAvailable||"linear"!==b.flow,c.push(a)))}),this._steps=c},get steps(){return this._steps},set landing(a){this._landingStep=this.ownerDocument.createElement("ha-flow-step"),this._landingStep.replaceSection(a),this._landingStep.stepType="landing",this._landing=a,this.insertBefore(this._landingStep,this.querySelector("ha-flow-step"))},get landing(){return this._landing},set confirmation(a){this._confStep=this.ownerDocument.createElement("ha-flow-step"),this._confStep.stepType="confirmation",this._confirmation=a,this._confStep.replaceSection(this._confirmation),this.appendChild(this._confStep)},get confirmation(){return this._confirmation},attachedCallback:function a(){a.super(this);var b=d.getComponentFromElement(this,"HA-PAGE-MODAL");d.isNode(b)&&b.classList.add("step-flow")},postRender:function a(){var b=this._getChildByTag("ha-flow-landing"),c=this._getChildByTag("ha-flow-confirmation"),d=this.querySelectorAll("ha-flow-step")||[];a.super(this),this.steps=Array.prototype.slice.call(d),b&&(this.landing=b),c&&(this.confirmation=c)},show:function(){this._initializeProgressIndicator(),this._visible||(this.classList.remove("vertical-out"),this.classList.add("shown"),this.enableAnimateIn?this.classList.add("vertical-in"):null===this._currentStep&&this.swipeToIndex(this.startIndex||0),this._visible=!0,this.emit("show"))},close:function(){if(this._visible){if(this.closeParentTrowser){var a=d.getComponentFromElement(this,"HA-TROWSER");a&&(a.close(),this.classList.remove("shown"))}this.classList.remove("vertical-in"),this.classList.add("vertical-out"),this._visible=!1,this.emit("close"),this._reset()}},swipeToNext:function(){this.swipeToIndex(this._currentIdx+1,!0)},swipeToPrevious:function(){this.swipeToIndex(this._currentIdx-1,!1)},swipeToById:function(a,b){var c=this._findById(a);this.swipeToIndex(c,b)},swipeToAutoForward:function(a){var b=this.getStepsArray().indexOf(a);this.swipeToIndex(b,b>this._currentIdx)},swipeToIndex:function(a,b){var c,d=this,e=function(){d._setTransition(!0),d._currentStep&&b&&!d.disableAutoComplete&&(d._currentStep.stepComplete=!0,d._currentStep.stepAvailable=!0),null!==a?d._gotoStep(a,b):(d._swipeBusy=!1,d.close())};if(!this._swipeBusy){if(this._swipeBusy=!0,this._currentStep&&b){if(c=this._currentStep.validate(),!c)return void(this._swipeBusy=!1);if(this._isPromise(c))return this._startSpinner("validate",this._currentStep),void c.then(function(a){return a?e():(d._stopSpinner("validate",d._currentStep),d._swipeBusy=!1),a},function(){return d._stopSpinner("validate",d._currentStep),d._swipeBusy=!1,!1})}e()}},getStepsArray:function(){var a=[];return this._landingStep&&a.push(this._landingStep),a=a.concat(this._steps),this._confStep&&a.push(this._confStep),a},_initializeProgressIndicator:function(){this._progressIndicator&&!this._progressIndicatorInitialized&&(this._progressIndicator.initialize(this),this._progressIndicatorInitialized=!0)},_getChildByTag:function(a){var b,c=this.querySelectorAll(a);for(b=0;b<c.length;b++)if(c[b].parentElement===this)return c[b];return null},_reset:function(){this._currentStep=null,this._currentIdx=-1,this.getStepsArray().forEach(function(a){a.style.visibility="hidden",a.stepComplete=!1,a.stepAvailable=!1}),this._progressIndicator&&this._progressIndicator.reset()},_findById:function(a){var b,c=this.getStepsArray()||[];for(b=0;b<c.length;b++)if(c[b].stepId===a)return b;return-1},_doneOutTransition:function(a){this.emit("after-step",{fromStep:a,toStep:this._currentStep}),this._swipeBusy=!1},_isPromise:function(a){return!(!a||"function"!=typeof a.then)},_setTransition:function(a){a?this.classList.add("transition"):this.classList.remove("transition")},_setBackground:function(a){!this._currentStep&&a.isLanding()?this.classList.add("landing"):this._currentStep&&(this._currentStep.isLanding()&&!a.isLanding()?this.classList.add("landing-out"):a.isLanding()&&!this._currentStep.isLanding()&&this.classList.add("landing-in"))},_gotoStep:function(a,b){var c,d=this.getStepsArray()[a],e=this,f=function(){var c=e._currentStep&&(e._currentStep.isLanding()||d&&d.isLanding());e._currentStep&&(e._currentStep._swipeOut(b,c),e._stopSpinner("validate",e._currentStep)),setTimeout(function(){d.initialize(e),e.emit("before-step",{fromStep:e._currentStep,toStep:d}),d._swipeIn(b),e._currentStep=d,e._currentIdx=a,e._swipeBusy=!1},c?250:0)};d&&(this._setBackground(d),d.beforeShowPromise&&(c="function"==typeof d.beforeShowPromise?d.beforeShowPromise():d.beforeShowPromise),this._isPromise(c)?(this._startSpinner("before-show",d),c.then(function(){return f(),e._stopSpinner("before-show",d),!0},function(){return e._stopSpinner("before-show",d),e._swipeBusy=!1,!1})):f())},_getSpinner:function(){var a=this.querySelector("div.ha-step-flow-spinner");return a||(a=this.ownerDocument.createElement("div"),a.appendChild(this.ownerDocument.createElement("div")),a.classList.add("ha-step-flow-spinner"),this.appendChild(a)),a},_startSpinner:function(a,b){var c=this._getSpinner();c.style.top=-this.getBoundingClientRect().top+"px",c.classList.add("spinner-show"),this.emit("start-spinner",{reason:a,step:b})},_stopSpinner:function(a,b){var c=this._getSpinner();c.classList.remove("spinner-show"),this.emit("stop-spinner",{reason:a,step:b})}}),c("ha-step-flow",f)}),define("hui/core/timeUtils",[],function(){return{_isoRegex:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/,parseISODateString:function(a){var b,c=this._isoRegex.exec(a),d=null,e=0;return c&&(c.shift(),c[1]&&c[1]--,d=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0),c[0]<100&&d.setFullYear(c[0]||1970),e=0,b=c[7]&&c[7].charAt(0),"Z"!==b&&(e=60*(c[8]||0)+(Number(c[9])||0),"-"!==b&&(e*=-1)),b&&(e-=d.getTimezoneOffset()),e&&d.setTime(d.getTime()+6e4*e)),d},pad:function(a){var b=String(a);return b.length<2&&(b="0"+a),b},formatDateAsEsDateString:function(a){return a instanceof Date?a.getFullYear()+"-"+this.pad(a.getMonth()+1)+"-"+this.pad(a.getDate()):""}}}),define("text!hui/date-picker/calendar.html",[],function(){return'<template>\n    <div class="ha-calendar-main-div" role="presentation">\n        <div class="ha-calendar-navigation" role="presentation">\n            <div class="ha-calendar-previous-month hi hi-chevron-left" tabindex="0"\n                 aria-describedby="dates-navigation{{componentId}}" id="decrementMonth{{componentId}}" role="button"\n                 aria-label="Go to previous month">\n            </div>\n            <div class="ha-calendar-next-month hi hi-chevron-right" tabindex="0"\n                 aria-describedby="dates-navigation{{componentId}}" id="incrementMonth{{componentId}}" role="button"\n                 aria-label="Go to next month">\n            </div>\n            <div aria-live="assertive" class="ha-calendar-month-display" id="monthAndYearNode{{componentId}}"></div>\n        </div>\n        <table aria-labelledby="monthAndYearNode{{componentId}}" tabindex="0" cellspacing="0" cellpadding="0"\n               id="gridNode{{componentId}}">\n            <thead>\n            <tr id="dayCellsNode{{componentId}}">\n            </tr>\n            </thead>\n            <tbody id="dateRowsNode{{componentId}}">\n            </tbody>\n        </table>\n        <div class="ha-calendar-year-navigation">\n            <span class="ha-calendar-previous-year" role="button" tabindex="0" aria-label="Go to previous year"\n                    aria-describedby="dates-navigation{{componentId}}">\n            </span>\n            <span aria-live="assertive" class="ha-calendar-current-year">\n            </span>\n            <span class="ha-calendar-next-year" role="button" tabindex="0" aria-label="Go to next year"\n                    aria-describedby="dates-navigation{{componentId}}">\n            </span>\n        </div>\n        <span class="sr-only selectionAlertNode"></span>\n        <div class="sr-only" id="dates-navigation{{componentId}}">shift focus to input to change calendar dates</div>\n    </div>\n</template>\n'}),define("hui/date-picker/calendar",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","register-component/template!./calendar.html","../core/keys","../core/a11y","../core/timeUtils","../tooltip"],function(a,b,c,d,e,f,g){var h=b.createObject(c,{init:function a(){a.super(this),this.template=d,this._currentDate=new Date(Date.now()),this._selection=[this._currentDate],this._month=this._currentDate.getMonth(),this._year=this._currentDate.getFullYear(),this._otherMonth="other-month",this._blackout="blackout-date",this._selected="selected-date",this._highlighted="highlighted-date",this._currentDateClass="current-date",this._notableDate="notable-date",this._monthLabels=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],this._monthAbbreviations=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],this._dayOfWeekLabels=["S","M","T","W","T","F","S"],this.setupProperties({maxDate:{default:"",type:String,change:function(){this.updateRendering()}},minDate:{default:"",type:String,change:function(){this.updateRendering()}},showYearNavigation:{default:!1,type:Boolean,change:function(a){a?this.querySelector(".ha-calendar-year-navigation").classList.remove("hidden"):this.querySelector(".ha-calendar-year-navigation").classList.add("hidden"),this.updateRendering()}},selectedDateRangeText:{default:"Selected {{start}} through {{end}}",type:String},selectedDateText:{default:"Selected date: {{date}}",type:String}})},postRender:function a(){a.super(this),this.querySelector("#gridNode"+this.componentId).focus(),this.updateRendering(),this.listenTo(this,".ha-calendar-next-month:click",function(){this.month=this.month+1,this.select(new Date(this._year,this._month))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-month:click",function(){this.month=this.month-1,this.select(new Date(this._year,this._month+1,0))}.bind(this),!0),this.listenTo(this,".ha-calendar-next-year:click",function(){this.year=this.year+1,this.select(new Date(this._year,this._month))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-year:click",function(){this.year=this.year-1,this.select(new Date(this._year,this._month+1,0))}.bind(this),!0),this.listenTo(this,"td:click",function(a){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this.isInOtherMonth(c)||(this.emit("change",{date:c}),this.select([c]))}.bind(this),!0),this.listenTo(this,"td:mouseover",function(a){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this.isInOtherMonth(c)||this.select([c])}.bind(this)),this.listenTo(this,"keydown",this.handleKeyDown.bind(this))},attachedCallback:function a(){a.super(this)},set blackoutDates(a){this._blackoutDates&&this._setClass(this._blackoutDates,this._blackout,!1),this._blackoutDates=a,this._setClass(this._blackoutDates,this._blackout,!0)},get blackoutDates(){return this._blackoutDates},set currentDate(a){this._currentDate&&this._setClass(this._currentDate,this._currentDateClass,!1),this._currentDate=a,this._setClass(this._currentDate,this._currentDateClass,!0)},get currentDate(){return this._currentDate},set highlightedDates(a){this._highlightedDates&&this._setClass(this._highlightedDates,this._highlighted,!1),this._highlightedDates=a,this._setClass(this._highlightedDates,this._highlighted,!0)},get highlightedDates(){return this._highlightedDates},set month(a){for(;a<0;)a+=12,this._year--;for(;a>=12;)a-=12,this._year++;this._month=a,this.updateRendering()},get month(){return this._month},set monthLabels(a){this._monthLabels=a,this.updateRendering()},get monthLabels(){return this._monthLabels},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this.updateRendering()},get dayOfWeekLabels(){return this._dayOfWeekLabels},set monthAbbreviations(a){this._monthAbbreviations=a,this.updateRendering()},get monthAbbreviations(){return this._monthAbbreviations},set notableDates(a){this._notableDates&&this._setClass(this._notableDates,this._notableDate,!1),this._notableDates=a,this._setClass(this._notableDates,this._notableDate,!0)},get notableDates(){return this._notableDates},set year(a){this._year=a,this.updateRendering()},get year(){return this._year},set tooltips(a){var b,c,d,e,f,g,h;this._tooltipNodes&&this._tooltipNodes.forEach(function(a){a&&(a.close(),a.parentNode&&a.parentNode.removeChild(a))}),this._tooltips=a,this._tooltipNodes=[];for(b in a)a.hasOwnProperty(b)&&(c=this._parseIfString(b),c&&(d=this.ownerDocument.createElement("ha-tooltip"),this._tooltipNodes.push(d),e=this.ownerDocument.createElement("div"),e.classList.add("ha-calendar-tooltip-header"),e.textContent=this._monthAbbreviations[c.getMonth()]+" "+c.getDate(),f=this.ownerDocument.createElement("div"),f.classList.add("ha-calendar-tooltip-content"),f.textContent=a[b],d.trigger="hover",d.appendChild(e),d.appendChild(f),g="#"+this._getDateId(c),d.targetSelector=g,h=this.querySelector(g),h&&h.appendChild(d)))},get tooltips(){return this._tooltips},deselect:function(a){if(this._selection){var b,c=this;if(Array.isArray(a))a.forEach(function(a){for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)});else for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)}this._setClass(a,this._selected,!1)},select:function(a,b,c){var d,e,f,h,i,j,k,l=this.ownerDocument.createElement("span"),m=this.querySelector(".selectionAlertNode"),n=this.maxDate?g.parseISODateString(this.maxDate):null,o=this.minDate?g.parseISODateString(this.minDate):null;if(Array.isArray(a)?(d=this._parseIfString(a[0]),f=this._parseIfString(a[a.length-1])):d=this._parseIfString(a),!(n&&(d>n||f&&f>n)||o&&d<o)){if(l.classList.add("sr-only"),l.classList.add("selectionAlertNode"),l.setAttribute("role","alert"),this._selection&&this._setClass(this._selection,this._selected,!1),Array.isArray(a))this._selection=a.slice(0);else{if(this.isInOtherMonth(a)&&!c)return void(this._selection=[]);this._selection=[a]}if(this._setClass(a,this._selected,!0),c&&(!d||d.getFullYear()===this._year&&d.getMonth()===this._month||(this._year=d.getFullYear(),this._month=d.getMonth(),this.updateRendering())),b){if(e=d?new Date(d.getFullYear(),d.getMonth(),d.getDate()):null,h=[],d&&f){for(k=f.valueOf();e.valueOf()<=k;)h.push(e),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);this.highlightedDates=h}d&&f&&(l.textContent=this.selectedDateRangeText.replace("{{start}}",d.toLocaleDateString()).replace("{{end}}",f.toLocaleDateString()),this.querySelector("#selectionAlertNode"+this.componentId),m.parentNode.replaceChild(l,m))}else d&&(l.textContent=this.selectedDateText.replace("{{date}}",d.toLocaleDateString()),m.parentNode.replaceChild(l,m));d&&(i=this._getDateId(d),j=this.querySelector("#"+i),j&&this.querySelector("#gridNode"+this.componentId).setAttribute("aria-activedescendant",i))}},_inVisiblePopover:function(){for(var a=this.parentNode;a;){if("HA-POPOVER"===a.tagName&&a.classList.contains("visible"))return!0;a=a.parentNode}return!1},_moveFocus:function(a){var b=!1,c=!1,d=f.getBoundariesTabableElement(this,!0,!0);"INPUT"===a.target.tagName?a.shiftKey||(a.preventDefault(),a.stopPropagation(),d.first.focus()):a.shiftKey?a.target===d.first&&(b=!0):a.target===d.last&&(c=!0),(b||c)&&this._owningInput&&(b?(a.preventDefault(),a.stopPropagation()):this.emit("ha-calendar-exiting"),this._owningInput.focus())},updateRendering:function(){for(var a,b,c=this.querySelector("#monthAndYearNode"+this.componentId),d=this.querySelector("#dateRowsNode"+this.componentId),e=this.querySelector("#dayCellsNode"+this.componentId),f=this.querySelector(".ha-calendar-previous-year"),g=this.querySelector(".ha-calendar-current-year"),h=this.querySelector(".ha-calendar-next-year");e.firstChild;)e.removeChild(e.firstChild);for(a=0;a<this._dayOfWeekLabels.length;a++)b=this.ownerDocument.createElement("th"),b.textContent=this._dayOfWeekLabels[a],e.appendChild(b);for(c.textContent=this._monthLabels[this._month]+(this.showYearNavigation?"":" "+this._year);d.firstChild;)d.removeChild(d.firstChild);d.appendChild(this._buildDateRows()),f.textContent=this.year-1,g.textContent=this.year,h.textContent=this.year+1,this._setClass(this._highlightedDates,this._highlighted,!0),this._setClass(this._blackoutDates,this._blackout,!0),this._setClass(this._selection,this._selected,!0),this._setClass(this._currentDate,this._currentDateClass,!0),this._setClass(this._notableDates,this._notableDate,!0),this.tooltips=this._tooltips},_buildDateRows:function(){var a,b,c,d,e,f=new Date(this._year,this._month),h=this.minDate?g.parseISODateString(this.minDate):null,i=this.maxDate?g.parseISODateString(this.maxDate):null,j=this.querySelector(".ha-calendar-next-month"),k=this.querySelector(".ha-calendar-previous-month"),l=this.ownerDocument.createDocumentFragment();for(this._otherMonthDays=[],0===f.getDay()?f.setDate(f.getDate()-7):f.setDate(f.getDate()-f.getDay()),a=0;a<6;a++){for(c=this.ownerDocument.createElement("tr"),b=0;b<7;b++)d=this.ownerDocument.createElement("td"),d.setAttribute("aria-selected","false"),e=this.ownerDocument.createElement("div"),f.getMonth()!==this._month&&(this._otherMonthDays.push(new Date(f.getFullYear(),f.getMonth(),f.getDate())),d.classList.add(this._otherMonth)),e.textContent=f.getDate(),d.appendChild(e),d.setAttribute("id",this._getDateId(f)),(i&&f>i||h&&f<h)&&(d.setAttribute("disabled","disabled"),d.classList.add(this._blackout)),c.appendChild(d),f.setDate(f.getDate()+1);l.appendChild(c)}return i&&this._otherMonthDays[this._otherMonthDays.length-1]>i?(document.activeElement===j&&k.focus(),j.classList.add("hidden"),j.setAttribute("aria-hidden","true")):(j.classList.remove("hidden"),j.setAttribute("aria-hidden","false")),h&&this._otherMonthDays[0]<h?(document.activeElement===k&&j.focus(),k.classList.add("hidden"),k.setAttribute("aria-hidden","true")):(k.classList.remove("hidden"),k.setAttribute("aria-hidden","false")),l},_getDateFromCell:function(a){var b=a.getAttribute("id").substring(2).split("component")[0],c=b.substring(0,2),d=b.substring(2,4),e=b.substring(4);return new Date(e,c,d)},_getDateId:function(a){var b=a.getDate(),c=a.getMonth();return b<10&&(b="0"+b),c<10&&(c="0"+c),"id"+c+b+a.getFullYear()+"component"+this.componentId},_getDateIds:function(a){var b,c=[],d=this;return Array.isArray(a)?a.forEach(function(a){(b=d._parseIfString(a))&&c.push(d._getDateId(b))}):(b=d._parseIfString(a))&&c.push(this._getDateId(b)),c},_getDateNodes:function(a){var b,c=[],d=this;return this._getDateIds(a).forEach(function(a){(b=d.querySelector("#"+a))&&c.push(b)}),c},_getSelectedDate:function(){return this._selection&&this._parseIfString(this._selection[0])||this._currentDate},isInOtherMonth:function(a){a=this._parseIfString(a);var b=!1;return this._otherMonthDays&&this._otherMonthDays.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b},_isBlackoutDate:function(a){var b=!1,c=this.minDate?g.parseISODateString(this.minDate):null,d=this.maxDate?g.parseISODateString(this.maxDate):null;return!!(d&&a>d||c&&a<c)||(this._blackoutDates&&this._blackoutDates.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b)},handleKeyDown:function(a){var b;a.keyCode===e.TAB?this._moveFocus(a):a.keyCode===e.ENTER||a.keyCode===e.SPACEBAR?(a.preventDefault(),a.target===this.querySelector(".ha-calendar-next-year")?(this.year=this.year+1,this.select(new Date(this._year,this._month))):a.target===this.querySelector(".ha-calendar-previous-year")?(this.year=this.year-1,this.select(new Date(this._year,this._month+1,0))):a.target===this.querySelector(".ha-calendar-next-month")?(this.month=this.month+1,this.select(new Date(this._year,this._month))):a.target===this.querySelector(".ha-calendar-previous-month")?(this.month=this.month-1,this.select(new Date(this._year,this._month+1,0))):this._selection&&this._selection[0]&&(b=this._getDateFromCell(this._getDateNodes(this._selection[0])[0]),this._isBlackoutDate(b)||this.isInOtherMonth(b)||this.emit("change",{date:b}))):a.keyCode===e.LEFT||a.keyCode===e.NUM_PAD_MINUS||a.keyCode===e.MINUS?(a.preventDefault(),b=this._getSelectedDate(),b?this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-1),!1,!0):this.select([new Date(this._year,this._month)])):a.keyCode===e.RIGHT||a.keyCode===e.NUM_PAD_PLUS||a.keyCode===e.EQUALS&&a.shiftKey?(a.preventDefault(),b=this._getSelectedDate(),b?this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+1)],!1,!0):this.select([new Date(this._year,this._month)])):a.keyCode===e.END||a.keyCode===e.H?(a.preventDefault(),this.select([new Date(this._year,this._month+1,0)])):a.keyCode===e.HOME||a.keyCode===e.M?(a.preventDefault(),this.select([new Date(this._year,this._month)])):a.keyCode===e.PAGEUP?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(-1):this._updateSelectionMonth(-1)):a.keyCode===e.PAGEDOWN?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(1):this._updateSelectionMonth(1)):a.keyCode===e.Y?(a.preventDefault(),this.select([new Date(this._year,0,1)],!1,!0)):a.keyCode===e.R?(a.preventDefault(),this.select([new Date(this._year+1,0,0)],!1,!0)):a.keyCode===e.W?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select([new Date(this._year,this._month,b.getDate()-b.getDay())],!1,!0)):a.keyCode===e.K?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select([new Date(this._year,this._month,b.getDate()+(6-b.getDay()))],!1,!0)):a.keyCode===e.T?(a.preventDefault(),this.select(this._currentDate,!1,!0)):a.keyCode===e.UP?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()-7)],!1,!0)):a.keyCode===e.DOWN&&(a.preventDefault(),b=this._getSelectedDate(),b&&this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+7)],!1,!0))},_parseIfString:function(a){return"string"==typeof a?new Date(a):a&&a.getDate?a:null},_setClass:function(a,b,c){var d=this._selected===b||this._highlighted===b;this._getDateNodes(a).forEach(function(a){"undefined"!=typeof c?c?(a.classList.add(b),d&&a.setAttribute("aria-selected","true")):a.classList.remove(b):a.classList.toggle(b)})},_updateSelectionYear:function(a){var b,c;this._selection&&(b=this._parseIfString(this._selection[0])||this._currentDate)?(c=new Date(b.getFullYear()+a,b.getMonth(),b.getDate()),c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()||(c=new Date(b.getFullYear()+a,b.getMonth()+1,0)),this.select([c],!1,!0)):this.select([new Date(this._year+a,this._month+1,0)],!1,!0)},_updateSelectionMonth:function(a){var b,c;this._selection&&(b=this._parseIfString(this._selection[0])||this._currentDate)?(c=new Date(b.getFullYear(),b.getMonth()+a,b.getDate()),c.getMonth()===b.getMonth()+(a+1)&&(c=new Date(b.getFullYear(),b.getMonth()+(a+1),0)),this.select([c],!1,!0)):this.select([new Date(this._year,this._month+a+1,0)],!1,!0)}});return a("ha-calendar",h)}),define("hui/date-picker/double-calendar",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","../core/keys","./calendar"],function(a,b,c,d){var e=b.createObject(c,{init:function a(){a.super(this),this._currentDate=new Date(Date.now()),this._selection=[this._currentDate],this._minMonth=this._currentDate.getMonth(),this._maxMonth=this._minMonth+1,this._year=this._currentDate.getFullYear(),this.setupProperties({})},postRender:function a(){if(a.super(this),!this.calendarOne){var b=this.ownerDocument.createElement("ha-calendar"),c=this.ownerDocument.createElement("ha-calendar");this.appendChild(b),this.appendChild(c)}this.updateRendering(),this.listenTo(this,".ha-calendar-next-month:click",function(a){a.stopPropagation(),this.show(this._year,this._maxMonth+1),this.select(new Date(this._year,this._maxMonth))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-month:click",function(a){a.stopPropagation(),this.show(this._year,this._minMonth-1),this.select(new Date(this._year,this._minMonth+1,0))}.bind(this),!0),this.listenTo(this,"td:click",function(a){a.stopPropagation();var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this._isOtherMonthCell(b,c)||(this.emit("change",{date:c}),this.select([c]),this._pauseForClick=!0,setTimeout(function(){this._pauseForClick=!1}.bind(this),500))}.bind(this),!0),this.listenTo(this,"td:mouseover",function(a){if(a.stopPropagation(),
!this._pauseForClick){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this._isOtherMonthCell(b,c)||this.select([c])}}.bind(this)),this.listenTo(this,"keydown",this.handleKeyDown.bind(this))},attachedCallback:function a(){a.super(this),this.calendarOne.stopListening(),this.calendarOne.querySelector(".ha-calendar-next-month").classList.add("hidden"),this.calendarTwo.querySelector(".ha-calendar-previous-month").classList.add("hidden"),this.calendarTwo.stopListening()},set blackoutDates(a){this._blackoutDates=a,this.calendarOne.blackoutDates=a,this.calendarTwo.blackoutDates=a},get blackoutDates(){return this._blackoutDates},get calendarOne(){return this.querySelector("ha-calendar")},get calendarTwo(){return this.querySelectorAll("ha-calendar")[1]},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this.calendarOne.dayOfWeekLabels=a,this.calendarTwo.dayOfWeekLabels=a},get dayOfWeekLabels(){return this._dayOfWeekLabels||this.calendarOne.dayOfWeekLabels},set currentDate(a){this._currentDate=a,this.calendarOne.currentDate=a,this.calendarTwo.currentDate=a},get currentDate(){return this._currentDate},set highlightedDates(a){this._highlightedDates=a,this.calendarOne.highlightedDates=a,this.calendarTwo.highlightedDates=a},get highlightedDates(){return this._highlightedDates},get maxMonth(){return this._maxMonth},get minMonth(){return this._minMonth},set monthLabels(a){this._monthLabels=a,this.calendarOne.monthLabels=a,this.calendarTwo.monthLabels=a},get monthLabels(){return this._monthLabels||this.calendarOne.monthLabels},set monthAbbreviations(a){this._monthAbbreviations=a,this.calendarOne.monthAbbreviations=a,this.calendarTwo.monthAbbreviations=a},get monthAbbreviations(){return this._monthAbbreviations||this.calendarOne.monthAbbreviations},set notableDates(a){this._notableDates=a,this.calendarOne.notableDates=a,this.calendarTwo.notableDates=a},get notableDates(){return this._notableDates},set preselection(a){this._preselection=a,this._selection&&this.select(this._selection)},get preselection(){return this._preselection},set postselection(a){this._postselection=a,this._selection&&this.select(this._selection)},get postselection(){return this._postselection},show:function(a,b){for(;b<0;)b+=12,a--;for(;b>=12;)b-=12,a++;var c=new Date(this._year,this._maxMonth+1,0),d=new Date(this._year,this._minMonth),e=new Date(a,b);e.valueOf()>c.valueOf()?(this._maxMonth=b,this._minMonth=b-1,this._year=a,this.updateRendering()):e.valueOf()<d.valueOf()&&(this._minMonth=b,this._maxMonth=b+1,this._year=a,this.updateRendering())},set tooltips(a){this._tooltips=a,this.calendarOne.tooltips=this.calendarTwo.tooltips=a},get tooltips(){return this._tooltips},get year(){return this._year},deselect:function(a){if(this._selection){var b,c=this;if(Array.isArray(a))a.forEach(function(a){for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)});else for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)}this.calendarOne.deselect(a),this.calendarTwo.deselect(a)},select:function(a,b,c){var d,e;Array.isArray(a)?this._selection=a.slice(0):this._selection=[a],this._preselection?(e=this._selection.slice(0),e.unshift(this._preselection),b=!0):this._postselection&&(e=this._selection.slice(0),e.push(this._postselection),b=!0),c&&(d=this._parseIfString(this._getSelectedDate()),d&&!isNaN(d.getFullYear())&&this.show(d.getFullYear(),d.getMonth())),this.calendarOne.select(e||this._selection,b),this.calendarTwo.select(e||this._selection,b)},updateRendering:function(){this.calendarOne._year=this.calendarTwo._year=this._year,this.calendarOne.month=this._minMonth,this.calendarTwo.month=this._maxMonth},_getDateFromCell:function(a){var b=a.getAttribute("id").substring(2).split("component")[0],c=b.substring(0,2),d=b.substring(2,4),e=b.substring(4);return new Date(e,c,d)},_getDateNodes:function(a){return this.calendarOne._getDateNodes(a).concat(this.calendarTwo._getDateNodes(a))},_getSelectedDate:function(){return this._selection&&(this._preselection?this._parseIfString(this._selection[this._selection.length-1]):this._parseIfString(this._selection[0]))||this._currentDate},_isBlackoutDate:function(a){var b=!1;return this._blackoutDates&&this._blackoutDates.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b},_inFirstCalendar:function(a){for(var b=this.calendarOne;a&&a!==this;){if(a===b)return!0;a=a.parentNode}return!1},_isOtherMonthCell:function(a,b){return b?this._inFirstCalendar(a)?this.calendarOne.isInOtherMonth(b):this.calendarTwo.isInOtherMonth(b):(b=a,this.calendarOne.isInOtherMonth(b)&&this.calendarTwo.isInOtherMonth(b))},handleKeyDown:function(a){var b;a.keyCode===d.TAB?this._moveFocus(a):a.keyCode===d.ENTER||a.keyCode===d.SPACEBAR?(a.preventDefault(),a.target===this.calendarTwo.querySelector(".ha-calendar-next-month")?(this.show(this._year,this._maxMonth+1),this.select(new Date(this._year,this._maxMonth))):a.target===this.calendarOne.querySelector(".ha-calendar-previous-month")?(this.show(this._year,this._minMonth-1),this.select(new Date(this._year,this._minMonth+1,0))):(b=this._getSelectedDate())&&(this._isBlackoutDate(b)||this._isOtherMonthCell(b)||this.emit("change",{date:b}))):a.keyCode===d.LEFT||a.keyCode===d.NUM_PAD_MINUS||a.keyCode===d.MINUS?(a.preventDefault(),b=this._getSelectedDate(),b?this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-1),!1,!0):this.select([new Date(this._year,this._minMonth)])):a.keyCode===d.RIGHT||a.keyCode===d.NUM_PAD_PLUS||a.keyCode===d.EQUALS&&a.shiftKey?(a.preventDefault(),b=this._getSelectedDate(),b?this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+1)],!1,!0):this.select([new Date(this._year,this._minMonth)])):a.keyCode===d.END||a.keyCode===d.H?(a.preventDefault(),b=this._getSelectedDate(),b&&!isNaN(b.getMonth())?this.select(new Date(b.getFullYear(),b.getMonth()+1,0),!1,!0):this.select([new Date(this._year,this._maxMonth+1,0)])):a.keyCode===d.HOME||a.keyCode===d.M?(b=this._getSelectedDate(),b&&!isNaN(b.getMonth())?this.select(new Date(b.getFullYear(),b.getMonth()),!1,!0):this.select(new Date(this._year,this._minMonth)),a.preventDefault()):a.keyCode===d.PAGEUP?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(-1):this._updateSelectionMonth(-1)):a.keyCode===d.PAGEDOWN?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(1):this._updateSelectionMonth(1)):a.keyCode===d.Y?(a.preventDefault(),this.select(new Date(this._year,0,1),!1,!0)):a.keyCode===d.R?(a.preventDefault(),this.select(new Date(this._year+1,0,0),!1,!0)):a.keyCode===d.W?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select(new Date(this._year,b.getMonth(),b.getDate()-b.getDay()),!1,!0)):a.keyCode===d.K?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select(new Date(this._year,b.getMonth(),b.getDate()+(6-b.getDay())),!1,!0)):a.keyCode===d.T?(a.preventDefault(),this.select(this._currentDate,!1,!0)):a.keyCode===d.UP?(a.preventDefault(),b=this._getSelectedDate(),b&&this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-7),!1,!0)):a.keyCode===d.DOWN&&(a.preventDefault(),b=this._getSelectedDate(),b&&this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),!1,!0))},_moveFocus:function(a){var b=!1,c=!1;"INPUT"===a.target.tagName?a.shiftKey||(a.preventDefault(),a.stopPropagation(),this.calendarOne.querySelector(".ha-calendar-previous-month").focus()):a.shiftKey?a.target.classList.contains("ha-calendar-previous-month")&&(b=!0):a.target.classList.contains("ha-calendar-next-month")&&(c=!0),(b||c)&&this._owningInput&&(b?(a.preventDefault(),a.stopPropagation()):this.emit("ha-calendar-exiting"),this._owningInput.focus())},_parseIfString:function(a){return"string"==typeof a?new Date(a):a&&a.getDate?a:null},_updateSelectionYear:function(a){var b,c;(b=this._getSelectedDate())?(c=new Date(b.getFullYear()+a,b.getMonth(),b.getDate()),c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()||(c=new Date(b.getFullYear()+a,b.getMonth()+1,0)),this.select([c],!1,!0)):this.select([new Date(this._year+a,a>0?this._maxMonth+1:this._minMonth+1,0)],!1,!0)},_updateSelectionMonth:function(a){var b,c;(b=this._getSelectedDate())?(c=new Date(b.getFullYear(),b.getMonth()+a,b.getDate()),c.getMonth()===b.getMonth()+(a+1)&&(c=new Date(b.getFullYear(),b.getMonth()+(a+1),0)),this.select([c],!1,!0)):this.select([new Date(this._year,a>0?this._maxMonth+a+1:this._minMonth+a+1,0)],!1,!0)}});return a("ha-double-calendar",e)}),define("hui/date-picker",["register-component/v2/register","./text-field","object-utils/classes","./core/keys","./core/deviceUtils","./core/event","./core/utils","./core/timeUtils","./popover","./date-picker/calendar","./date-picker/double-calendar"],function(a,b,c,d,e,f,g,h){function i(a){return document.activeElement||a.relatedTarget||a.explicitOriginalTarget}var j=/\d{4}-\d{2}-\d{2}/,k=c.createObject(b.prototype,{init:function a(){a.super(this),this._validatorFunctions=[],this.setupProperties({maxDate:{default:"",type:String,change:function(a){var b=a?h.parseISODateString(a):null,c=this._getCalendar();b?(c&&(c.maxDate=h.formatDateAsEsDateString(b)),this.startValidation()):(c&&(c.maxDate=""),this.stopValidation())}},minDate:{default:"",type:String,change:function(a){var b=a?h.parseISODateString(a):null,c=this._getCalendar();b?(c&&(c.minDate=h.formatDateAsEsDateString(b)),this.startValidation()):(c&&(c.minDate=""),this.stopValidation())}},showYearNavigation:{default:!1,type:Boolean,change:function(a){return e.isHandheld()?void(a&&console.warn("showYearNavigation API isn't supported on mobile devices")):void(this._getCalendar()&&(this._getCalendar().showYearNavigation=a))}},useDoubleCalendar:{default:!1,type:Boolean,change:function(a){if(e.isHandheld())return void(a&&console.warn("useDoubleCalendar API isn't supported on mobile devices"));var b=this._getCalendar();a?(this.classList.add("ha-double-calendar-date-picker"),b&&"HA-DOUBLE-CALENDAR"!==b.nodeName?(b.parentNode.removeChild(b),this._popoverElement.section=this.ownerDocument.createElement("ha-double-calendar")):b||(this._popoverElement.section=this.ownerDocument.createElement("ha-double-calendar"))):(this.classList.remove("ha-double-calendar-date-picker"),b&&"HA-CALENDAR"!==b.nodeName?(b.parentNode.removeChild(b),this._popoverElement.section=this.ownerDocument.createElement("ha-calendar")):b||(this._popoverElement.section=this.ownerDocument.createElement("ha-calendar"))),this._getCalendar()._owningInput=this.querySelector("input"),Array.prototype.forEach.call(this._getCalendar().querySelectorAll("[id*=gridNode]"),function(a){a.removeAttribute("tabindex")}),this._setupListeners()}},navigationAriaDescription:{default:"shift focus to input to change calendar dates",type:String,change:function(a){if(e.isHandheld())return void("shift focus to input to change calendar dates"!==a&&console.warn("navigationAriaDescription API isn't supported on mobile devices"));var b,c,d,f,g=this.querySelectorAll("ha-calendar");for(f=0;f<g.length;f++)b=g[f],c=b&&b.componentId,d=c&&this.querySelector("#dates-navigation"+c),d&&(d.textContent=a)}}})},postRender:function a(){a.super(this),this.stopListening(),e.isHandheld()&&this.classList.add("mobile-date-picker");var b=this._popoverElement,c=this._getCalendar(),d=this.getAttribute("pattern")||this.getAttribute("_pattern"),f=this.querySelector("input"),g=this.getAttribute("value"),h=this.getAttribute("placeholder"),i=this,j=e.isHandheld();j?f.setAttribute("type","date"):(c&&c.parentNode.removeChild(c),b&&b.parentNode.removeChild(b),b=this.ownerDocument.createElement("ha-popover"),c=this.useDoubleCalendar?this.ownerDocument.createElement("ha-double-calendar"):this.ownerDocument.createElement("ha-calendar"),Array.prototype.forEach.call(c.querySelectorAll("[id*=gridNode]"),function(a){a.removeAttribute("tabindex")}),b.section=c,b.targetSelector="#"+f.id,b._closeOnBlur=!1,b._noAutoFocusFirstTabbableElementOnShow=!0,b._noAutoFocusLastActiveElementOnClose=!0,this.appendChild(b),this._popover=b),d?(this.datePattern=d,this.pattern="",this.removeAttribute("pattern"),this.setAttribute("_pattern",d)):this.datePattern=/^$|^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]((?:19|20)\d\d)$/,this._rendered=!0,g&&(this.value=g),this.validator=function(){return i._validator.call(this,i)},this.placeholder=h?h:"MM/DD/YYYY",this._setupListeners()},detachedCallback:function(){var a=this._popoverElement;a&&a.parentElement&&a.parentElement.removeChild(a)},closeCalendar:function(){return e.isHandheld()?void console.warn("closeCalendar API isn't supported on mobile devices"):void this._popoverElement.close()},select:function(a){if(!e.isHandheld()){var b=this._getCalendar();return!!b&&(b.select(a),!0)}},preselect:function(a){if(e.isHandheld())return void console.warn("preselect API isn't supported on mobile devices");var b=this._getCalendar();return!!b&&(b.preselection=a,!0)},postselect:function(a){if(e.isHandheld())return void console.warn("postselect API isn't supported on mobile devices");var b=this._getCalendar();return!!b&&(b.postselection=a,!0)},showCalendar:function(){return e.isHandheld()?void console.warn("showCalendar API isn't supported on mobile devices"):(this._popoverElement.show(),this._popoverElement.tabIndex=-1,void(this._popoverElement.lastFocus=null))},showNextMonth:function(){return e.isHandheld()?void console.warn("showNextMonth API isn't supported on mobile devices"):void("HA-CALENDAR"===this._getCalendar().nodeName?this._getCalendar().month+=1:this._getCalendar().show(this._getCalendar().year,this._getCalendar().maxMonth+1))},showPreviousMonth:function(){return e.isHandheld()?void console.warn("showPreviousMonth API isn't supported on mobile devices"):void("HA-CALENDAR"===this._getCalendar().nodeName?this._getCalendar().month-=1:this._getCalendar().show(this._getCalendar().year,this._getCalendar().minMonth-1))},format:function(a,b){if(b)return b(a);var c=a.getMonth()>=9?a.getMonth()+1:"0"+(a.getMonth()+1),d=a.getDate()>=10?a.getDate():"0"+a.getDate(),e=a.getFullYear();return""+c+"/"+d+"/"+e},_getCalendar:function(){var a=this._popoverElement;return a&&(a.querySelector("ha-double-calendar")||a.querySelector("ha-calendar"))},get _popoverElement(){return this._popover||this.querySelector("ha-popover")},_getInput:function(){return this.querySelector("input")},_nativeDateInputFormat:function(a){var b=a.getMonth()+1,c=a.getDate();return a.getFullYear()+"-"+(b<10?"0"+b:b)+"-"+(c<10?"0"+c:c)},_setupListeners:function(){this._validationListenersAdded=!1,this.stopListening(),this._closeListener&&this._closeListener.remove();var a=this._popoverElement,b=this._getCalendar(),c=this.querySelector("input"),h=this,j=[c,a],k=e.isHandheld(),l=function(a){setTimeout(function(){var b=i(a),d=b,e=h._popoverElement,f=!1,g=b===c;if(!g)for(;d;){if(d===e){f=!0;break}d=d.parentNode}g||f||e.openOrOpening&&(h._dontRefocusInput=!0,h.closeCalendar())},100)};k?(this.listenTo(c,"change",function(a){var b=c.value;this.value=b,this.value&&k?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content"),this.reportValidity(),a.stopPropagation(),this.emit("change",{date:b})}.bind(this)),this.listenTo(c,"blur",function(a){setTimeout(function(){var b=i(a);b&&b!==this.ownerDocument.body||this.focus()}.bind(this),50)}.bind(this)),this._setUpMobileListeners()):(j.forEach(function(a){this.listenTo(a,"blur",l,!0)},this),this.listenTo(c,"change",function(a){a.stopPropagation()}.bind(this)),this.listenTo(c,"change",function(a){a.stopPropagation()}.bind(this)),this.listenTo(b,"change",function(a){var b=a.date;this.value=b,this.closeCalendar(),this.reportValidity(),a.stopPropagation(),this.emit("change",{date:b})}.bind(this)),this.listenTo(b,"ha-calendar-exiting",function(){this._dontOpenCalendar=!0,this._dontRefocusInput=!0,a.close()}.bind(this)),this.listenTo(c,"focus",function(){if(this._dontOpenCalendar)return void(this._dontOpenCalendar=!1);var a,c=this._getInput().value;this.datePattern&&!this.datePattern.test(c)||isNaN((a=new Date(c)).getFullYear())||this._popoverElement.classList.contains("visible")||b.select(a,!1,!0),this.showCalendar()}.bind(this)),this.listenTo(c,"input",function(a){var c=a.target.value,d=new Date(c);isNaN(d.getTime())||this.datePattern&&!c.match(this.datePattern)||(this.value=c,b.select(d,!1,!0),this.emit("change",{date:d}))}.bind(this)),this.listenTo(c,"keydown",function(c){a.openOrOpening?b.handleKeyDown(c):c.keyCode===d.ENTER&&this.showCalendar(),d.isLetter(c.keyCode)&&c.preventDefault()}.bind(this)),this._closeListener=f.on(a,"close",function(){if(this._dontRefocusInput)return void(this._dontRefocusInput=!1);var a=this.querySelector("input");a&&document.activeElement!==a&&(this._dontOpenCalendar=!0,a.focus())}.bind(this)),g.validationRequired(this)&&this.startValidation())},_validator:function(a){for(var b=!0,c=0;c<a._validatorFunctions.length&&(b=a._validatorFunctions[c].call(this));)c++;return b},set dateFormatter(a){this._dateFormatter=a},get dateFormatter(){return this._dateFormatter},get monthAbbreviations(){return e.isHandheld()?void console.warn("monthAbbreviations API isn't supported on mobile devices"):this._getCalendar().monthAbbreviations},set monthAbbreviations(a){return e.isHandheld()?void console.warn("monthAbbreviations API isn't supported on mobile devices"):void(this._getCalendar().monthAbbreviations=a)},get monthLabels(){return e.isHandheld()?void console.warn("monthLabels API isn't supported on mobile devices"):this._getCalendar().monthLabels},set monthLabels(a){return e.isHandheld()?void console.warn("monthLabels API isn't supported on mobile devices"):void(this._getCalendar().monthLabels=a)},get dayOfWeekLabels(){return e.isHandheld()?void console.warn("dayOfWeekLabels API isn't supported on mobile devices"):this._getCalendar().dayOfWeekLabels},set dayOfWeekLabels(a){return e.isHandheld()?void console.warn("dayOfWeekLabels API isn't supported on mobile devices"):void(this._getCalendar().dayOfWeekLabels=a)},set blackoutDates(a){return e.isHandheld()?void console.warn("blackoutDates API isn't supported on mobile devices"):void(this._getCalendar().blackoutDates=a)},get blackoutDates(){return e.isHandheld()?void console.warn("blackoutDates API isn't supported on mobile devices"):this._getCalendar().blackoutDates},set highlightedDates(a){return e.isHandheld()?void console.warn("highlightedDates API isn't supported on mobile devices"):void(this._getCalendar().highlightedDates=a)},get highlightedDates(){return e.isHandheld()?void console.warn("highlightedDates API isn't supported on mobile devices"):this._getCalendar().highlightedDates},set notableDates(a){return e.isHandheld()?void console.warn("notableDates API isn't supported on mobile devices"):void(this._getCalendar().notableDates=a)},get notableDates(){return e.isHandheld()?void console.warn("notableDates API isn't supported on mobile devices"):this._getCalendar().notableDates},set datePattern(a){if(e.isHandheld())return void console.warn("datePattern API isn't supported on mobile devices");var b=this;this._formatValidator&&this._validatorFunctions.splice(this._validatorFunctions.indexOf(this._formatValidator),1),a&&"string"==typeof a?this._pattern=new RegExp(a):this._pattern=a,a?(this._formatValidator=function(){var a=b._pattern.test(b._getInput().value);return a||(this.errorMessage="Invalid date"),a},this._validatorFunctions.push(this._formatValidator),this.startValidation()):this.stopValidation()},get datePattern(){return this._pattern},set tooltips(a){return e.isHandheld()?void console.warn("tooltips API isn't supported on mobile devices"):void(this._getCalendar().tooltips=a)},get tooltips(){return e.isHandheld()?void console.warn("tooltips API isn't supported on mobile devices"):this._getCalendar().tooltips},set value(a){if(this._rendered){var b,c,d,f;if("string"==typeof a&&a?d=h.parseISODateString(a)||new Date(a):a&&(d=a),d){if(isNaN(d.getTime()))return void console.error("ha-date-picker passed invalid date string");b=this.format(d,this.dateFormatter),c=this._nativeDateInputFormat(d),this.select(d)}else b=c="";f=this._getInput(),e.isHandheld()?j.test(c)&&c!==f.value&&(f.value=c):b!==f.value&&(f.value=b),this.getAttribute("value"!==c)&&this.setAttribute("value",c),this._calculateMobileHeight(f.value)}},get value(){var a=this._getInput().value,b=e.isHandheld()?a?h.parseISODateString(a):new Date(""):new Date(a);return isNaN(b.getTime())?a:this._nativeDateInputFormat(b)}});return a("ha-date-picker",k)}),define("hui/date-range-picker",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/deviceUtils","./date-picker"],function(a,b,c,d){var e=c.createObject(b,{init:function a(){a.super(this),this.setupProperties({requiredMessage:{default:"Required Field",change:function(a){this._passThrough("requiredMessage",a)},type:String},invalidMessage:{default:"Invalid Value",change:function(a){this._passThrough("invalidMessage",a)},type:String},startDateLabel:{default:"Start date",change:function(a){var b=this._getStartDatePicker();b&&(b.label=a)}},endDateLabel:{default:"End date",change:function(a){var b=this._getEndDatePicker();b&&(b.label=a)}},disabled:{default:!1,type:Boolean,change:function(a){this._passThrough("disabled",a)}},required:{default:!1,type:Boolean,change:function(a){this._passThrough("required",a)}},maxLength:{default:524288,type:Number,change:function(a){this._passThrough("maxLength",a)}},optional:{default:!1,type:Boolean,change:function(a){this._passThrough("optional",a)}},labelOptional:{default:"optional",change:function(a){this._passThrough("labelOptional",a)}},startDateName:{default:"",change:function(a){var b=this._getStartDatePicker();b&&(b.name=a)}},endDateName:{default:"",change:function(a){var b=this._getEndDatePicker();b&&(b.name=a)}},autoComplete:{default:"on",change:function(a){this._passThrough("autoComplete",a)}},size:{default:20,type:Number,change:function(a){this._passThrough("size",a)}},placeholder:{default:"MM/DD/YYYY",change:function(a){this._passThrough("placeholder",a)}},navigationAriaDescription:{default:"shift focus to input to change calendar dates",type:String,change:function(a){this._passThrough("navigationAriaDescription",a)}}})},postRender:function a(){a.super(this);var b=this._getStartDatePicker(),c=this._getEndDatePicker(),e=new Date(Date.now()),f=d.isHandheld();b&&b.parentNode.removeChild(b),c&&c.parentNode.removeChild(c),b=this.ownerDocument.createElement("ha-date-picker"),c=this.ownerDocument.createElement("ha-date-picker"),f||(b.useDoubleCalendar=c.useDoubleCalendar=!0),this.appendChild(b),this.appendChild(c),f||this._getEndDatePicker().select(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)),this.setAttribute("role","group"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","Select date range")},attachedCallback:function a(){a.super(this);var b=this._getStartDatePicker(),c=this._getEndDatePicker();this.listenTo(b,"change",function(a){a.stopPropagation(),d.isHandheld()||c.preselect(a.date),this.emit("change",{date:a.date,dateType:"start"})}.bind(this)),this.listenTo(c,"change",function(a){a.stopPropagation(),d.isHandheld()||b.postselect(a.date),this.emit("change",{date:a.date,dateType:"end"})}.bind(this))},showNextMonth:function(){this._getStartDatePicker().showNextMonth(),this._getEndDatePicker().showNextMonth()},showPreviousMonth:function(){this._getStartDatePicker().showPreviousMonth(),this._getEndDatePicker().showPreviousMonth()},_getStartDatePicker:function(){return this.querySelector("ha-date-picker")},_getEndDatePicker:function(){return this.querySelectorAll("ha-date-picker")[1]},_passThrough:function(a,b){var c=this._getStartDatePicker(),d=this._getEndDatePicker();c&&(c[a]=b),d&&(d[a]=b)},get ariaLabel(){return this.getAttribute("aria-label")},set ariaLabel(a){this.setAttribute("aria-label",a)},get monthAbbreviations(){return this._monthAbbreviations},set monthAbbreviations(a){this._monthAbbreviations=a,this._passThrough("monthAbbreviations",a)},get monthLabels(){return this._monthLabels},set monthLabels(a){this._monthLabels=a,this._passThrough("monthLabels",a)},get dayOfWeekLabels(){return this._dayOfWeekLabels},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this._passThrough("dayOfWeekLabels",a)},set blackoutDates(a){this._blackoutDates=a,this._passThrough("blackoutDates",a)},get blackoutDates(){return this._blackoutDates},set notableDates(a){this._notableDates=a,this._passThrough("notableDates",a)},get notableDates(){return this._notableDates},set tooltips(a){this._tooltips=a,this._passThrough("tooltips",a)},get tooltips(){return this._tooltips},set datePattern(a){this._passThrough("datePattern",a)},get datePattern(){return this._getStartDatePicker().datePattern},set minDate(a){this._passThrough("minDate",a)},get minDate(){return this._getStartDatePicker().minDate},set maxDate(a){this._passThrough("maxDate",a)},get maxDate(){return this._getStartDatePicker().maxDate}});return a("ha-date-range-picker",e)}),define("hui/textfield-type-ahead",["register-component/v2/register","object-utils/classes","./typeahead-base","./core/icon"],function(a,b,c,d){"use strict";var e=b.createObject(c,{init:function a(){a.super(this),this.validationTarget=this,this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("ha-text-field.search").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},icon:{default:"",type:String,change:d.onChangeIconProperty},maxLength:{default:524288,type:Number,change:function(a){this.querySelector("ha-text-field.search").maxLength=a}},autoComplete:{default:"on",change:function(a){this.querySelector("input").autocomplete=a}},size:{default:20,type:Number,change:function(a){this.querySelector("ha-text-field.search").size=a}},menuSize:{default:7,type:Number,change:function(a){var b=this._getMenuPopover().querySelector("ha-menu"),c=!!b.render;c?b.size=a:b.setAttribute("size",a)}}})},get selectedItem(){return this._selectedItem},_getTriggerElement:function(){return this._inputElement}});return a("ha-textfield-type-ahead",e)}),define("text!hui/video/video.html",[],function(){return'<template>\n    <div class="ha-video-history-view ha-video-history-view-hidden hidden">\n        <h3 tabindex="-1" class="ha-video-history-title">{{historyTitleText}}</h3>\n        <div class="ha-video-links"></div>\n        <div class="ha-video-history-edit">\n            <button class="ha-video-history-edit-button no-button-style ha-video-focus-button">{{editHistoryText}}</button>\n        </div>\n        <div class="ha-video-history-controls hidden">\n            <button id="ha-video-clear-all-button{{componentId}}" class="no-button-style ha-video-focus-button">{{clearAllText}}</button>\n            <button class="ha-video-done-editing-button no-button-style ha-video-focus-button">{{doneEditingText}}</button>\n        </div>\n    </div>\n    <div class="ha-video-main-div">\n        <div class="ha-video-title-bar">\n            <div class="ha-video-history-option"><button aria-label="{{viewHistoryMessage}}" class="hi hi-list no-button-style"></button></div>\n            <h3>{{videoTitle}}</h3>\n            <div class="ha-video-size-options">\n                <button id="ha-video-restore{{componentId}}" aria-label="{{restoreSizeMessage}}" class="hi hi-vidresize-1 no-button-style hidden"></button>\n                <button id="ha-video-minimize{{componentId}}" aria-label="{{minimizeMessage}}" class="hi hi-vidresize-2 no-button-style"></button>\n                <button aria-label="{{closeMessage}}" class="hi hi-close no-button-style"></button>\n            </div>\n        </div>\n        <div id="ha-player{{componentId}}"></div>\n        <div class="ha-video-footer-bar"></div>\n   </div>\n    <div tabindex="0" aria-hidden="true"></div>\n    <section class="hidden"></section>\n</template>\n'});var videoKeys=[],YT,youtubeA11y;define("hui/video",["register-component/v2/register","object-utils/classes","register-component/template!./video/video.html","./popover","./core/contentNode","./core/keys","./core/position","./core/a11y"],function(a,b,c,d,e,f,g,h){youtubeA11y=h;var i=b.createObject(d.prototype,{init:function a(){a.super(this),this.contentSelectorMap={section:"section"},this.template=c,this._lastXPosition=null,this._lastYPosition=null,this._isDragging=!1,this._draggingPosition={},this._userHistory=[],this.setAttribute("videokey","ha-player"+this.componentId),this.setupProperties({viewHistoryMessage:{default:"Toggle History View",type:String,change:function(a){this.querySelector(".ha-video-history-option button").setAttribute("aria-label",a)}},minimizeMessage:{default:"Switch to compact view",type:String,change:function(a){this.querySelector("#ha-video-minimize"+this.componentId).setAttribute("aria-label",a)}},restoreSizeMessage:{default:"Return to full size view",type:String,change:function(a){this.querySelector("#ha-video-restore"+this.componentId).setAttribute("aria-label",a)}},closeMessage:{default:"Close video player",type:String,change:function(a){this.querySelector(".ha-video-size-options .hi-close").setAttribute("aria-label",a)}},url:{default:"",type:String,change:function(a){a&&(this._player&&this._player.loadVideoByUrl&&this._player.loadVideoByUrl(a),this._exitEditMode(),this.open&&this._updateHistory(a))}},userId:{default:"",type:String,change:function(){this._refreshHistory(),this._buildHistoryContent()}},historyTitleText:{default:"Recently Watched",type:String,change:function(a){this.querySelector(".ha-video-history-title").textContent=a}},editHistoryText:{default:"Edit",type:String,change:function(a){this.querySelector(".ha-video-history-edit-button").textContent=a}},clearAllText:{default:"Clear All",type:String,change:function(a){this.querySelector("#ha-video-clear-all-button"+this.componentId).textContent=a}},doneEditingText:{default:"Done",type:String,change:function(a){this.querySelector(".ha-video-done-editing-button").textContent=a}},titleText:{default:"",type:String,change:function(a){this.querySelector(".ha-video-title-bar h3").textContent=a}},enableHistoryView:{type:Boolean,change:function(a){a?(this.querySelector(".ha-video-history-option button").classList.remove("hidden"),this.classList.remove("ha-video-no-history-view")):(this.querySelector(".ha-video-history-option button").classList.add("hidden"),this.classList.add("ha-video-no-history-view"))}}}),this.on("keydown",function(a){f.ESCAPE!==a.keyCode&&h.keepFocusInsideListener(a,this)}),e.cacheInputContent(this,this.contentSelectorMap)},postRender:function a(){a.super(this),this._section=null,e.storeCachedInput(this,this.contentSelectorMap),this._closeOnBlur=!1},_setupListeners:function(){this.listenTo(this,"mousedown",function(a){this._isDragging=!0,this._draggingPosition={x:this.offsetLeft-a.pageX,y:this.offsetTop-a.pageY},a.preventDefault()}.bind(this)),this.listenTo(this.ownerDocument,"mouseup",function(){this._isDragging=!1}.bind(this)),this.listenTo(this.ownerDocument,"mousemove",function(a){this._isDragging&&(this.style.left=a.pageX+this._draggingPosition.x+"px",this.style.top=a.pageY+this._draggingPosition.y+"px")}.bind(this)),this.listenTo(this,"#ha-video-minimize"+this.componentId+":click",function(){this.minimize()}.bind(this)),this.listenTo(this,"#ha-video-restore"+this.componentId+":click",function(){this.maximize()}.bind(this)),this.listenTo(this,".hi-close:click",function(){this._emitVideoEvent("video-closed"),this.close()}.bind(this)),this.listenTo(this,".hi-list:click",function(){this.toggleHistoryView()}.bind(this)),this.listenTo(this,"close",function(){this._saveState(),this.toggleHistoryView(!0)}.bind(this)),this.listenTo(this,".ha-video-overlay:click",function(a){a.target===this.querySelector(".ha-video-overlay")&&a.target.parentNode.removeChild(a.target)}.bind(this)),this.listenTo(this,".ha-video-history-edit-button:click",function(a){a.target.classList.add("hidden"),this.querySelector(".ha-video-history-controls").classList.remove("hidden"),
Array.prototype.forEach.call(this.querySelectorAll("ha-video-launcher"),function(a){a._editMode=!0}),this._focusOnHistory()}.bind(this)),this.listenTo(this,"#ha-video-clear-all-button"+this.componentId+":click",function(){this._clearHistory()}.bind(this)),this.listenTo(this,".ha-video-done-editing-button:click",function(){this._exitEditMode()}.bind(this)),this.listenTo(this,"video-launcher-dismiss",function(a){this._refreshHistory();for(var b,c=a.link.url,d=a.target;(b=this._userHistory.indexOf(c))>-1;)this._userHistory.splice(b,1);for(window.localStorage.setItem(this.userId+"haUserViewingHistory",JSON.stringify(this._userHistory));d&&"HA-VIDEO-LAUNCHER"!==d.nodeName;)d=d.parentNode;d&&d.parentNode.removeChild(d),this._focusOnHistory()}.bind(this))},attachedCallback:function a(){a.super(this);var b,c=this.querySelector(".connector"),d=document.createElement("script"),e=document.getElementsByTagName("script")[0],f=this._uniqueIdentifier();videoKeys.push(f),YT&&YT.Player?(b=this.url&&this.url.split("embed/")[1],b&&(b=b.split("?")[0]),this._player=new YT.Player(f,{videoId:b,playerVars:{enablejsapi:1,showinfo:0,modestbranding:1},events:{onStateChange:onPlayerStateChange.bind(null,f),onReady:onPlayerReady.bind(null,f)}})):(d.src="https://www.youtube.com/iframe_api",e.parentNode.insertBefore(d,e)),c&&c.parentNode.removeChild(c),this._setupListeners()},detachedCallback:function(){var a=videoKeys.indexOf(this._uniqueIdentifier());a>-1&&videoKeys.splice(a,1),this._player=null,this.stopListening()},_uniqueIdentifier:function(){return"ha-player"+this.componentId},_buildHistoryContent:function(){var a=this.querySelector(".ha-video-links");a.innerHTML="",this._userHistory&&this._userHistory.length&&this._userHistory.forEach(function(b){a.appendChild(this._buildHistoryEntry(b))}.bind(this))},_buildHistoryEntry:function(a){var b=document.createElement("ha-video-launcher");return b.size="mini",b.orientation="horizontal",b.url=a,b.standalone=!1,b.videoPlayer=this,b},_clearHistory:function(){this._userHistory=[],this._buildHistoryContent(),window.localStorage.removeItem(this.userId+"haUserViewingHistory"),this._exitEditMode()},_emitVideoEvent:function(a){this.userId&&this.emit(a,{url:this.url,time:(new Date).valueOf(),action:a,userId:this.userId})},_exitEditMode:function(){this.querySelector(".ha-video-history-controls").classList.add("hidden"),this.querySelector(".ha-video-history-edit-button").classList.remove("hidden"),Array.prototype.forEach.call(this.querySelectorAll("ha-video-launcher"),function(a){a._editMode=!1}),this._focusOnHistory()},_focusOnHistory:function(a){a=a||this.querySelector(".ha-video-history-view");var b;a.classList.contains("ha-video-history-view-hidden")||((b=a.querySelector(".ha-video-launcher-single"))?b.focus():a.querySelector(".ha-video-history-title").focus())},_refreshHistory:function(){if(this.userId){this._userHistory=[];try{var a=JSON.parse(window.localStorage.getItem(this.userId+"haUserViewingHistory"));a&&a.length&&(this._userHistory=a)}catch(a){}}},_saveState:function(){this._lastYPosition=this.style.top,this._lastXPosition=this.style.left,this._player&&this._player.pauseVideo&&this._player.pauseVideo()},_updateHistory:function(a){var b,c=this.querySelector(".ha-video-history-view");if(this.userId&&a&&(this._refreshHistory(),this._userHistory)){if(a!==this._userHistory[0]){for(;(b=this._userHistory.indexOf(a))>-1;)this._userHistory.splice(b,1);this._userHistory.unshift(a)}this._userHistory.length>8&&this._userHistory.splice(8,1/0),window.localStorage.setItem(this.userId+"haUserViewingHistory",JSON.stringify(this._userHistory)),this._buildHistoryContent(),this._focusOnHistory(c)}},maximize:function(){var a=this.querySelector("#ha-video-minimize"+this.componentId);this.classList.remove("minimized"),this.querySelector("#ha-video-restore"+this.componentId).classList.add("hidden"),a.classList.remove("hidden"),this.enableHistoryView&&this.querySelector(".hi-list").classList.remove("hidden"),this._overlayDiv&&this._overlayDiv.classList.remove("hidden"),this.querySelector(".ha-video-title-bar h3").classList.remove("hidden"),this.focus()},minimize:function(){var a=this.querySelector("#ha-video-restore"+this.componentId);this.toggleHistoryView(!0),this.classList.add("minimized"),this.querySelector("#ha-video-minimize"+this.componentId).classList.add("hidden"),a.classList.remove("hidden"),this.querySelector(".hi-list").classList.add("hidden"),this.querySelector(".ha-video-title-bar h3").classList.add("hidden"),this._overlayDiv&&this._overlayDiv.classList.add("hidden"),this.focus()},switchView:function(a){a?this.classList.add("ha-video-mobile"):this.classList.remove("ha-video-mobile")},show:function(){if(this.toggleHistoryView(!0),!this.classList.contains("visible")){var a=function(a){return a<0?" + "+-1*a:" - "+a},b=a(234-(window.pageYOffset||window.scrollY||0)),c=a(350-(window.pageXOffset||window.scrollX||0));g.bringToFront(this),this.style.top=null!==this._lastYPosition?this._lastYPosition:"calc(50%"+b+"px)",this.style.left=null!==this._lastXPosition?this._lastXPosition:"calc(50%"+c+"px)",this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"),this.offsetTop<0&&(this.style.top="0px"),this.offsetLeft<0&&(this.style.left="0px"),this._updateHistory(this.url),this.focus(),this._player&&this._player.playVideo&&!this._ended&&this._player.playVideo()}},toggleHistoryView:function(a){var b=this.querySelector(".ha-video-history-view");this._exitEditMode(),a||!b.classList.contains("ha-video-history-view-hidden")?(b.classList.add("ha-video-history-view-hidden"),setTimeout(function(){b.classList.add("hidden")},500),this.focus()):(this._refreshHistory(),this._buildHistoryContent(),b.classList.remove("hidden"),setTimeout(function(){b.classList.remove("ha-video-history-view-hidden"),this._focusOnHistory(b)}.bind(this),0))},set section(a){a=Array.isArray(a)?a:[a];var b,c=a.filter(function(a){return"HA-VIDEO-OVERLAY-BUTTON"===a.nodeName})[0];this._section=c,this._overlayDiv&&(b=this._overlayDiv.querySelector("ha-video-overlay-button"),b?b.parentNode.replaceChild(c,b):this._overlayDiv.firstChild.appendChild(c)),this._section&&this._section===c&&this.querySelector("section").appendChild(c.cloneNode(!0))},get section(){return this._section}});return a("ha-video",i)}),define("text!hui/video-launcher/video-launcher.html",[],function(){return'<template>\n    <div class="ha-video-launcher-view">\n        <button class="ha-video-launcher-single no-button-style">\n            <div class="ha-video-launcher-preview">\n                <img alt="">\n                <div class="hi hi-vidplay" aria-hidden="true"></div>\n                <div class="ha-video-hover-div"></div>\n            </div>\n            <div class="ha-video-launcher-info">\n                <div class="ha-video-launcher-info-inner">\n                    <div class="ha-video-launcher-title"></div>\n                    <div class="ha-video-info-separator hidden">-</div>\n                    <div class="ha-video-launcher-time"></div>\n                </div>\n                <div class="ha-video-description hidden"></div>\n            </div>\n        </button>\n        <button aria-label="{{removeMessage}}" class="hi hi-close hidden no-button-style"></button>\n        </div>\n    </div>\n    <section class="hidden"></section>\n</template>\n'});var youtubeDataApiCallbackMap={};define("hui/video/youtube",[],function(){var a={},b=0,c="AIzaSyBjnMTlF9ou968qeDBc6LQpN860jJ0Juj0";return{get:function(d,e,f){var g,h,i,j,k=d.match(/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/);return k?(g=k[1],void(a[g]?e(a[g]):(h=document.createElement("script"),i=document.getElementsByTagName("script")[0],j=b,youtubeDataApiCallbackMap["a"+g+b]=function(b){a[g]=b.items[0]||"no data found",e(a[g]),h.parentNode.removeChild(h),delete youtubeDataApiCallbackMap[""+g+j]},h.src="https://www.googleapis.com/youtube/v3/videos?callback=youtubeDataApiCallbackMap.a"+g+b+"&request.preventCache="+ +new Date+"&key="+c+"&part=contentDetails,snippet&id="+g,b++,i.parentNode.insertBefore(h,i)))):void(f&&f(new Error("Unrecognized YouTube URL")))},set apiKey(a){c=a},get apiKey(){return c}}}),define("hui/video-launcher",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/keys","./core/contentNode","./core/ellipsis","register-component/template!./video-launcher/video-launcher.html","./video/youtube","./video"],function(a,b,c,d,e,f,g,h){var i,j;return j=c.createObject(b,{init:function a(){a.super(this),this.contentSelectorMap={section:"section"},this.template=g,this._videoPlayer=null,this.standalone=!0,this._keyDownPause=!1,this.setupProperties({enableHistoryView:{type:Boolean},size:{default:"mini",type:String,change:function(a){this.querySelector(".ha-video-launcher-view").classList["mini"===a?"add":"remove"]("ha-video-launcher-mini"),this.querySelector(".ha-video-launcher-view").classList["giant"===a?"add":"remove"]("ha-video-launcher-giant"),this.querySelector(".ha-video-launcher-view").classList["large"===a?"add":"remove"]("ha-video-launcher-large"),this.querySelector(".ha-video-info-separator").classList["giant"===a?"remove":"add"]("hidden"),this.querySelector(".ha-video-description").classList["giant"===a&&this.show||"large"===a?"remove":"add"]("hidden"),"giant"===a||"large"===a?this._changeFocusConfiguration(!0):this._changeFocusConfiguration(!1)}},orientation:{default:"horizontal",type:String,change:function(a){this.querySelector(".ha-video-launcher-view").classList["horizontal"===a?"add":"remove"]("horizontal"),this.querySelector(".ha-video-launcher-view").classList["vertical"===a?"add":"remove"]("vertical")}},url:{default:"",type:String,change:function(a){h.get(a,function(a){var b=this.querySelector(".ha-video-launcher-title");"mini"===this.size?this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.medium.url:"giant"!==this.size&&"large"!==this.size||(a.snippet.thumbnails.maxres&&a.snippet.thumbnails.maxres.url?this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.maxres.url:this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.medium.url),b.textContent=this.titleText||a.snippet.title,f(b,{lines:2}),"giant"!==this.size&&"large"!==this.size||this.querySelector(".ha-video-launcher-preview img").setAttribute("alt",a.snippet.title);var c,d,e="0s",g=a.contentDetails.duration.match(/^PT(?:(\d+)H)?(\d+)M(\d+)S$/),h=a.snippet.description;if(g&&(c=g[2],g[1]&&(c=String(parseInt(c,10)+60*parseInt(g[1],10))),d=g[3],e=c+":"+d+"s"),this.querySelector(".ha-video-launcher-time").textContent=e,this.useYoutubeDescription){var i=this.querySelector(".ha-video-description");i.textContent=h,i.classList.contains("hidden")||f(i,{lines:5})}this._youtubeDescription=h}.bind(this))}},titleText:{type:String,default:"",change:function(a){var b=this.querySelector(".ha-video-launcher-title");b&&a&&(b.textContent=a)}},useYoutubeDescription:{type:Boolean,change:function(a){var b=this.querySelector(".ha-video-description");if(a?b.textContent=this._youtubeDescription||"":this.description&&(b.textContent=this.description),"giant"===this.size){var c=a||this.description?"remove":"add";b.classList[c]("hidden")}b.classList.contains("hidden")||f(b,{lines:5})}},description:{type:String,default:"",change:function(a){var b=this.querySelector(".ha-video-description");if(b.textContent=a,"giant"===this.size){var c=a||this.useYoutubeDescription?"remove":"add";b.classList[c]("hidden")}b.classList.contains("hidden")||f(b,{lines:5})}},removeMessage:{type:String,default:"Remove video link",change:function(a){Array.prototype.forEach.call(this.querySelectorAll("button.hi-close"),function(b){b.setAttribute("aria-label",a)})}},_editMode:{type:Boolean,change:function(a){Array.prototype.forEach.call(this.querySelectorAll("button.hi-close"),function(b){b.classList[a?"remove":"add"]("hidden")})}}}),e.cacheInputContent(this,this.contentSelectorMap)},postRender:function a(){a.super(this),e.storeCachedInput(this,this.contentSelectorMap),this.listenTo(this,".hi-close:click",function(a){a.stopPropagation(),this._emitRemoveEvent(a)}.bind(this)),this.listenTo(this,".ha-video-launcher-single:click",function(a){i||a.target===this.querySelector(".hi-close")||a.target.classList.contains("ha-video-description")||(a.stopPropagation(),this.launchVideo())}.bind(this)),this.listenTo(this,"keydown",function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACEBAR||(a.target===this.querySelector(".hi-close")?(i=!0,setTimeout(function(){i=!1},100),this._emitRemoveEvent(a)):a.target===this.querySelector(".ha-video-launcher-single")&&(a.preventDefault(),this.launchVideo()))}.bind(this))},detachedCallback:function(){this.standalone&&this._videoPlayer&&this._videoPlayer.parentNode&&this._videoPlayer.parentNode.removeChild(this._videoPlayer)},set videoPlayer(a){this.standalone&&this._videoPlayer&&this._videoPlayer.parentNode&&this._videoPlayer.parentNode.removeChild(this._videoPlayer),this._videoPlayer=a},get videoPlayer(){return this._videoPlayer},_emitRemoveEvent:function(a){a.stopPropagation(),this.emit("video-launcher-dismiss",{link:this})},launchVideo:function(){var a,b;this._videoPlayer?this._videoPlayer.url!==this.url&&(this._videoPlayer.url=this.url):(a=this.ownerDocument.createElement("ha-video"),a.url=this.url,document.body.appendChild(a),this._videoPlayer=a,b=this.section,b&&(this._videoPlayer.section=b)),window.innerWidth<=800&&window.innerHeight<=600&&this._videoPlayer.switchView(!0),this.standalone&&(this._videoPlayer.enableHistoryView=this.enableHistoryView,this.titleText&&(this._videoPlayer.titleText=this.titleText)),this._videoPlayer.show()},_changeFocusConfiguration:function(a){var b,c,d,e,f;if(a)for(;b=this.querySelector("button.ha-video-launcher-single");)c=document.createElement("div"),d=document.createElement("button"),c.innerHTML=b.innerHTML,c.classList.add("ha-video-launcher-single"),b.classList.contains("hidden")&&c.classList.add("hidden"),e=c.querySelector(".ha-video-launcher-info-inner"),d.innerHTML=e.innerHTML,d.classList.add("ha-video-launcher-info-inner"),d.classList.add("no-button-style"),e.parentNode.replaceChild(d,e),b.parentNode.replaceChild(c,b),f=c.querySelector(".ha-video-launcher-preview img"),f.setAttribute("alt",d.querySelector(".ha-video-launcher-title").textContent),f.setAttribute("tabindex","-1");else for(;c=this.querySelector("div.ha-video-launcher-single");)b=document.createElement("button"),e=document.createElement("div"),b.innerHTML=c.innerHTML,b.classList.add("ha-video-launcher-single"),b.classList.add("no-button-style"),c.classList.contains("hidden")&&b.classList.add("hidden"),d=b.querySelector(".ha-video-launcher-info-inner"),e.innerHTML=d.innerHTML,e.classList.add("ha-video-launcher-info-inner"),d.parentNode.replaceChild(e,d),c.parentNode.replaceChild(b,c),f=b.querySelector(".ha-video-launcher-preview img"),f.setAttribute("alt",""),f.removeAttribute("tabindex")},set section(a){a=Array.isArray(a)?a:[a];var b=a.filter(function(a){return"HA-VIDEO-OVERLAY-BUTTON"===a.nodeName})[0];b&&(this.querySelector("section").appendChild(b),this._section=b,this._videoPlayer&&(this._videoPlayer.section=b))},get section(){return this._section}}),a("ha-video-launcher",j)}),define("hui/video/video-overlay-button",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes"],function(a,b,c){"use strict";var d=c.createObject(b,{init:function a(){a.super(this),this.setupProperties({label:{default:"",change:function(a){var b=this.querySelector("div");b&&(b.textContent=a,a||this.removeAttribute("label"))}},type:{default:"",change:function(a){var b=this.querySelector("button");b&&("primary"===a?b.className="ha-button ha-button-primary":a&&"default"!==a||(b.className="ha-button"))}}})},postRender:function a(){if(a.super(this),!this.children.length){var b=this.textContent,c=document.createElement("button");this.textContent="",this.appendChild(document.createElement("div")),this.appendChild(c),c.type="button",c.textContent=b}Object.defineProperty(this,"textContent",{get:function(){var a=this.querySelector("button");return a.textContent},set:function(a){var b=this.querySelector("button");b.textContent=a}})},focusContent:function(){var a=this.querySelector("button"),b=this.querySelector("div");a?a.focus():b&&(b.setAttribute("tabindex","-1"),b.focus())}});return a("ha-video-overlay-button",d)}),define("text!hui/card/card-discovery-large.html",[],function(){return'<template>\n    <div class="card-discovery-large-container" aria-labelledby="card-discovery-large-title-{{componentId}}" aria-describedby="card-discovery-large-text-{{componentId}}">\n        <header>\n            <button class="btn hi hi-close pull-right" aria-label="Close"></button>\n            <div class="card-discovery-large-title">\n            </div>\n        </header>\n        <section id="card-discovery-large-text-{{componentId}}"></section>\n        <footer></footer>\n    </div>\n</template>'}),define("hui/card-discovery-large",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","register-component/template!./card/card-discovery-large.html","./core/a11y","./core/contentNode","./core/keys","./core/utils"],function(a,b,c,d,e,f,g,h){function i(a){var b,c=a.children.length;1===c?b="one-btn":2===c?b="two-btn":3===c&&(b="three-btn"),b&&a.classList.add(b)}var j={section:"section",footer:"footer"},k=a.createObject(c,{init:function a(){a.super(this),this.template=d,f.cacheInputContent(this,j),this._footer=null,this._section=null,this.setupProperties({dismissible:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("header button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.add("hidden"),b.classList.remove("show"))}},titleText:{default:"",type:String,change:function(a){var b=this.querySelector(".card-discovery-large-title");b&&(b.textContent=a)}},open:{default:!1,type:Boolean,change:function(a){var b,c,d,f,i=this;a&&!this.classList.contains("show")?(this.classList.add("show"),b=this.querySelector("section").querySelector("input, textarea, select, button"),c=this.querySelector("footer .ha-button-primary"),d=this.querySelector("header button"),f=b||c||d,f?f.focus():this.focus(),this.on("keydown",function(a){a.keyCode===g.ESCAPE&&(h.stopEvent(a),i.emit("dismiss"),i.close()),e.keepFocusInsideListener(a,i)}),this.emit("show")):!a&&this.classList.contains("show")&&(this.classList.remove("show"),this.off("keydown"),this.emit("close"))}}}),this.on("header button:click",function(){this.emit("dismiss"),this.close()}.bind(this))},show:function(){this.open=!0},close:function(){this.open=!1},set footer(a){for(var b=this.querySelector("footer");b.firstChild;)b.removeChild(b.firstChild);a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?[].forEach.call(a,function(a){"HA-FOOTER-BUTTONS"===a.nodeName&&i(a),b.appendChild(a)}):a.nodeType&&("HA-FOOTER-BUTTONS"===a.nodeName&&i(a),b.appendChild(a))),this._footer=a},get footer(){return this._footer},set section(a){for(var b=this.querySelector("section");b.firstChild;)b.removeChild(b.firstChild);a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?[].forEach.call(a,function(a){a&&a.nodeType&&b.appendChild(a)}):a.nodeType&&b.appendChild(a)),this._section=a},get section(){return this._section},postRender:function a(){a.super(this),e.addA11yFocus(this),f.storeCachedInput(this,j)}});return b("ha-card-discovery-large",k)}),define("hui/message",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";var d=a.createObject(c,{});return b("ha-message",d)}),define("hui/text",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";var d=a.createObject(c,{});return b("ha-text",d)}),define("hui/info-link",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/utils","./core/keys","./core/a11y","./tooltip","./message","./text"],function(a,b,c,d,e,f){"use strict";var g,h=function(a,b){var c,e,f=a.querySelectorAll(b),g="";return f&&(c=d.removeNodesSafe(a,f),e=c[0]),e&&e instanceof HTMLElement&&(g=e),g},i=function(){return d.createElement("span",{className:"link-text"})},j=function(){return d.createElement("ha-tooltip",{position:"bottom top",dismissible:!0,trigger:"custom"})};return g=a.createObject(b,{init:function a(){a.super(this),this._linkText="",this._message="",this.initializeLinkText(),this.initializeMessage()},initializeLinkText:function(){var a=this.querySelector(".link-text"),b=this.getAttribute("linkText"),c=h(this,"ha-text"),d=b||c||"";a&&!d&&(d=Array.prototype.slice.call(a.childNodes)),this.linkText=d},initializeMessage:function(){var a=this.getAttribute("message"),b=h(this,"ha-message"),c=a||b||"";this.message=c},set linkText(a){"string"==typeof a?this.setAttribute("linktext",a):this.removeAttribute("linktext");var b=this.querySelector(".link-text");for(b||(b=i(),this.insertBefore(b,this.firstChild));b.firstChild;)b.removeChild(b.firstChild);d.attachContentToNode(a,b),this._linkText=a},get linkText(){return this._linkText},set message(a){"string"==typeof a?this.setAttribute("message",a):this.removeAttribute("message");var b=this.ownerDocument.createElement("span"),c=this.querySelector("ha-tooltip");c||(c=j(),this.appendChild(c)),d.attachContentToNode(a,b),this._message=a,c.message=b},get message(){return this._message},attributeChangedCallback:function a(b,c,d){"linktext"===b?this.linkText=d:"message"===b?this.message=d:a.super(this,b,c,d)},postRender:function a(){var b=this.querySelector("ha-tooltip"),c=this.querySelector(".link-text");b||(b=j(),this.appendChild(b)),this.tooltip=b,a.super(this),this.tabIndex="0",this.setAttribute("role","link"),this.setAttribute("aria-haspopup","true"),this.on("keydown",function(a){a.keyCode!==e.SPACEBAR&&a.keyCode!==e.ENTER||(c.classList.add("active"),b.show())}.bind(this)),this.on(".link-text:click",function(a){a.stopImmediatePropagation(),a.preventDefault(),c.classList.add("active"),b.show(),this.emit("click")}.bind(this)),this.listenTo(this.tooltip,"dismiss",function(a){var b=a.target;a.stopImmediatePropagation(),b&&"HA-TOOLTIP"===b.tagName&&(b.close(),this.focus())}.bind(this)),this.listenTo(this.tooltip,"close",function(a){a.stopImmediatePropagation(),c.classList.remove("active")}),this.listenTo(this.tooltip,"show",function(a){a.stopImmediatePropagation()}),f.addA11yFocus(this)},get tooltip(){return this._tooltip||this.querySelector("ha-tooltip")},set tooltip(a){this._tooltip=a},detachedCallback:function(){this.tooltip&&this.tooltip.parentElement&&this.tooltip.parentElement.removeChild(this.tooltip)}}),c("ha-info-link",g)}),define("../../build/dist/js/hui",function(){});
//# sourceMappingURL=hui.min.map